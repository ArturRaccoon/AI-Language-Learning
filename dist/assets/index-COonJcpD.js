(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var _U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vp={exports:{}},Fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function QC(){if(vb)return Fu;vb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Fu.Fragment=e,Fu.jsx=t,Fu.jsxs=t,Fu}var Eb;function YC(){return Eb||(Eb=1,vp.exports=QC()),vp.exports}var b=YC(),Ep={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function XC(){if(Tb)return Re;Tb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function I(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,V={};function Q(k,ne,he){this.props=k,this.context=ne,this.refs=V,this.updater=he||R}Q.prototype.isReactComponent={},Q.prototype.setState=function(k,ne){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ne,"setState")},Q.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Y(){}Y.prototype=Q.prototype;function te(k,ne,he){this.props=k,this.context=ne,this.refs=V,this.updater=he||R}var ae=te.prototype=new Y;ae.constructor=te,P(ae,Q.prototype),ae.isPureReactComponent=!0;var j=Array.isArray;function se(){}var x={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(k,ne,he){var de=he.ref;return{$$typeof:r,type:k,key:ne,ref:de!==void 0?de:null,props:he}}function M(k,ne){return N(k.type,ne,k.props)}function L(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function B(k){var ne={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return ne[he]})}var D=/\/+/g;function Le(k,ne){return typeof k=="object"&&k!==null&&k.key!=null?B(""+k.key):ne.toString(36)}function pt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(se,se):(k.status="pending",k.then(function(ne){k.status==="pending"&&(k.status="fulfilled",k.value=ne)},function(ne){k.status==="pending"&&(k.status="rejected",k.reason=ne)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,ne,he,de,Se){var Ne=typeof k;(Ne==="undefined"||Ne==="boolean")&&(k=null);var Fe=!1;if(k===null)Fe=!0;else switch(Ne){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(k.$$typeof){case r:case e:Fe=!0;break;case y:return Fe=k._init,J(Fe(k._payload),ne,he,de,Se)}}if(Fe)return Se=Se(k),Fe=de===""?"."+Le(k,0):de,j(Se)?(he="",Fe!=null&&(he=Fe.replace(D,"$&/")+"/"),J(Se,ne,he,"",function(Hs){return Hs})):Se!=null&&(L(Se)&&(Se=M(Se,he+(Se.key==null||k&&k.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Fe)),ne.push(Se)),1;Fe=0;var jt=de===""?".":de+":";if(j(k))for(var ut=0;ut<k.length;ut++)de=k[ut],Ne=jt+Le(de,ut),Fe+=J(de,ne,he,Ne,Se);else if(ut=I(k),typeof ut=="function")for(k=ut.call(k),ut=0;!(de=k.next()).done;)de=de.value,Ne=jt+Le(de,ut++),Fe+=J(de,ne,he,Ne,Se);else if(Ne==="object"){if(typeof k.then=="function")return J(pt(k),ne,he,de,Se);throw ne=String(k),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function ue(k,ne,he){if(k==null)return k;var de=[],Se=0;return J(k,de,"","",function(Ne){return ne.call(he,Ne,Se++)}),de}function ye(k){if(k._status===-1){var ne=k._result;ne=ne(),ne.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=ne)}if(k._status===1)return k._result.default;throw k._result}var Pe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},He={map:ue,forEach:function(k,ne,he){ue(k,function(){ne.apply(this,arguments)},he)},count:function(k){var ne=0;return ue(k,function(){ne++}),ne},toArray:function(k){return ue(k,function(ne){return ne})||[]},only:function(k){if(!L(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Re.Activity=v,Re.Children=He,Re.Component=Q,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=te,Re.StrictMode=i,Re.Suspense=d,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return x.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(k,ne,he){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var de=P({},k.props),Se=k.key;if(ne!=null)for(Ne in ne.key!==void 0&&(Se=""+ne.key),ne)!C.call(ne,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ne.ref===void 0||(de[Ne]=ne[Ne]);var Ne=arguments.length-2;if(Ne===1)de.children=he;else if(1<Ne){for(var Fe=Array(Ne),jt=0;jt<Ne;jt++)Fe[jt]=arguments[jt+2];de.children=Fe}return N(k.type,Se,de)},Re.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Re.createElement=function(k,ne,he){var de,Se={},Ne=null;if(ne!=null)for(de in ne.key!==void 0&&(Ne=""+ne.key),ne)C.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Se[de]=ne[de]);var Fe=arguments.length-2;if(Fe===1)Se.children=he;else if(1<Fe){for(var jt=Array(Fe),ut=0;ut<Fe;ut++)jt[ut]=arguments[ut+2];Se.children=jt}if(k&&k.defaultProps)for(de in Fe=k.defaultProps,Fe)Se[de]===void 0&&(Se[de]=Fe[de]);return N(k,Ne,Se)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:h,render:k}},Re.isValidElement=L,Re.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:ye}},Re.memo=function(k,ne){return{$$typeof:g,type:k,compare:ne===void 0?null:ne}},Re.startTransition=function(k){var ne=x.T,he={};x.T=he;try{var de=k(),Se=x.S;Se!==null&&Se(he,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(se,Pe)}catch(Ne){Pe(Ne)}finally{ne!==null&&he.types!==null&&(ne.types=he.types),x.T=ne}},Re.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Re.use=function(k){return x.H.use(k)},Re.useActionState=function(k,ne,he){return x.H.useActionState(k,ne,he)},Re.useCallback=function(k,ne){return x.H.useCallback(k,ne)},Re.useContext=function(k){return x.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,ne){return x.H.useDeferredValue(k,ne)},Re.useEffect=function(k,ne){return x.H.useEffect(k,ne)},Re.useEffectEvent=function(k){return x.H.useEffectEvent(k)},Re.useId=function(){return x.H.useId()},Re.useImperativeHandle=function(k,ne,he){return x.H.useImperativeHandle(k,ne,he)},Re.useInsertionEffect=function(k,ne){return x.H.useInsertionEffect(k,ne)},Re.useLayoutEffect=function(k,ne){return x.H.useLayoutEffect(k,ne)},Re.useMemo=function(k,ne){return x.H.useMemo(k,ne)},Re.useOptimistic=function(k,ne){return x.H.useOptimistic(k,ne)},Re.useReducer=function(k,ne,he){return x.H.useReducer(k,ne,he)},Re.useRef=function(k){return x.H.useRef(k)},Re.useState=function(k){return x.H.useState(k)},Re.useSyncExternalStore=function(k,ne,he){return x.H.useSyncExternalStore(k,ne,he)},Re.useTransition=function(){return x.H.useTransition()},Re.version="19.2.0",Re}var bb;function Md(){return bb||(bb=1,Ep.exports=XC()),Ep.exports}var F=Md();const WC=g0(F);var Tp={exports:{}},qu={},bp={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function JC(){return Sb||(Sb=1,(function(r){function e(J,ue){var ye=J.length;J.push(ue);e:for(;0<ye;){var Pe=ye-1>>>1,He=J[Pe];if(0<a(He,ue))J[Pe]=ue,J[ye]=He,ye=Pe;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ue=J[0],ye=J.pop();if(ye!==ue){J[0]=ye;e:for(var Pe=0,He=J.length,k=He>>>1;Pe<k;){var ne=2*(Pe+1)-1,he=J[ne],de=ne+1,Se=J[de];if(0>a(he,ye))de<He&&0>a(Se,he)?(J[Pe]=Se,J[de]=ye,Pe=de):(J[Pe]=he,J[ne]=ye,Pe=ne);else if(de<He&&0>a(Se,ye))J[Pe]=Se,J[de]=ye,Pe=de;else break e}}return ue}function a(J,ue){var ye=J.sortIndex-ue.sortIndex;return ye!==0?ye:J.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],g=[],y=1,v=null,S=3,I=!1,R=!1,P=!1,V=!1,Q=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ae(J){for(var ue=t(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=J)i(g),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=t(g)}}function j(J){if(P=!1,ae(J),!R)if(t(d)!==null)R=!0,se||(se=!0,B());else{var ue=t(g);ue!==null&&pt(j,ue.startTime-J)}}var se=!1,x=-1,C=5,N=-1;function M(){return V?!0:!(r.unstable_now()-N<C)}function L(){if(V=!1,se){var J=r.unstable_now();N=J;var ue=!0;try{e:{R=!1,P&&(P=!1,Y(x),x=-1),I=!0;var ye=S;try{t:{for(ae(J),v=t(d);v!==null&&!(v.expirationTime>J&&M());){var Pe=v.callback;if(typeof Pe=="function"){v.callback=null,S=v.priorityLevel;var He=Pe(v.expirationTime<=J);if(J=r.unstable_now(),typeof He=="function"){v.callback=He,ae(J),ue=!0;break t}v===t(d)&&i(d),ae(J)}else i(d);v=t(d)}if(v!==null)ue=!0;else{var k=t(g);k!==null&&pt(j,k.startTime-J),ue=!1}}break e}finally{v=null,S=ye,I=!1}ue=void 0}}finally{ue?B():se=!1}}}var B;if(typeof te=="function")B=function(){te(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Le=D.port2;D.port1.onmessage=L,B=function(){Le.postMessage(null)}}else B=function(){Q(L,0)};function pt(J,ue){x=Q(function(){J(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var ye=S;S=ue;try{return J()}finally{S=ye}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ye=S;S=J;try{return ue()}finally{S=ye}},r.unstable_scheduleCallback=function(J,ue,ye){var Pe=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Pe+ye:Pe):ye=Pe,J){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ye+He,J={id:y++,callback:ue,priorityLevel:J,startTime:ye,expirationTime:He,sortIndex:-1},ye>Pe?(J.sortIndex=ye,e(g,J),t(d)===null&&J===t(g)&&(P?(Y(x),x=-1):P=!0,pt(j,ye-Pe))):(J.sortIndex=He,e(d,J),R||I||(R=!0,se||(se=!0,B()))),J},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(J){var ue=S;return function(){var ye=S;S=ue;try{return J.apply(this,arguments)}finally{S=ye}}}})(Sp)),Sp}var wb;function ZC(){return wb||(wb=1,bp.exports=JC()),bp.exports}var wp={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function ex(){if(Ab)return nn;Ab=1;var r=Md();function e(d){var g="https://react.dev/errors/"+d;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:g,implementation:y}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,g){if(d==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(d,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(d,g,null,y)},nn.flushSync=function(d){var g=u.T,y=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=g,i.p=y,i.d.f()}},nn.preconnect=function(d,g){typeof d=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(d,g))},nn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},nn.preinit=function(d,g){if(typeof d=="string"&&g&&typeof g.as=="string"){var y=g.as,v=h(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(d,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:I}):y==="script"&&i.d.X(d,{crossOrigin:v,integrity:S,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},nn.preinitModule=function(d,g){if(typeof d=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(d)},nn.preload=function(d,g){if(typeof d=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=h(y,g.crossOrigin);i.d.L(d,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},nn.preloadModule=function(d,g){if(typeof d=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(d,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(d)},nn.requestFormReset=function(d){i.d.r(d)},nn.unstable_batchedUpdates=function(d,g){return d(g)},nn.useFormState=function(d,g,y){return u.H.useFormState(d,g,y)},nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var Ib;function tx(){if(Ib)return wp.exports;Ib=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wp.exports=ex(),wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function nx(){if(Rb)return qu;Rb=1;var r=ZC(),e=Md(),t=tx();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return d(m),n;if(p===c)return d(m),s;p=p.sibling}throw Error(i(188))}if(o.return!==c.return)o=m,c=p;else{for(var E=!1,w=m.child;w;){if(w===o){E=!0,o=m,c=p;break}if(w===c){E=!0,c=m,o=p;break}w=w.sibling}if(!E){for(w=p.child;w;){if(w===o){E=!0,o=p,c=m;break}if(w===c){E=!0,c=p,o=m;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Q:return"Profiler";case V:return"StrictMode";case j:return"Suspense";case se:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case te:return n.displayName||"Context";case Y:return(n._context.displayName||"Context")+".Consumer";case ae:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return s=n.displayName||null,s!==null?s:Le(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return Le(n(s))}catch{}}return null}var pt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function k(n){return{current:n}}function ne(n){0>He||(n.current=Pe[He],Pe[He]=null,He--)}function he(n,s){He++,Pe[He]=n.current,n.current=s}var de=k(null),Se=k(null),Ne=k(null),Fe=k(null);function jt(n,s){switch(he(Ne,s),he(Se,n),he(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?FT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=FT(s),n=qT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(de),he(de,n)}function ut(){ne(de),ne(Se),ne(Ne)}function Hs(n){n.memoizedState!==null&&he(Fe,n);var s=de.current,o=qT(s,n.type);s!==o&&(he(Se,n),he(de,o))}function to(n){Se.current===n&&(ne(de),ne(Se)),Fe.current===n&&(ne(Fe),Uu._currentValue=ye)}var no,io;function Ei(n){if(no===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);no=s&&s[1]||"",io=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+no+n+io}var Ul=!1;function Gs(n,s){if(!n||Ul)return"";Ul=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(W){var $=W}Reflect.construct(n,[],re)}else{try{re.call()}catch(W){$=W}n.call(re.prototype)}}else{try{throw Error()}catch(W){$=W}(re=n())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],w=p[1];if(E&&w){var O=E.split(`
`),K=w.split(`
`);for(m=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(c===O.length||m===K.length)for(c=O.length-1,m=K.length-1;1<=c&&0<=m&&O[c]!==K[m];)m--;for(;1<=c&&0<=m;c--,m--)if(O[c]!==K[m]){if(c!==1||m!==1)do if(c--,m--,0>m||O[c]!==K[m]){var ee=`
`+O[c].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=c&&0<=m);break}}}finally{Ul=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ei(o):""}function jl(n,s){switch(n.tag){case 26:case 27:case 5:return Ei(n.type);case 16:return Ei("Lazy");case 13:return n.child!==s&&s!==null?Ei("Suspense Fallback"):Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Gs(n.type,!1);case 11:return Gs(n.type.render,!1);case 1:return Gs(n.type,!0);case 31:return Ei("Activity");default:return""}}function zl(n){try{var s="",o=null;do s+=jl(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var It=Object.prototype.hasOwnProperty,zt=r.unstable_scheduleCallback,jr=r.unstable_cancelCallback,Tm=r.unstable_shouldYield,Wc=r.unstable_requestPaint,un=r.unstable_now,Ks=r.unstable_getCurrentPriorityLevel,Bl=r.unstable_ImmediatePriority,Fl=r.unstable_UserBlockingPriority,zr=r.unstable_NormalPriority,bm=r.unstable_LowPriority,Jc=r.unstable_IdlePriority,Zc=r.log,eh=r.unstable_setDisableYieldValue,ti=null,Qt=null;function kn(n){if(typeof Zc=="function"&&eh(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(ti,n)}catch{}}var Tt=Math.clz32?Math.clz32:nh,th=Math.log,ro=Math.LN2;function nh(n){return n>>>=0,n===0?32:31-(th(n)/ro|0)|0}var Ti=256,$s=262144,Rt=4194304;function bi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Si(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var w=c&134217727;return w!==0?(c=w&~p,c!==0?m=bi(c):(E&=w,E!==0?m=bi(E):o||(o=w&~n,o!==0&&(m=bi(o))))):(w=c&~p,w!==0?m=bi(w):E!==0?m=bi(E):o||(o=c&~n,o!==0&&(m=bi(o)))),m===0?0:s!==0&&s!==m&&(s&p)===0&&(p=m&-m,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:m}function ni(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Sm(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(){var n=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),n}function wi(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Qs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function wm(n,s,o,c,m,p){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,O=n.expirationTimes,K=n.hiddenUpdates;for(o=E&~o;0<o;){var ee=31-Tt(o),re=1<<ee;w[ee]=0,O[ee]=-1;var $=K[ee];if($!==null)for(K[ee]=null,ee=0;ee<$.length;ee++){var W=$[ee];W!==null&&(W.lane&=-536870913)}o&=~re}c!==0&&Ys(n,c,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~s))}function Ys(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Tt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function ql(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Tt(o),m=1<<c;m&s|n[c]&s&&(n[c]|=s),o&=~m}}function Hl(n,s){var o=s&-s;return o=(o&42)!==0?1:Xs(o),(o&(n.suspendedLanes|s))!==0?0:o}function Xs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function rh(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:fb(n.type))}function ii(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var ri=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ri,Ht="__reactProps$"+ri,Ai="__reactContainer$"+ri,so="__reactEvents$"+ri,Am="__reactListeners$"+ri,sh="__reactHandles$"+ri,ah="__reactResources$"+ri,Ii="__reactMarker$"+ri;function ao(n){delete n[Ct],delete n[Ht],delete n[so],delete n[Am],delete n[sh]}function Ri(n){var s=n[Ct];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ai]||o[Ct]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=XT(n);n!==null;){if(o=n[Ct])return o;n=XT(n)}return s}n=o,o=n.parentNode}return null}function Ln(n){if(n=n[Ct]||n[Ai]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Sn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Ci(n){var s=n[ah];return s||(s=n[ah]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[Ii]=!0}var Gl=new Set,Kl={};function xi(n,s){Ni(n,s),Ni(n+"Capture",s)}function Ni(n,s){for(Kl[n]=s,n=0;n<s.length;n++)Gl.add(s[n])}var $l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Yl={};function oh(n){return It.call(Yl,n)?!0:It.call(Ql,n)?!1:$l.test(n)?Yl[n]=!0:(Ql[n]=!0,!1)}function oo(n,s,o){if(oh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function wn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Nt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Br(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xl(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(E){o=""+E,p.call(this,E)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Xe(n){if(!n._valueTracker){var s=Br(n)?"checked":"value";n._valueTracker=Xl(n,s,""+n[s])}}function Ws(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Br(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function Di(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Js=/[\n"\\]/g;function mn(n){return n.replace(Js,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function lo(n,s,o,c,m,p,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Gt(s)):n.value!==""+Gt(s)&&(n.value=""+Gt(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Wl(n,E,Gt(s)):o!=null?Wl(n,E,Gt(o)):c!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Gt(w):n.removeAttribute("name")}function lh(n,s,o,c,m,p,E,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Xe(n);return}o=o!=null?""+Gt(o):"",s=s!=null?""+Gt(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=w?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Xe(n)}function Wl(n,s,o){s==="number"&&Di(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Fr(n,s,o,c){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Gt(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function uh(n,s,o){if(s!=null&&(s=""+Gt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Gt(o):""}function qr(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(pt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Gt(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Xe(n)}function gn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ch=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jl(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||ch.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Zl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&o[m]!==c&&Jl(n,m,c)}else for(var p in s)s.hasOwnProperty(p)&&Jl(n,p,s[p])}function uo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function co(n){return Hr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function si(){}var eu=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gr=null,Oi=null;function Zs(n){var s=Ln(n);if(s&&(n=s.stateNode)){var o=n[Ht]||null;e:switch(n=s.stateNode,s.type){case"input":if(lo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var m=c[Ht]||null;if(!m)throw Error(i(90));lo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Ws(c)}break e;case"textarea":uh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Fr(n,!!o.multiple,s,!1)}}}var ho=!1;function Kr(n,s,o){if(ho)return n(s,o);ho=!0;try{var c=n(s);return c}finally{if(ho=!1,(Gr!==null||Oi!==null)&&(sf(),Gr&&(s=Gr,n=Oi,Oi=Gr=null,Zs(s),n)))for(s=0;s<n.length;s++)Zs(n[s])}}function ai(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Ht]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(Un)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){ea=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{ea=!1}var Pi=null,tu=null,ta=null;function nu(){if(ta)return ta;var n,s=tu,o=s.length,c,m="value"in Pi?Pi.value:Pi.textContent,p=m.length;for(n=0;n<o&&s[n]===m[n];n++);var E=o-n;for(c=1;c<=E&&s[o-c]===m[p-c];c++);return ta=m.slice(n,1<c?1-c:void 0)}function na(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ir(){return!0}function oi(){return!1}function Yt(n){function s(o,c,m,p,E){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ir:oi,this.isPropagationStopped=oi,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Yt(rr),$r=v({},rr,{view:0,detail:0}),iu=Yt($r),Qr,fo,ki,mo=v({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ki&&(ki&&n.type==="mousemove"?(Qr=n.screenX-ki.screenX,fo=n.screenY-ki.screenY):fo=Qr=0,ki=n),Qr)},movementY:function(n){return"movementY"in n?n.movementY:fo}}),ru=Yt(mo),ia=v({},mo,{dataTransfer:0}),fh=Yt(ia),dh=v({},$r,{relatedTarget:0}),ra=Yt(dh),su=v({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=Yt(su),go=v({},rr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gh=Yt(go),ph=v({},rr,{data:0}),Li=Yt(ph),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_h={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=vh[n])?!!s[n]:!1}function Yr(){return Eh}var cn=v({},$r,{key:function(n){if(n.key){var s=yh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=na(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_h[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(n){return n.type==="keypress"?na(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?na(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Th=Yt(cn),bh=v({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sr=Yt(bh),f=v({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),_=Yt(f),T=v({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Yt(T),H=v({},mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Yt(H),ce=v({},rr,{newState:0,oldState:0}),Ce=Yt(ce),bt=[9,13,27,32],Qe=Un&&"CompositionEvent"in window,ct=null;Un&&"documentMode"in document&&(ct=document.documentMode);var jn=Un&&"TextEvent"in window&&!ct,Mi=Un&&(!Qe||ct&&8<ct&&11>=ct),li=" ",ui=!1;function sa(n,s){switch(n){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function po(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yo=!1;function _1(n,s){switch(n){case"compositionend":return po(s);case"keypress":return s.which!==32?null:(ui=!0,li);case"textInput":return n=s.data,n===li&&ui?null:n;default:return null}}function v1(n,s){if(yo)return n==="compositionend"||!Qe&&sa(n,s)?(n=nu(),ta=tu=Pi=null,yo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mi&&s.locale!=="ko"?null:s.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!E1[n.type]:s==="textarea"}function ev(n,s,o,c){Gr?Oi?Oi.push(c):Oi=[c]:Gr=c,s=ff(s,"onChange"),0<s.length&&(o=new Vi("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var au=null,ou=null;function T1(n){LT(n,0)}function Sh(n){var s=Sn(n);if(Ws(s))return n}function tv(n,s){if(n==="change")return s}var nv=!1;if(Un){var Im;if(Un){var Rm="oninput"in document;if(!Rm){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),Rm=typeof iv.oninput=="function"}Im=Rm}else Im=!1;nv=Im&&(!document.documentMode||9<document.documentMode)}function rv(){au&&(au.detachEvent("onpropertychange",sv),ou=au=null)}function sv(n){if(n.propertyName==="value"&&Sh(ou)){var s=[];ev(s,ou,n,Mn(n)),Kr(T1,s)}}function b1(n,s,o){n==="focusin"?(rv(),au=s,ou=o,au.attachEvent("onpropertychange",sv)):n==="focusout"&&rv()}function S1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Sh(ou)}function w1(n,s){if(n==="click")return Sh(s)}function A1(n,s){if(n==="input"||n==="change")return Sh(s)}function I1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var An=typeof Object.is=="function"?Object.is:I1;function lu(n,s){if(An(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!It.call(s,m)||!An(n[m],s[m]))return!1}return!0}function av(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ov(n,s){var o=av(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=av(o)}}function lv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?lv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function uv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Di(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Di(n.document)}return s}function Cm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var R1=Un&&"documentMode"in document&&11>=document.documentMode,_o=null,xm=null,uu=null,Nm=!1;function cv(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Nm||_o==null||_o!==Di(c)||(c=_o,"selectionStart"in c&&Cm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),uu&&lu(uu,c)||(uu=c,c=ff(xm,"onSelect"),0<c.length&&(s=new Vi("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=_o)))}function aa(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var vo={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},Dm={},hv={};Un&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function oa(n){if(Dm[n])return Dm[n];if(!vo[n])return n;var s=vo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in hv)return Dm[n]=s[o];return n}var fv=oa("animationend"),dv=oa("animationiteration"),mv=oa("animationstart"),C1=oa("transitionrun"),x1=oa("transitionstart"),N1=oa("transitioncancel"),gv=oa("transitionend"),pv=new Map,Om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Om.push("scrollEnd");function ci(n,s){pv.set(n,s),xi(s,[n])}var wh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Eo=0,Pm=0;function Ah(){for(var n=Eo,s=Pm=Eo=0;s<n;){var o=zn[s];zn[s++]=null;var c=zn[s];zn[s++]=null;var m=zn[s];zn[s++]=null;var p=zn[s];if(zn[s++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}p!==0&&yv(o,m,p)}}function Ih(n,s,o,c){zn[Eo++]=n,zn[Eo++]=s,zn[Eo++]=o,zn[Eo++]=c,Pm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Vm(n,s,o,c){return Ih(n,s,o,c),Rh(n)}function la(n,s){return Ih(n,null,null,s),Rh(n)}function yv(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&s!==null&&(m=31-Tt(o),n=p.hiddenUpdates,c=n[m],c===null?n[m]=[s]:c.push(s),s.lane=o|536870912),p):null}function Rh(n){if(50<Du)throw Du=0,qg=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var To={};function D1(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,s,o,c){return new D1(n,s,o,c)}function km(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ar(n,s){var o=n.alternate;return o===null?(o=In(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function _v(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ch(n,s,o,c,m,p){var E=0;if(c=n,typeof n=="function")km(n)&&(E=1);else if(typeof n=="string")E=LC(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=In(31,o,s,m),n.elementType=N,n.lanes=p,n;case P:return ua(o.children,m,p,s);case V:E=8,m|=24;break;case Q:return n=In(12,o,s,m|2),n.elementType=Q,n.lanes=p,n;case j:return n=In(13,o,s,m),n.elementType=j,n.lanes=p,n;case se:return n=In(19,o,s,m),n.elementType=se,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:E=10;break e;case Y:E=9;break e;case ae:E=11;break e;case x:E=14;break e;case C:E=16,c=null;break e}E=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=In(E,o,s,m),s.elementType=n,s.type=c,s.lanes=p,s}function ua(n,s,o,c){return n=In(7,n,c,s),n.lanes=o,n}function Lm(n,s,o){return n=In(6,n,null,s),n.lanes=o,n}function vv(n){var s=In(18,null,null,0);return s.stateNode=n,s}function Mm(n,s,o){return s=In(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ev=new WeakMap;function Bn(n,s){if(typeof n=="object"&&n!==null){var o=Ev.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zl(s)},Ev.set(n,s),s)}return{value:n,source:s,stack:zl(s)}}var bo=[],So=0,xh=null,cu=0,Fn=[],qn=0,Xr=null,Ui=1,ji="";function or(n,s){bo[So++]=cu,bo[So++]=xh,xh=n,cu=s}function Tv(n,s,o){Fn[qn++]=Ui,Fn[qn++]=ji,Fn[qn++]=Xr,Xr=n;var c=Ui;n=ji;var m=32-Tt(c)-1;c&=~(1<<m),o+=1;var p=32-Tt(s)+m;if(30<p){var E=m-m%5;p=(c&(1<<E)-1).toString(32),c>>=E,m-=E,Ui=1<<32-Tt(s)+m|o<<m|c,ji=p+n}else Ui=1<<p|o<<m|c,ji=n}function Um(n){n.return!==null&&(or(n,1),Tv(n,1,0))}function jm(n){for(;n===xh;)xh=bo[--So],bo[So]=null,cu=bo[--So],bo[So]=null;for(;n===Xr;)Xr=Fn[--qn],Fn[qn]=null,ji=Fn[--qn],Fn[qn]=null,Ui=Fn[--qn],Fn[qn]=null}function bv(n,s){Fn[qn++]=Ui,Fn[qn++]=ji,Fn[qn++]=Xr,Ui=s.id,ji=s.overflow,Xr=n}var Xt=null,ot=null,Be=!1,Wr=null,Hn=!1,zm=Error(i(519));function Jr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hu(Bn(s,n)),zm}function Sv(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Ct]=n,s[Ht]=c,o){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(o=0;o<Pu.length;o++)ke(Pu[o],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),lh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),qr(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||zT(s.textContent,o)?(c.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),c.onScroll!=null&&ke("scroll",s),c.onScrollEnd!=null&&ke("scrollend",s),c.onClick!=null&&(s.onclick=si),s=!0):s=!1,s||Jr(n,!0)}function wv(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Xt=Xt.return}}function wo(n){if(n!==Xt)return!1;if(!Be)return wv(n),Be=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||rp(n.type,n.memoizedProps)),o=!o),o&&ot&&Jr(n),wv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ot=YT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ot=YT(n)}else s===27?(s=ot,fs(n.type)?(n=up,up=null,ot=n):ot=s):ot=Xt?Kn(n.stateNode.nextSibling):null;return!0}function ca(){ot=Xt=null,Be=!1}function Bm(){var n=Wr;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Wr=null),n}function hu(n){Wr===null?Wr=[n]:Wr.push(n)}var Fm=k(null),ha=null,lr=null;function Zr(n,s,o){he(Fm,s._currentValue),s._currentValue=o}function ur(n){n._currentValue=Fm.current,ne(Fm)}function qm(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function Hm(n,s,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var E=m.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=m;for(var O=0;O<s.length;O++)if(w.context===s[O]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),qm(p.return,o,n),c||(E=null);break e}p=w.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(i(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),qm(E,o,n),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===n){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function Ao(n,s,o,c){n=null;for(var m=s,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=m.type;An(m.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(m===Fe.current){if(E=m.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Uu):n=[Uu])}m=m.return}n!==null&&Hm(s,n,o,c),s.flags|=262144}function Nh(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function fa(n){ha=n,lr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return Av(ha,n)}function Dh(n,s){return ha===null&&fa(n),Av(n,s)}function Av(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},lr===null){if(n===null)throw Error(i(308));lr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else lr=lr.next=s;return o}var O1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},P1=r.unstable_scheduleCallback,V1=r.unstable_NormalPriority,Dt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gm(){return{controller:new O1,data:new Map,refCount:0}}function fu(n){n.refCount--,n.refCount===0&&P1(V1,function(){n.controller.abort()})}var du=null,Km=0,Io=0,Ro=null;function k1(n,s){if(du===null){var o=du=[];Km=0,Io=Yg(),Ro={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Km++,s.then(Iv,Iv),s}function Iv(){if(--Km===0&&du!==null){Ro!==null&&(Ro.status="fulfilled");var n=du;du=null,Io=0,Ro=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function L1(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Rv=J.S;J.S=function(n,s){cT=un(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&k1(n,s),Rv!==null&&Rv(n,s)};var da=k(null);function $m(){var n=da.current;return n!==null?n:at.pooledCache}function Oh(n,s){s===null?he(da,da.current):he(da,s.pool)}function Cv(){var n=$m();return n===null?null:{parent:Dt._currentValue,pool:n}}var Co=Error(i(460)),Qm=Error(i(474)),Ph=Error(i(542)),Vh={then:function(){}};function xv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Nv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(si,si),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ov(n),n;default:if(typeof s.status=="string")s.then(si,si);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ov(n),n}throw ga=s,Co}}function ma(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ga=o,Co):o}}var ga=null;function Dv(){if(ga===null)throw Error(i(459));var n=ga;return ga=null,n}function Ov(n){if(n===Co||n===Ph)throw Error(i(483))}var xo=null,mu=0;function kh(n){var s=mu;return mu+=1,xo===null&&(xo=[]),Nv(xo,n,s)}function gu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Lh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Pv(n){function s(z,U){if(n){var G=z.deletions;G===null?(z.deletions=[U],z.flags|=16):G.push(U)}}function o(z,U){if(!n)return null;for(;U!==null;)s(z,U),U=U.sibling;return null}function c(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function m(z,U){return z=ar(z,U),z.index=0,z.sibling=null,z}function p(z,U,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<U?(z.flags|=67108866,U):G):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function E(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,U,G,ie){return U===null||U.tag!==6?(U=Lm(G,z.mode,ie),U.return=z,U):(U=m(U,G),U.return=z,U)}function O(z,U,G,ie){var ve=G.type;return ve===P?ee(z,U,G.props.children,ie,G.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===C&&ma(ve)===U.type)?(U=m(U,G.props),gu(U,G),U.return=z,U):(U=Ch(G.type,G.key,G.props,null,z.mode,ie),gu(U,G),U.return=z,U)}function K(z,U,G,ie){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Mm(G,z.mode,ie),U.return=z,U):(U=m(U,G.children||[]),U.return=z,U)}function ee(z,U,G,ie,ve){return U===null||U.tag!==7?(U=ua(G,z.mode,ie,ve),U.return=z,U):(U=m(U,G),U.return=z,U)}function re(z,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Lm(""+U,z.mode,G),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return G=Ch(U.type,U.key,U.props,null,z.mode,G),gu(G,U),G.return=z,G;case R:return U=Mm(U,z.mode,G),U.return=z,U;case C:return U=ma(U),re(z,U,G)}if(pt(U)||B(U))return U=ua(U,z.mode,G,null),U.return=z,U;if(typeof U.then=="function")return re(z,kh(U),G);if(U.$$typeof===te)return re(z,Dh(z,U),G);Lh(z,U)}return null}function $(z,U,G,ie){var ve=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ve!==null?null:w(z,U,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return G.key===ve?O(z,U,G,ie):null;case R:return G.key===ve?K(z,U,G,ie):null;case C:return G=ma(G),$(z,U,G,ie)}if(pt(G)||B(G))return ve!==null?null:ee(z,U,G,ie,null);if(typeof G.then=="function")return $(z,U,kh(G),ie);if(G.$$typeof===te)return $(z,U,Dh(z,G),ie);Lh(z,G)}return null}function W(z,U,G,ie,ve){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get(G)||null,w(U,z,""+ie,ve);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:return z=z.get(ie.key===null?G:ie.key)||null,O(U,z,ie,ve);case R:return z=z.get(ie.key===null?G:ie.key)||null,K(U,z,ie,ve);case C:return ie=ma(ie),W(z,U,G,ie,ve)}if(pt(ie)||B(ie))return z=z.get(G)||null,ee(U,z,ie,ve,null);if(typeof ie.then=="function")return W(z,U,G,kh(ie),ve);if(ie.$$typeof===te)return W(z,U,G,Dh(U,ie),ve);Lh(U,ie)}return null}function me(z,U,G,ie){for(var ve=null,Ge=null,pe=U,De=U=0,Ue=null;pe!==null&&De<G.length;De++){pe.index>De?(Ue=pe,pe=null):Ue=pe.sibling;var Ke=$(z,pe,G[De],ie);if(Ke===null){pe===null&&(pe=Ue);break}n&&pe&&Ke.alternate===null&&s(z,pe),U=p(Ke,U,De),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke,pe=Ue}if(De===G.length)return o(z,pe),Be&&or(z,De),ve;if(pe===null){for(;De<G.length;De++)pe=re(z,G[De],ie),pe!==null&&(U=p(pe,U,De),Ge===null?ve=pe:Ge.sibling=pe,Ge=pe);return Be&&or(z,De),ve}for(pe=c(pe);De<G.length;De++)Ue=W(pe,z,De,G[De],ie),Ue!==null&&(n&&Ue.alternate!==null&&pe.delete(Ue.key===null?De:Ue.key),U=p(Ue,U,De),Ge===null?ve=Ue:Ge.sibling=Ue,Ge=Ue);return n&&pe.forEach(function(ys){return s(z,ys)}),Be&&or(z,De),ve}function Te(z,U,G,ie){if(G==null)throw Error(i(151));for(var ve=null,Ge=null,pe=U,De=U=0,Ue=null,Ke=G.next();pe!==null&&!Ke.done;De++,Ke=G.next()){pe.index>De?(Ue=pe,pe=null):Ue=pe.sibling;var ys=$(z,pe,Ke.value,ie);if(ys===null){pe===null&&(pe=Ue);break}n&&pe&&ys.alternate===null&&s(z,pe),U=p(ys,U,De),Ge===null?ve=ys:Ge.sibling=ys,Ge=ys,pe=Ue}if(Ke.done)return o(z,pe),Be&&or(z,De),ve;if(pe===null){for(;!Ke.done;De++,Ke=G.next())Ke=re(z,Ke.value,ie),Ke!==null&&(U=p(Ke,U,De),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return Be&&or(z,De),ve}for(pe=c(pe);!Ke.done;De++,Ke=G.next())Ke=W(pe,z,De,Ke.value,ie),Ke!==null&&(n&&Ke.alternate!==null&&pe.delete(Ke.key===null?De:Ke.key),U=p(Ke,U,De),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return n&&pe.forEach(function($C){return s(z,$C)}),Be&&or(z,De),ve}function st(z,U,G,ie){if(typeof G=="object"&&G!==null&&G.type===P&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case I:e:{for(var ve=G.key;U!==null;){if(U.key===ve){if(ve=G.type,ve===P){if(U.tag===7){o(z,U.sibling),ie=m(U,G.props.children),ie.return=z,z=ie;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===C&&ma(ve)===U.type){o(z,U.sibling),ie=m(U,G.props),gu(ie,G),ie.return=z,z=ie;break e}o(z,U);break}else s(z,U);U=U.sibling}G.type===P?(ie=ua(G.props.children,z.mode,ie,G.key),ie.return=z,z=ie):(ie=Ch(G.type,G.key,G.props,null,z.mode,ie),gu(ie,G),ie.return=z,z=ie)}return E(z);case R:e:{for(ve=G.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){o(z,U.sibling),ie=m(U,G.children||[]),ie.return=z,z=ie;break e}else{o(z,U);break}else s(z,U);U=U.sibling}ie=Mm(G,z.mode,ie),ie.return=z,z=ie}return E(z);case C:return G=ma(G),st(z,U,G,ie)}if(pt(G))return me(z,U,G,ie);if(B(G)){if(ve=B(G),typeof ve!="function")throw Error(i(150));return G=ve.call(G),Te(z,U,G,ie)}if(typeof G.then=="function")return st(z,U,kh(G),ie);if(G.$$typeof===te)return st(z,U,Dh(z,G),ie);Lh(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(o(z,U.sibling),ie=m(U,G),ie.return=z,z=ie):(o(z,U),ie=Lm(G,z.mode,ie),ie.return=z,z=ie),E(z)):o(z,U)}return function(z,U,G,ie){try{mu=0;var ve=st(z,U,G,ie);return xo=null,ve}catch(pe){if(pe===Co||pe===Ph)throw pe;var Ge=In(29,pe,null,z.mode);return Ge.lanes=ie,Ge.return=z,Ge}finally{}}}var pa=Pv(!0),Vv=Pv(!1),es=!1;function Ym(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ts(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ns(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=Rh(n),yv(n,null,o),s}return Ih(n,c,s,o),Rh(n)}function pu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,ql(n,o)}}function Wm(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?m=p=s:p=p.next=s}else m=p=s;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Jm=!1;function yu(){if(Jm){var n=Ro;if(n!==null)throw n}}function _u(n,s,o,c){Jm=!1;var m=n.updateQueue;es=!1;var p=m.firstBaseUpdate,E=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var O=w,K=O.next;O.next=null,E===null?p=K:E.next=K,E=O;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==E&&(w===null?ee.firstBaseUpdate=K:w.next=K,ee.lastBaseUpdate=O))}if(p!==null){var re=m.baseState;E=0,ee=K=O=null,w=p;do{var $=w.lane&-536870913,W=$!==w.lane;if(W?(Me&$)===$:(c&$)===$){$!==0&&$===Io&&(Jm=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=n,Te=w;$=s;var st=o;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){re=me.call(st,re,$);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,$=typeof me=="function"?me.call(st,re,$):me,$==null)break e;re=v({},re,$);break e;case 2:es=!0}}$=w.callback,$!==null&&(n.flags|=64,W&&(n.flags|=8192),W=m.callbacks,W===null?m.callbacks=[$]:W.push($))}else W={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(K=ee=W,O=re):ee=ee.next=W,E|=$;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;W=w,w=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);ee===null&&(O=re),m.baseState=O,m.firstBaseUpdate=K,m.lastBaseUpdate=ee,p===null&&(m.shared.lanes=0),os|=E,n.lanes=E,n.memoizedState=re}}function kv(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Lv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)kv(o[n],s)}var No=k(null),Mh=k(0);function Mv(n,s){n=_r,he(Mh,n),he(No,s),_r=n|s.baseLanes}function Zm(){he(Mh,_r),he(No,No.current)}function eg(){_r=Mh.current,ne(No),ne(Mh)}var Rn=k(null),Gn=null;function is(n){var s=n.alternate;he(St,St.current&1),he(Rn,n),Gn===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(Gn=n)}function tg(n){he(St,St.current),he(Rn,n),Gn===null&&(Gn=n)}function Uv(n){n.tag===22?(he(St,St.current),he(Rn,n),Gn===null&&(Gn=n)):rs()}function rs(){he(St,St.current),he(Rn,Rn.current)}function Cn(n){ne(Rn),Gn===n&&(Gn=null),ne(St)}var St=k(0);function Uh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||op(o)||lp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cr=0,xe=null,it=null,Ot=null,jh=!1,Do=!1,ya=!1,zh=0,vu=0,Oo=null,M1=0;function yt(){throw Error(i(321))}function ng(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!An(n[o],s[o]))return!1;return!0}function ig(n,s,o,c,m,p){return cr=p,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?TE:_g,ya=!1,p=o(c,m),ya=!1,Do&&(p=zv(s,o,c,m)),jv(n),p}function jv(n){J.H=bu;var s=it!==null&&it.next!==null;if(cr=0,Ot=it=xe=null,jh=!1,vu=0,Oo=null,s)throw Error(i(300));n===null||Pt||(n=n.dependencies,n!==null&&Nh(n)&&(Pt=!0))}function zv(n,s,o,c){xe=n;var m=0;do{if(Do&&(Oo=null),vu=0,Do=!1,25<=m)throw Error(i(301));if(m+=1,Ot=it=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=bE,p=s(o,c)}while(Do);return p}function U1(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?Eu(s):s,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(xe.flags|=1024),s}function rg(){var n=zh!==0;return zh=0,n}function sg(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function ag(n){if(jh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}jh=!1}cr=0,Ot=it=xe=null,Do=!1,vu=zh=0,Oo=null}function hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?xe.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function wt(){if(it===null){var n=xe.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var s=Ot===null?xe.memoizedState:Ot.next;if(s!==null)Ot=s,it=n;else{if(n===null)throw xe.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ot===null?xe.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function Bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(n){var s=vu;return vu+=1,Oo===null&&(Oo=[]),n=Nv(Oo,n,s),s=xe,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?TE:_g),n}function Fh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Eu(n);if(n.$$typeof===te)return Wt(n)}throw Error(i(438,String(n)))}function og(n){var s=null,o=xe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Bh(),xe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=M;return s.index++,o}function hr(n,s){return typeof s=="function"?s(n):s}function qh(n){var s=wt();return lg(s,it,n)}function lg(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var m=n.baseQueue,p=c.pending;if(p!==null){if(m!==null){var E=m.next;m.next=p.next,p.next=E}s.baseQueue=m=p,c.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{s=m.next;var w=E=null,O=null,K=s,ee=!1;do{var re=K.lane&-536870913;if(re!==K.lane?(Me&re)===re:(cr&re)===re){var $=K.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),re===Io&&(ee=!0);else if((cr&$)===$){K=K.next,$===Io&&(ee=!0);continue}else re={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(w=O=re,E=p):O=O.next=re,xe.lanes|=$,os|=$;re=K.action,ya&&o(p,re),p=K.hasEagerState?K.eagerState:o(p,re)}else $={lane:re,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(w=O=$,E=p):O=O.next=$,xe.lanes|=re,os|=re;K=K.next}while(K!==null&&K!==s);if(O===null?E=p:O.next=w,!An(p,n.memoizedState)&&(Pt=!0,ee&&(o=Ro,o!==null)))throw o;n.memoizedState=p,n.baseState=E,n.baseQueue=O,c.lastRenderedState=p}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ug(n){var s=wt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,p=s.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do p=n(p,E.action),E=E.next;while(E!==m);An(p,s.memoizedState)||(Pt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,c]}function Bv(n,s,o){var c=xe,m=wt(),p=Be;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!An((it||m).memoizedState,o);if(E&&(m.memoizedState=o,Pt=!0),m=m.queue,fg(Hv.bind(null,c,m,n),[n]),m.getSnapshot!==s||E||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,Po(9,{destroy:void 0},qv.bind(null,c,m,o,s),null),at===null)throw Error(i(349));p||(cr&127)!==0||Fv(c,s,o)}return o}function Fv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=xe.updateQueue,s===null?(s=Bh(),xe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function qv(n,s,o,c){s.value=o,s.getSnapshot=c,Gv(s)&&Kv(n)}function Hv(n,s,o){return o(function(){Gv(s)&&Kv(n)})}function Gv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!An(n,o)}catch{return!0}}function Kv(n){var s=la(n,2);s!==null&&En(s,n,2)}function cg(n){var s=hn();if(typeof n=="function"){var o=n;if(n=o(),ya){kn(!0);try{o()}finally{kn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:n},s}function $v(n,s,o,c){return n.baseState=o,lg(n,it,typeof c=="function"?c:hr)}function j1(n,s,o,c,m){if(Kh(n))throw Error(i(485));if(n=s.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};J.T!==null?o(!0):p.isTransition=!1,c(p),o=s.pending,o===null?(p.next=s.pending=p,Qv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Qv(n,s){var o=s.action,c=s.payload,m=n.state;if(s.isTransition){var p=J.T,E={};J.T=E;try{var w=o(m,c),O=J.S;O!==null&&O(E,w),Yv(n,s,w)}catch(K){hg(n,s,K)}finally{p!==null&&E.types!==null&&(p.types=E.types),J.T=p}}else try{p=o(m,c),Yv(n,s,p)}catch(K){hg(n,s,K)}}function Yv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Xv(n,s,c)},function(c){return hg(n,s,c)}):Xv(n,s,o)}function Xv(n,s,o){s.status="fulfilled",s.value=o,Wv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Qv(n,o)))}function hg(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,Wv(s),s=s.next;while(s!==c)}n.action=null}function Wv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Jv(n,s){return s}function Zv(n,s){if(Be){var o=at.formState;if(o!==null){e:{var c=xe;if(Be){if(ot){t:{for(var m=ot,p=Hn;m.nodeType!==8;){if(!p){m=null;break t}if(m=Kn(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){ot=Kn(m.nextSibling),c=m.data==="F!";break e}}Jr(c)}c=!1}c&&(s=o[0])}}return o=hn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jv,lastRenderedState:s},o.queue=c,o=_E.bind(null,xe,c),c.dispatch=o,c=cg(!1),p=yg.bind(null,xe,!1,c.queue),c=hn(),m={state:s,dispatch:null,action:n,pending:null},c.queue=m,o=j1.bind(null,xe,m,p,o),m.dispatch=o,c.memoizedState=n,[s,o,!1]}function eE(n){var s=wt();return tE(s,it,n)}function tE(n,s,o){if(s=lg(n,s,Jv)[0],n=qh(hr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Eu(s)}catch(E){throw E===Co?Ph:E}else c=s;s=wt();var m=s.queue,p=m.dispatch;return o!==s.memoizedState&&(xe.flags|=2048,Po(9,{destroy:void 0},z1.bind(null,m,o),null)),[c,p,n]}function z1(n,s){n.action=s}function nE(n){var s=wt(),o=it;if(o!==null)return tE(s,o,n);wt(),s=s.memoizedState,o=wt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function Po(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Bh(),xe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function iE(){return wt().memoizedState}function Hh(n,s,o,c){var m=hn();xe.flags|=n,m.memoizedState=Po(1|s,{destroy:void 0},o,c===void 0?null:c)}function Gh(n,s,o,c){var m=wt();c=c===void 0?null:c;var p=m.memoizedState.inst;it!==null&&c!==null&&ng(c,it.memoizedState.deps)?m.memoizedState=Po(s,p,o,c):(xe.flags|=n,m.memoizedState=Po(1|s,p,o,c))}function rE(n,s){Hh(8390656,8,n,s)}function fg(n,s){Gh(2048,8,n,s)}function B1(n){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=Bh(),xe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function sE(n){var s=wt().memoizedState;return B1({ref:s,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function aE(n,s){return Gh(4,2,n,s)}function oE(n,s){return Gh(4,4,n,s)}function lE(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function uE(n,s,o){o=o!=null?o.concat([n]):null,Gh(4,4,lE.bind(null,s,n),o)}function dg(){}function cE(n,s){var o=wt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&ng(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function hE(n,s){var o=wt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&ng(s,c[1]))return c[0];if(c=n(),ya){kn(!0);try{n()}finally{kn(!1)}}return o.memoizedState=[c,s],c}function mg(n,s,o){return o===void 0||(cr&1073741824)!==0&&(Me&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=fT(),xe.lanes|=n,os|=n,o)}function fE(n,s,o,c){return An(o,s)?o:No.current!==null?(n=mg(n,o,c),An(n,s)||(Pt=!0),n):(cr&42)===0||(cr&1073741824)!==0&&(Me&261930)===0?(Pt=!0,n.memoizedState=o):(n=fT(),xe.lanes|=n,os|=n,s)}function dE(n,s,o,c,m){var p=ue.p;ue.p=p!==0&&8>p?p:8;var E=J.T,w={};J.T=w,yg(n,!1,s,o);try{var O=m(),K=J.S;if(K!==null&&K(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=L1(O,c);Tu(n,s,ee,Dn(n))}else Tu(n,s,c,Dn(n))}catch(re){Tu(n,s,{then:function(){},status:"rejected",reason:re},Dn())}finally{ue.p=p,E!==null&&w.types!==null&&(E.types=w.types),J.T=E}}function F1(){}function gg(n,s,o,c){if(n.tag!==5)throw Error(i(476));var m=mE(n).queue;dE(n,m,s,ye,o===null?F1:function(){return gE(n),o(c)})}function mE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:ye},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function gE(n){var s=mE(n);s.next===null&&(s=n.alternate.memoizedState),Tu(n,s.next.queue,{},Dn())}function pg(){return Wt(Uu)}function pE(){return wt().memoizedState}function yE(){return wt().memoizedState}function q1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Dn();n=ts(o);var c=ns(s,n,o);c!==null&&(En(c,s,o),pu(c,s,o)),s={cache:Gm()},n.payload=s;return}s=s.return}}function H1(n,s,o){var c=Dn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Kh(n)?vE(s,o):(o=Vm(n,s,o,c),o!==null&&(En(o,n,c),EE(o,s,c)))}function _E(n,s,o){var c=Dn();Tu(n,s,o,c)}function Tu(n,s,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kh(n))vE(s,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,w=p(E,o);if(m.hasEagerState=!0,m.eagerState=w,An(w,E))return Ih(n,s,m,0),at===null&&Ah(),!1}catch{}finally{}if(o=Vm(n,s,m,c),o!==null)return En(o,n,c),EE(o,s,c),!0}return!1}function yg(n,s,o,c){if(c={lane:2,revertLane:Yg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Kh(n)){if(s)throw Error(i(479))}else s=Vm(n,o,c,2),s!==null&&En(s,n,2)}function Kh(n){var s=n.alternate;return n===xe||s!==null&&s===xe}function vE(n,s){Do=jh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function EE(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,ql(n,o)}}var bu={readContext:Wt,use:Fh,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};bu.useEffectEvent=yt;var TE={readContext:Wt,use:Fh,useCallback:function(n,s){return hn().memoizedState=[n,s===void 0?null:s],n},useContext:Wt,useEffect:rE,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Hh(4194308,4,lE.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Hh(4194308,4,n,s)},useInsertionEffect:function(n,s){Hh(4,2,n,s)},useMemo:function(n,s){var o=hn();s=s===void 0?null:s;var c=n();if(ya){kn(!0);try{n()}finally{kn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=hn();if(o!==void 0){var m=o(s);if(ya){kn(!0);try{o(s)}finally{kn(!1)}}}else m=s;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=H1.bind(null,xe,n),[c.memoizedState,n]},useRef:function(n){var s=hn();return n={current:n},s.memoizedState=n},useState:function(n){n=cg(n);var s=n.queue,o=_E.bind(null,xe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:dg,useDeferredValue:function(n,s){var o=hn();return mg(o,n,s)},useTransition:function(){var n=cg(!1);return n=dE.bind(null,xe,n.queue,!0,!1),hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=xe,m=hn();if(Be){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),at===null)throw Error(i(349));(Me&127)!==0||Fv(c,s,o)}m.memoizedState=o;var p={value:o,getSnapshot:s};return m.queue=p,rE(Hv.bind(null,c,p,n),[n]),c.flags|=2048,Po(9,{destroy:void 0},qv.bind(null,c,p,o,s),null),o},useId:function(){var n=hn(),s=at.identifierPrefix;if(Be){var o=ji,c=Ui;o=(c&~(1<<32-Tt(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=zh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=M1++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:pg,useFormState:Zv,useActionState:Zv,useOptimistic:function(n){var s=hn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=yg.bind(null,xe,!0,o),o.dispatch=s,[n,s]},useMemoCache:og,useCacheRefresh:function(){return hn().memoizedState=q1.bind(null,xe)},useEffectEvent:function(n){var s=hn(),o={impl:n};return s.memoizedState=o,function(){if((Ye&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},_g={readContext:Wt,use:Fh,useCallback:cE,useContext:Wt,useEffect:fg,useImperativeHandle:uE,useInsertionEffect:aE,useLayoutEffect:oE,useMemo:hE,useReducer:qh,useRef:iE,useState:function(){return qh(hr)},useDebugValue:dg,useDeferredValue:function(n,s){var o=wt();return fE(o,it.memoizedState,n,s)},useTransition:function(){var n=qh(hr)[0],s=wt().memoizedState;return[typeof n=="boolean"?n:Eu(n),s]},useSyncExternalStore:Bv,useId:pE,useHostTransitionStatus:pg,useFormState:eE,useActionState:eE,useOptimistic:function(n,s){var o=wt();return $v(o,it,n,s)},useMemoCache:og,useCacheRefresh:yE};_g.useEffectEvent=sE;var bE={readContext:Wt,use:Fh,useCallback:cE,useContext:Wt,useEffect:fg,useImperativeHandle:uE,useInsertionEffect:aE,useLayoutEffect:oE,useMemo:hE,useReducer:ug,useRef:iE,useState:function(){return ug(hr)},useDebugValue:dg,useDeferredValue:function(n,s){var o=wt();return it===null?mg(o,n,s):fE(o,it.memoizedState,n,s)},useTransition:function(){var n=ug(hr)[0],s=wt().memoizedState;return[typeof n=="boolean"?n:Eu(n),s]},useSyncExternalStore:Bv,useId:pE,useHostTransitionStatus:pg,useFormState:nE,useActionState:nE,useOptimistic:function(n,s){var o=wt();return it!==null?$v(o,it,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:og,useCacheRefresh:yE};bE.useEffectEvent=sE;function vg(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Eg={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Dn(),m=ts(c);m.payload=s,o!=null&&(m.callback=o),s=ns(n,m,c),s!==null&&(En(s,n,c),pu(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Dn(),m=ts(c);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=ns(n,m,c),s!==null&&(En(s,n,c),pu(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Dn(),c=ts(o);c.tag=2,s!=null&&(c.callback=s),s=ns(n,c,o),s!==null&&(En(s,n,o),pu(s,n,o))}};function SE(n,s,o,c,m,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):s.prototype&&s.prototype.isPureReactComponent?!lu(o,c)||!lu(m,p):!0}function wE(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Eg.enqueueReplaceState(s,s.state,null)}function _a(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=v({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function AE(n){wh(n)}function IE(n){console.error(n)}function RE(n){wh(n)}function $h(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function CE(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Tg(n,s,o){return o=ts(o),o.tag=3,o.payload={element:null},o.callback=function(){$h(n,s)},o}function xE(n){return n=ts(n),n.tag=3,n}function NE(n,s,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;n.payload=function(){return m(p)},n.callback=function(){CE(s,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){CE(s,o,c),typeof m!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function G1(n,s,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Ao(s,o,m,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Gn===null?af():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Vh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Kg(n,c,m)),!1;case 22:return o.flags|=65536,c===Vh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Kg(n,c,m)),!1}throw Error(i(435,o.tag))}return Kg(n,c,m),af(),!1}if(Be)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==zm&&(n=Error(i(422),{cause:c}),hu(Bn(n,o)))):(c!==zm&&(s=Error(i(423),{cause:c}),hu(Bn(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Bn(c,o),m=Tg(n.stateNode,c,m),Wm(n,m),_t!==4&&(_t=2)),!1;var p=Error(i(520),{cause:c});if(p=Bn(p,o),Nu===null?Nu=[p]:Nu.push(p),_t!==4&&(_t=2),s===null)return!0;c=Bn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Tg(o.stateNode,c,n),Wm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ls===null||!ls.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=xE(m),NE(m,n,o,c),Wm(o,m),!1}o=o.return}while(o!==null);return!1}var bg=Error(i(461)),Pt=!1;function Jt(n,s,o,c){s.child=n===null?Vv(s,null,o,c):pa(s,n.child,o,c)}function DE(n,s,o,c,m){o=o.render;var p=s.ref;if("ref"in c){var E={};for(var w in c)w!=="ref"&&(E[w]=c[w])}else E=c;return fa(s),c=ig(n,s,o,E,p,m),w=rg(),n!==null&&!Pt?(sg(n,s,m),fr(n,s,m)):(Be&&w&&Um(s),s.flags|=1,Jt(n,s,c,m),s.child)}function OE(n,s,o,c,m){if(n===null){var p=o.type;return typeof p=="function"&&!km(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,PE(n,s,p,c,m)):(n=Ch(o.type,null,c,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!Ng(n,m)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:lu,o(E,c)&&n.ref===s.ref)return fr(n,s,m)}return s.flags|=1,n=ar(p,c),n.ref=s.ref,n.return=s,s.child=n}function PE(n,s,o,c,m){if(n!==null){var p=n.memoizedProps;if(lu(p,c)&&n.ref===s.ref)if(Pt=!1,s.pendingProps=c=p,Ng(n,m))(n.flags&131072)!==0&&(Pt=!0);else return s.lanes=n.lanes,fr(n,s,m)}return Sg(n,s,o,c,m)}function VE(n,s,o,c){var m=c.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=s.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,s.child=null;return kE(n,s,p,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Oh(s,p!==null?p.cachePool:null),p!==null?Mv(s,p):Zm(),Uv(s);else return c=s.lanes=536870912,kE(n,s,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(Oh(s,p.cachePool),Mv(s,p),rs(),s.memoizedState=null):(n!==null&&Oh(s,null),Zm(),rs());return Jt(n,s,m,o),s.child}function Su(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function kE(n,s,o,c,m){var p=$m();return p=p===null?null:{parent:Dt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Oh(s,null),Zm(),Uv(s),n!==null&&Ao(n,s,c,!0),s.childLanes=m,null}function Qh(n,s){return s=Xh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function LE(n,s,o){return pa(s,n.child,null,o),n=Qh(s,s.pendingProps),n.flags|=2,Cn(s),s.memoizedState=null,n}function K1(n,s,o){var c=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Be){if(c.mode==="hidden")return n=Qh(s,c),s.lanes=536870912,Su(null,n);if(tg(s),(n=ot)?(n=QT(n,Hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xr!==null?{id:Ui,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=vv(n),o.return=s,s.child=o,Xt=s,ot=null)):n=null,n===null)throw Jr(s);return s.lanes=536870912,null}return Qh(s,c)}var p=n.memoizedState;if(p!==null){var E=p.dehydrated;if(tg(s),m)if(s.flags&256)s.flags&=-257,s=LE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Pt||Ao(n,s,o,!1),m=(o&n.childLanes)!==0,Pt||m){if(c=at,c!==null&&(E=Hl(c,o),E!==0&&E!==p.retryLane))throw p.retryLane=E,la(n,E),En(c,n,E),bg;af(),s=LE(n,s,o)}else n=p.treeContext,ot=Kn(E.nextSibling),Xt=s,Be=!0,Wr=null,Hn=!1,n!==null&&bv(s,n),s=Qh(s,c),s.flags|=4096;return s}return n=ar(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Yh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Sg(n,s,o,c,m){return fa(s),o=ig(n,s,o,c,void 0,m),c=rg(),n!==null&&!Pt?(sg(n,s,m),fr(n,s,m)):(Be&&c&&Um(s),s.flags|=1,Jt(n,s,o,m),s.child)}function ME(n,s,o,c,m,p){return fa(s),s.updateQueue=null,o=zv(s,c,o,m),jv(n),c=rg(),n!==null&&!Pt?(sg(n,s,p),fr(n,s,p)):(Be&&c&&Um(s),s.flags|=1,Jt(n,s,o,p),s.child)}function UE(n,s,o,c,m){if(fa(s),s.stateNode===null){var p=To,E=o.contextType;typeof E=="object"&&E!==null&&(p=Wt(E)),p=new o(c,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Eg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=c,p.state=s.memoizedState,p.refs={},Ym(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?Wt(E):To,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(vg(s,o,E,c),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Eg.enqueueReplaceState(p,p.state,null),_u(s,c,p,m),yu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){p=s.stateNode;var w=s.memoizedProps,O=_a(o,w);p.props=O;var K=p.context,ee=o.contextType;E=To,typeof ee=="object"&&ee!==null&&(E=Wt(ee));var re=o.getDerivedStateFromProps;ee=typeof re=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||K!==E)&&wE(s,p,c,E),es=!1;var $=s.memoizedState;p.state=$,_u(s,c,p,m),yu(),K=s.memoizedState,w||$!==K||es?(typeof re=="function"&&(vg(s,o,re,c),K=s.memoizedState),(O=es||SE(s,o,O,c,$,K,E))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=K),p.props=c,p.state=K,p.context=E,c=O):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{p=s.stateNode,Xm(n,s),E=s.memoizedProps,ee=_a(o,E),p.props=ee,re=s.pendingProps,$=p.context,K=o.contextType,O=To,typeof K=="object"&&K!==null&&(O=Wt(K)),w=o.getDerivedStateFromProps,(K=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==re||$!==O)&&wE(s,p,c,O),es=!1,$=s.memoizedState,p.state=$,_u(s,c,p,m),yu();var W=s.memoizedState;E!==re||$!==W||es||n!==null&&n.dependencies!==null&&Nh(n.dependencies)?(typeof w=="function"&&(vg(s,o,w,c),W=s.memoizedState),(ee=es||SE(s,o,ee,c,$,W,O)||n!==null&&n.dependencies!==null&&Nh(n.dependencies))?(K||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,O)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),p.props=c,p.state=W,p.context=O,c=ee):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),c=!1)}return p=c,Yh(n,s),c=(s.flags&128)!==0,p||c?(p=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&c?(s.child=pa(s,n.child,null,m),s.child=pa(s,null,o,m)):Jt(n,s,o,m),s.memoizedState=p.state,n=s.child):n=fr(n,s,m),n}function jE(n,s,o,c){return ca(),s.flags|=256,Jt(n,s,o,c),s.child}var wg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ag(n){return{baseLanes:n,cachePool:Cv()}}function Ig(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Nn),n}function zE(n,s,o){var c=s.pendingProps,m=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(St.current&2)!==0),E&&(m=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Be){if(m?is(s):rs(),(n=ot)?(n=QT(n,Hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xr!==null?{id:Ui,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=vv(n),o.return=s,s.child=o,Xt=s,ot=null)):n=null,n===null)throw Jr(s);return lp(n)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,m?(rs(),m=s.mode,w=Xh({mode:"hidden",children:w},m),c=ua(c,m,o,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=Ag(o),c.childLanes=Ig(n,E,o),s.memoizedState=wg,Su(null,c)):(is(s),Rg(s,w))}var O=n.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(p)s.flags&256?(is(s),s.flags&=-257,s=Cg(n,s,o)):s.memoizedState!==null?(rs(),s.child=n.child,s.flags|=128,s=null):(rs(),w=c.fallback,m=s.mode,c=Xh({mode:"visible",children:c.children},m),w=ua(w,m,o,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,pa(s,n.child,null,o),c=s.child,c.memoizedState=Ag(o),c.childLanes=Ig(n,E,o),s.memoizedState=wg,s=Su(null,c));else if(is(s),lp(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var K=E.dgst;E=K,c=Error(i(419)),c.stack="",c.digest=E,hu({value:c,source:null,stack:null}),s=Cg(n,s,o)}else if(Pt||Ao(n,s,o,!1),E=(o&n.childLanes)!==0,Pt||E){if(E=at,E!==null&&(c=Hl(E,o),c!==0&&c!==O.retryLane))throw O.retryLane=c,la(n,c),En(E,n,c),bg;op(w)||af(),s=Cg(n,s,o)}else op(w)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,ot=Kn(w.nextSibling),Xt=s,Be=!0,Wr=null,Hn=!1,n!==null&&bv(s,n),s=Rg(s,c.children),s.flags|=4096);return s}return m?(rs(),w=c.fallback,m=s.mode,O=n.child,K=O.sibling,c=ar(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,K!==null?w=ar(K,w):(w=ua(w,m,o,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,Su(null,c),c=s.child,w=n.child.memoizedState,w===null?w=Ag(o):(m=w.cachePool,m!==null?(O=Dt._currentValue,m=m.parent!==O?{parent:O,pool:O}:m):m=Cv(),w={baseLanes:w.baseLanes|o,cachePool:m}),c.memoizedState=w,c.childLanes=Ig(n,E,o),s.memoizedState=wg,Su(n.child,c)):(is(s),o=n.child,n=o.sibling,o=ar(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function Rg(n,s){return s=Xh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Xh(n,s){return n=In(22,n,null,s),n.lanes=0,n}function Cg(n,s,o){return pa(s,n.child,null,o),n=Rg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function BE(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),qm(n.return,s,o)}function xg(n,s,o,c,m,p){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:p}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=o,E.tailMode=m,E.treeForkCount=p)}function FE(n,s,o){var c=s.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var E=St.current,w=(E&2)!==0;if(w?(E=E&1|2,s.flags|=128):E&=1,he(St,E),Jt(n,s,c,o),c=Be?cu:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&BE(n,o,s);else if(n.tag===19)BE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&Uh(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),xg(s,!1,m,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Uh(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}xg(s,!0,o,null,p,c);break;case"together":xg(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function fr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),os|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Ao(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ar(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ar(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Ng(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Nh(n)))}function $1(n,s,o){switch(s.tag){case 3:jt(s,s.stateNode.containerInfo),Zr(s,Dt,n.memoizedState.cache),ca();break;case 27:case 5:Hs(s);break;case 4:jt(s,s.stateNode.containerInfo);break;case 10:Zr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,tg(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(is(s),s.flags|=128,null):(o&s.child.childLanes)!==0?zE(n,s,o):(is(s),n=fr(n,s,o),n!==null?n.sibling:null);is(s);break;case 19:var m=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Ao(n,s,o,!1),c=(o&s.childLanes)!==0),m){if(c)return FE(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),he(St,St.current),c)break;return null;case 22:return s.lanes=0,VE(n,s,o,s.pendingProps);case 24:Zr(s,Dt,n.memoizedState.cache)}return fr(n,s,o)}function qE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Pt=!0;else{if(!Ng(n,o)&&(s.flags&128)===0)return Pt=!1,$1(n,s,o);Pt=(n.flags&131072)!==0}else Pt=!1,Be&&(s.flags&1048576)!==0&&Tv(s,cu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=ma(s.elementType),s.type=n,typeof n=="function")km(n)?(c=_a(n,c),s.tag=1,s=UE(null,s,n,c,o)):(s.tag=0,s=Sg(null,s,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===ae){s.tag=11,s=DE(null,s,n,c,o);break e}else if(m===x){s.tag=14,s=OE(null,s,n,c,o);break e}}throw s=Le(n)||n,Error(i(306,s,""))}}return s;case 0:return Sg(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,m=_a(c,s.pendingProps),UE(n,s,c,m,o);case 3:e:{if(jt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var p=s.memoizedState;m=p.element,Xm(n,s),_u(s,c,null,o);var E=s.memoizedState;if(c=E.cache,Zr(s,Dt,c),c!==p.cache&&Hm(s,[Dt],o,!0),yu(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=jE(n,s,c,o);break e}else if(c!==m){m=Bn(Error(i(424)),s),hu(m),s=jE(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ot=Kn(n.firstChild),Xt=s,Be=!0,Wr=null,Hn=!0,o=Vv(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ca(),c===m){s=fr(n,s,o);break e}Jt(n,s,c,o)}s=s.child}return s;case 26:return Yh(n,s),n===null?(o=eb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Be||(o=s.type,n=s.pendingProps,c=df(Ne.current).createElement(o),c[Ct]=s,c[Ht]=n,Zt(c,o,n),xt(c),s.stateNode=c):s.memoizedState=eb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Hs(s),n===null&&Be&&(c=s.stateNode=WT(s.type,s.pendingProps,Ne.current),Xt=s,Hn=!0,m=ot,fs(s.type)?(up=m,ot=Kn(c.firstChild)):ot=m),Jt(n,s,s.pendingProps.children,o),Yh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Be&&((m=c=ot)&&(c=SC(c,s.type,s.pendingProps,Hn),c!==null?(s.stateNode=c,Xt=s,ot=Kn(c.firstChild),Hn=!1,m=!0):m=!1),m||Jr(s)),Hs(s),m=s.type,p=s.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,rp(m,p)?c=null:E!==null&&rp(m,E)&&(s.flags|=32),s.memoizedState!==null&&(m=ig(n,s,U1,null,null,o),Uu._currentValue=m),Yh(n,s),Jt(n,s,c,o),s.child;case 6:return n===null&&Be&&((n=o=ot)&&(o=wC(o,s.pendingProps,Hn),o!==null?(s.stateNode=o,Xt=s,ot=null,n=!0):n=!1),n||Jr(s)),null;case 13:return zE(n,s,o);case 4:return jt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=pa(s,null,c,o):Jt(n,s,c,o),s.child;case 11:return DE(n,s,s.type,s.pendingProps,o);case 7:return Jt(n,s,s.pendingProps,o),s.child;case 8:return Jt(n,s,s.pendingProps.children,o),s.child;case 12:return Jt(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Zr(s,s.type,c.value),Jt(n,s,c.children,o),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,fa(s),m=Wt(m),c=c(m),s.flags|=1,Jt(n,s,c,o),s.child;case 14:return OE(n,s,s.type,s.pendingProps,o);case 15:return PE(n,s,s.type,s.pendingProps,o);case 19:return FE(n,s,o);case 31:return K1(n,s,o);case 22:return VE(n,s,o,s.pendingProps);case 24:return fa(s),c=Wt(Dt),n===null?(m=$m(),m===null&&(m=at,p=Gm(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),s.memoizedState={parent:c,cache:m},Ym(s),Zr(s,Dt,m)):((n.lanes&o)!==0&&(Xm(n,s),_u(s,null,null,o),yu()),m=n.memoizedState,p=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Zr(s,Dt,c)):(c=p.cache,Zr(s,Dt,c),c!==m.cache&&Hm(s,[Dt],o,!0))),Jt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function dr(n){n.flags|=4}function Dg(n,s,o,c,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(pT())n.flags|=8192;else throw ga=Vh,Qm}else n.flags&=-16777217}function HE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!sb(s))if(pT())n.flags|=8192;else throw ga=Vh,Qm}function Wh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?ih():536870912,n.lanes|=s,Mo|=s)}function wu(n,s){if(!Be)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function lt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function Q1(n,s,o){var c=s.pendingProps;switch(jm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ur(Dt),ut(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(wo(s)?dr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bm())),lt(s),null;case 26:var m=s.type,p=s.memoizedState;return n===null?(dr(s),p!==null?(lt(s),HE(s,p)):(lt(s),Dg(s,m,null,c,o))):p?p!==n.memoizedState?(dr(s),lt(s),HE(s,p)):(lt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&dr(s),lt(s),Dg(s,m,n,c,o)),null;case 27:if(to(s),o=Ne.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&dr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return lt(s),null}n=de.current,wo(s)?Sv(s):(n=WT(m,c,o),s.stateNode=n,dr(s))}return lt(s),null;case 5:if(to(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&dr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return lt(s),null}if(p=de.current,wo(s))Sv(s);else{var E=df(Ne.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?E.createElement(m,{is:c.is}):E.createElement(m)}}p[Ct]=s,p[Ht]=c;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=p;e:switch(Zt(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&dr(s)}}return lt(s),Dg(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&dr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ne.current,wo(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,m=Xt,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[Ct]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||zT(n.nodeValue,o)),n||Jr(s,!0)}else n=df(n).createTextNode(c),n[Ct]=s,s.stateNode=n}return lt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=wo(s),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ct]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),n=!1}else o=Bm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return lt(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=wo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Ct]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),m=!1}else m=Bm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Wh(s,s.updateQueue),lt(s),null);case 4:return ut(),n===null&&Zg(s.stateNode.containerInfo),lt(s),null;case 10:return ur(s.type),lt(s),null;case 19:if(ne(St),c=s.memoizedState,c===null)return lt(s),null;if(m=(s.flags&128)!==0,p=c.rendering,p===null)if(m)wu(c,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Uh(n),p!==null){for(s.flags|=128,wu(c,!1),n=p.updateQueue,s.updateQueue=n,Wh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)_v(o,n),o=o.sibling;return he(St,St.current&1|2),Be&&or(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&un()>nf&&(s.flags|=128,m=!0,wu(c,!1),s.lanes=4194304)}else{if(!m)if(n=Uh(p),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,Wh(s,n),wu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Be)return lt(s),null}else 2*un()-c.renderingStartTime>nf&&o!==536870912&&(s.flags|=128,m=!0,wu(c,!1),s.lanes=4194304);c.isBackwards?(p.sibling=s.child,s.child=p):(n=c.last,n!==null?n.sibling=p:s.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=un(),n.sibling=null,o=St.current,he(St,m?o&1|2:o&1),Be&&or(s,c.treeForkCount),n):(lt(s),null);case 22:case 23:return Cn(s),eg(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),o=s.updateQueue,o!==null&&Wh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&ne(da),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ur(Dt),lt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Y1(n,s){switch(jm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ur(Dt),ut(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return to(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(i(340));ca()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Cn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ca()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(St),null;case 4:return ut(),null;case 10:return ur(s.type),null;case 22:case 23:return Cn(s),eg(),n!==null&&ne(da),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ur(Dt),null;case 25:return null;default:return null}}function GE(n,s){switch(jm(s),s.tag){case 3:ur(Dt),ut();break;case 26:case 27:case 5:to(s);break;case 4:ut();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:ne(St);break;case 10:ur(s.type);break;case 22:case 23:Cn(s),eg(),n!==null&&ne(da);break;case 24:ur(Dt)}}function Au(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var p=o.create,E=o.inst;c=p(),E.destroy=c}o=o.next}while(o!==m)}}catch(w){Je(s,s.return,w)}}function ss(n,s,o){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&n)===n){var E=c.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,m=s;var O=o,K=w;try{K()}catch(ee){Je(m,O,ee)}}}c=c.next}while(c!==p)}}catch(ee){Je(s,s.return,ee)}}function KE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Lv(s,o)}catch(c){Je(n,n.return,c)}}}function $E(n,s,o){o.props=_a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Je(n,s,c)}}function Iu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){Je(n,s,m)}}function zi(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Je(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Je(n,s,m)}else o.current=null}function QE(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Je(n,n.return,m)}}function Og(n,s,o){try{var c=n.stateNode;yC(c,n.type,o,s),c[Ht]=s}catch(m){Je(n,n.return,m)}}function YE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fs(n.type)||n.tag===4}function Pg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||YE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vg(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=si));else if(c!==4&&(c===27&&fs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Vg(n,s,o),n=n.sibling;n!==null;)Vg(n,s,o),n=n.sibling}function Jh(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&fs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Jh(n,s,o),n=n.sibling;n!==null;)Jh(n,s,o),n=n.sibling}function XE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Zt(s,c,o),s[Ct]=n,s[Ht]=o}catch(p){Je(n,n.return,p)}}var mr=!1,Vt=!1,kg=!1,WE=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function X1(n,s){if(n=n.containerInfo,np=Ef,n=uv(n),Cm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,w=-1,O=-1,K=0,ee=0,re=n,$=null;t:for(;;){for(var W;re!==o||m!==0&&re.nodeType!==3||(w=E+m),re!==p||c!==0&&re.nodeType!==3||(O=E+c),re.nodeType===3&&(E+=re.nodeValue.length),(W=re.firstChild)!==null;)$=re,re=W;for(;;){if(re===n)break t;if($===o&&++K===m&&(w=E),$===p&&++ee===c&&(O=E),(W=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=W}o=w===-1||O===-1?null:{start:w,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(ip={focusedElem:n,selectionRange:o},Ef=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,m=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var me=_a(o.type,m);n=c.getSnapshotBeforeUpdate(me,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Te){Je(o,o.return,Te)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)ap(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ap(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function JE(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:pr(n,o),c&4&&Au(5,o);break;case 1:if(pr(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){Je(o,o.return,E)}else{var m=_a(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Je(o,o.return,E)}}c&64&&KE(o),c&512&&Iu(o,o.return);break;case 3:if(pr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Lv(n,s)}catch(E){Je(o,o.return,E)}}break;case 27:s===null&&c&4&&XE(o);case 26:case 5:pr(n,o),s===null&&c&4&&QE(o),c&512&&Iu(o,o.return);break;case 12:pr(n,o);break;case 31:pr(n,o),c&4&&tT(n,o);break;case 13:pr(n,o),c&4&&nT(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=sC.bind(null,o),AC(n,o))));break;case 22:if(c=o.memoizedState!==null||mr,!c){s=s!==null&&s.memoizedState!==null||Vt,m=mr;var p=Vt;mr=c,(Vt=s)&&!p?yr(n,o,(o.subtreeFlags&8772)!==0):pr(n,o),mr=m,Vt=p}break;case 30:break;default:pr(n,o)}}function ZE(n){var s=n.alternate;s!==null&&(n.alternate=null,ZE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ao(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,pn=!1;function gr(n,s,o){for(o=o.child;o!==null;)eT(n,s,o),o=o.sibling}function eT(n,s,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ti,o)}catch{}switch(o.tag){case 26:Vt||zi(o,s),gr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||zi(o,s);var c=ht,m=pn;fs(o.type)&&(ht=o.stateNode,pn=!1),gr(n,s,o),ku(o.stateNode),ht=c,pn=m;break;case 5:Vt||zi(o,s);case 6:if(c=ht,m=pn,ht=null,gr(n,s,o),ht=c,pn=m,ht!==null)if(pn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(p){Je(o,s,p)}else try{ht.removeChild(o.stateNode)}catch(p){Je(o,s,p)}break;case 18:ht!==null&&(pn?(n=ht,KT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Go(n)):KT(ht,o.stateNode));break;case 4:c=ht,m=pn,ht=o.stateNode.containerInfo,pn=!0,gr(n,s,o),ht=c,pn=m;break;case 0:case 11:case 14:case 15:ss(2,o,s),Vt||ss(4,o,s),gr(n,s,o);break;case 1:Vt||(zi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&$E(o,s,c)),gr(n,s,o);break;case 21:gr(n,s,o);break;case 22:Vt=(c=Vt)||o.memoizedState!==null,gr(n,s,o),Vt=c;break;default:gr(n,s,o)}}function tT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Go(n)}catch(o){Je(s,s.return,o)}}}function nT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Go(n)}catch(o){Je(s,s.return,o)}}function W1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new WE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new WE),s;default:throw Error(i(435,n.tag))}}function Zh(n,s){var o=W1(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var m=aC.bind(null,n,c);c.then(m,m)}})}function yn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],p=n,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(fs(w.type)){ht=w.stateNode,pn=!1;break e}break;case 5:ht=w.stateNode,pn=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,pn=!0;break e}w=w.return}if(ht===null)throw Error(i(160));eT(p,E,m),ht=null,pn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)iT(s,n),s=s.sibling}var hi=null;function iT(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(s,n),_n(n),c&4&&(ss(3,n,n.return),Au(3,n),ss(5,n,n.return));break;case 1:yn(s,n),_n(n),c&512&&(Vt||o===null||zi(o,o.return)),c&64&&mr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=hi;if(yn(s,n),_n(n),c&512&&(Vt||o===null||zi(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Ii]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),Zt(p,c,o),p[Ct]=n,xt(p),c=p;break e;case"link":var E=ib("link","href",m).get(c+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(p=E[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}p=m.createElement(c),Zt(p,c,o),m.head.appendChild(p);break;case"meta":if(E=ib("meta","content",m).get(c+(o.content||""))){for(w=0;w<E.length;w++)if(p=E[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}p=m.createElement(c),Zt(p,c,o),m.head.appendChild(p);break;default:throw Error(i(468,c))}p[Ct]=n,xt(p),c=p}n.stateNode=c}else rb(m,n.type,n.stateNode);else n.stateNode=nb(m,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?rb(m,n.type,n.stateNode):nb(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Og(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(s,n),_n(n),c&512&&(Vt||o===null||zi(o,o.return)),o!==null&&c&4&&Og(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(s,n),_n(n),c&512&&(Vt||o===null||zi(o,o.return)),n.flags&32){m=n.stateNode;try{gn(m,"")}catch(me){Je(n,n.return,me)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,Og(n,m,o!==null?o.memoizedProps:m)),c&1024&&(kg=!0);break;case 6:if(yn(s,n),_n(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(me){Je(n,n.return,me)}}break;case 3:if(pf=null,m=hi,hi=mf(s.containerInfo),yn(s,n),hi=m,_n(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Go(s.containerInfo)}catch(me){Je(n,n.return,me)}kg&&(kg=!1,rT(n));break;case 4:c=hi,hi=mf(n.stateNode.containerInfo),yn(s,n),_n(n),hi=c;break;case 12:yn(s,n),_n(n);break;case 31:yn(s,n),_n(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Zh(n,c)));break;case 13:yn(s,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(tf=un()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Zh(n,c)));break;case 22:m=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,K=mr,ee=Vt;if(mr=K||m,Vt=ee||O,yn(s,n),Vt=ee,mr=K,_n(n),c&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||O||mr||Vt||va(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(p=O.stateNode,m)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=O.stateNode;var re=O.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(me){Je(O,O.return,me)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=m?"":O.memoizedProps}catch(me){Je(O,O.return,me)}}}else if(s.tag===18){if(o===null){O=s;try{var W=O.stateNode;m?$T(W,!0):$T(O.stateNode,!1)}catch(me){Je(O,O.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Zh(n,o))));break;case 19:yn(s,n),_n(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Zh(n,c)));break;case 30:break;case 21:break;default:yn(s,n),_n(n)}}function _n(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(YE(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,p=Pg(n);Jh(n,p,m);break;case 5:var E=o.stateNode;o.flags&32&&(gn(E,""),o.flags&=-33);var w=Pg(n);Jh(n,w,E);break;case 3:case 4:var O=o.stateNode.containerInfo,K=Pg(n);Vg(n,K,O);break;default:throw Error(i(161))}}catch(ee){Je(n,n.return,ee)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function rT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;rT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function pr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)JE(n,s.alternate,s),s=s.sibling}function va(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ss(4,s,s.return),va(s);break;case 1:zi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&$E(s,s.return,o),va(s);break;case 27:ku(s.stateNode);case 26:case 5:zi(s,s.return),va(s);break;case 22:s.memoizedState===null&&va(s);break;case 30:va(s);break;default:va(s)}n=n.sibling}}function yr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=n,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:yr(m,p,o),Au(4,p);break;case 1:if(yr(m,p,o),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){Je(c,c.return,K)}if(c=p,m=c.updateQueue,m!==null){var w=c.stateNode;try{var O=m.shared.hiddenCallbacks;if(O!==null)for(m.shared.hiddenCallbacks=null,m=0;m<O.length;m++)kv(O[m],w)}catch(K){Je(c,c.return,K)}}o&&E&64&&KE(p),Iu(p,p.return);break;case 27:XE(p);case 26:case 5:yr(m,p,o),o&&c===null&&E&4&&QE(p),Iu(p,p.return);break;case 12:yr(m,p,o);break;case 31:yr(m,p,o),o&&E&4&&tT(m,p);break;case 13:yr(m,p,o),o&&E&4&&nT(m,p);break;case 22:p.memoizedState===null&&yr(m,p,o),Iu(p,p.return);break;case 30:break;default:yr(m,p,o)}s=s.sibling}}function Lg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&fu(o))}function Mg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fu(n))}function fi(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sT(n,s,o,c),s=s.sibling}function sT(n,s,o,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:fi(n,s,o,c),m&2048&&Au(9,s);break;case 1:fi(n,s,o,c);break;case 3:fi(n,s,o,c),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fu(n)));break;case 12:if(m&2048){fi(n,s,o,c),n=s.stateNode;try{var p=s.memoizedProps,E=p.id,w=p.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){Je(s,s.return,O)}}else fi(n,s,o,c);break;case 31:fi(n,s,o,c);break;case 13:fi(n,s,o,c);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?fi(n,s,o,c):Ru(n,s):p._visibility&2?fi(n,s,o,c):(p._visibility|=2,Vo(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Lg(E,s);break;case 24:fi(n,s,o,c),m&2048&&Mg(s.alternate,s);break;default:fi(n,s,o,c)}}function Vo(n,s,o,c,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,E=s,w=o,O=c,K=E.flags;switch(E.tag){case 0:case 11:case 15:Vo(p,E,w,O,m),Au(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?Vo(p,E,w,O,m):Ru(p,E):(ee._visibility|=2,Vo(p,E,w,O,m)),m&&K&2048&&Lg(E.alternate,E);break;case 24:Vo(p,E,w,O,m),m&&K&2048&&Mg(E.alternate,E);break;default:Vo(p,E,w,O,m)}s=s.sibling}}function Ru(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,m=c.flags;switch(c.tag){case 22:Ru(o,c),m&2048&&Lg(c.alternate,c);break;case 24:Ru(o,c),m&2048&&Mg(c.alternate,c);break;default:Ru(o,c)}s=s.sibling}}var Cu=8192;function ko(n,s,o){if(n.subtreeFlags&Cu)for(n=n.child;n!==null;)aT(n,s,o),n=n.sibling}function aT(n,s,o){switch(n.tag){case 26:ko(n,s,o),n.flags&Cu&&n.memoizedState!==null&&MC(o,hi,n.memoizedState,n.memoizedProps);break;case 5:ko(n,s,o);break;case 3:case 4:var c=hi;hi=mf(n.stateNode.containerInfo),ko(n,s,o),hi=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Cu,Cu=16777216,ko(n,s,o),Cu=c):ko(n,s,o));break;default:ko(n,s,o)}}function oT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function xu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,uT(c,n)}oT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)lT(n),n=n.sibling}function lT(n){switch(n.tag){case 0:case 11:case 15:xu(n),n.flags&2048&&ss(9,n,n.return);break;case 3:xu(n);break;case 12:xu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ef(n)):xu(n);break;default:xu(n)}}function ef(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,uT(c,n)}oT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ss(8,s,s.return),ef(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ef(s));break;default:ef(s)}n=n.sibling}}function uT(n,s){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:ss(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Kt=c;else e:for(o=n;Kt!==null;){c=Kt;var m=c.sibling,p=c.return;if(ZE(c),c===o){Kt=null;break e}if(m!==null){m.return=p,Kt=m;break e}Kt=p}}}var J1={getCacheForType:function(n){var s=Wt(Dt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Wt(Dt).controller.signal}},Z1=typeof WeakMap=="function"?WeakMap:Map,Ye=0,at=null,Ve=null,Me=0,We=0,xn=null,as=!1,Lo=!1,Ug=!1,_r=0,_t=0,os=0,Ea=0,jg=0,Nn=0,Mo=0,Nu=null,vn=null,zg=!1,tf=0,cT=0,nf=1/0,rf=null,ls=null,Bt=0,us=null,Uo=null,vr=0,Bg=0,Fg=null,hT=null,Du=0,qg=null;function Dn(){return(Ye&2)!==0&&Me!==0?Me&-Me:J.T!==null?Yg():rh()}function fT(){if(Nn===0)if((Me&536870912)===0||Be){var n=$s;$s<<=1,($s&3932160)===0&&($s=262144),Nn=n}else Nn=536870912;return n=Rn.current,n!==null&&(n.flags|=32),Nn}function En(n,s,o){(n===at&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(jo(n,0),cs(n,Me,Nn,!1)),Qs(n,o),((Ye&2)===0||n!==at)&&(n===at&&((Ye&2)===0&&(Ea|=o),_t===4&&cs(n,Me,Nn,!1)),Bi(n))}function dT(n,s,o){if((Ye&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||ni(n,s),m=c?nC(n,s):Gg(n,s,!0),p=c;do{if(m===0){Lo&&!c&&cs(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!eC(o)){m=Gg(n,s,!1),p=!1;continue}if(m===2){if(p=s,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=n;m=Nu;var O=w.current.memoizedState.isDehydrated;if(O&&(jo(w,E).flags|=256),E=Gg(w,E,!1),E!==2){if(Ug&&!O){w.errorRecoveryDisabledLanes|=p,Ea|=p,m=4;break e}p=vn,vn=m,p!==null&&(vn===null?vn=p:vn.push.apply(vn,p))}m=E}if(p=!1,m!==2)continue}}if(m===1){jo(n,0),cs(n,s,0,!0);break}e:{switch(c=n,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:cs(c,s,Nn,!as);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=tf+300-un(),10<m)){if(cs(c,s,Nn,!as),Si(c,0,!0)!==0)break e;vr=s,c.timeoutHandle=HT(mT.bind(null,c,o,vn,rf,zg,s,Nn,Ea,Mo,as,p,"Throttled",-0,0),m);break e}mT(c,o,vn,rf,zg,s,Nn,Ea,Mo,as,p,null,-0,0)}}break}while(!0);Bi(n)}function mT(n,s,o,c,m,p,E,w,O,K,ee,re,$,W){if(n.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},aT(s,p,re);var me=(p&62914560)===p?tf-un():(p&4194048)===p?cT-un():0;if(me=UC(re,me),me!==null){vr=p,n.cancelPendingCommit=me(bT.bind(null,n,s,p,o,c,m,E,w,O,ee,re,null,$,W)),cs(n,p,E,!K);return}}bT(n,s,p,o,c,m,E,w,O)}function eC(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],p=m.getSnapshot;m=m.value;try{if(!An(p(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cs(n,s,o,c){s&=~jg,s&=~Ea,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var m=s;0<m;){var p=31-Tt(m),E=1<<p;c[p]=-1,m&=~E}o!==0&&Ys(n,o,s)}function sf(){return(Ye&6)===0?(Ou(0),!1):!0}function Hg(){if(Ve!==null){if(We===0)var n=Ve.return;else n=Ve,lr=ha=null,ag(n),xo=null,mu=0,n=Ve;for(;n!==null;)GE(n.alternate,n),n=n.return;Ve=null}}function jo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,EC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),vr=0,Hg(),at=n,Ve=o=ar(n.current,null),Me=s,We=0,xn=null,as=!1,Lo=ni(n,s),Ug=!1,Mo=Nn=jg=Ea=os=_t=0,vn=Nu=null,zg=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var m=31-Tt(c),p=1<<m;s|=n[m],c&=~p}return _r=s,Ah(),o}function gT(n,s){xe=null,J.H=bu,s===Co||s===Ph?(s=Dv(),We=3):s===Qm?(s=Dv(),We=4):We=s===bg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,Ve===null&&(_t=1,$h(n,Bn(s,n.current)))}function pT(){var n=Rn.current;return n===null?!0:(Me&4194048)===Me?Gn===null:(Me&62914560)===Me||(Me&536870912)!==0?n===Gn:!1}function yT(){var n=J.H;return J.H=bu,n===null?bu:n}function _T(){var n=J.A;return J.A=J1,n}function af(){_t=4,as||(Me&4194048)!==Me&&Rn.current!==null||(Lo=!0),(os&134217727)===0&&(Ea&134217727)===0||at===null||cs(at,Me,Nn,!1)}function Gg(n,s,o){var c=Ye;Ye|=2;var m=yT(),p=_T();(at!==n||Me!==s)&&(rf=null,jo(n,s)),s=!1;var E=_t;e:do try{if(We!==0&&Ve!==null){var w=Ve,O=xn;switch(We){case 8:Hg(),E=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var K=We;if(We=0,xn=null,zo(n,w,O,K),o&&Lo){E=0;break e}break;default:K=We,We=0,xn=null,zo(n,w,O,K)}}tC(),E=_t;break}catch(ee){gT(n,ee)}while(!0);return s&&n.shellSuspendCounter++,lr=ha=null,Ye=c,J.H=m,J.A=p,Ve===null&&(at=null,Me=0,Ah()),E}function tC(){for(;Ve!==null;)vT(Ve)}function nC(n,s){var o=Ye;Ye|=2;var c=yT(),m=_T();at!==n||Me!==s?(rf=null,nf=un()+500,jo(n,s)):Lo=ni(n,s);e:do try{if(We!==0&&Ve!==null){s=Ve;var p=xn;t:switch(We){case 1:We=0,xn=null,zo(n,s,p,1);break;case 2:case 9:if(xv(p)){We=0,xn=null,ET(s);break}s=function(){We!==2&&We!==9||at!==n||(We=7),Bi(n)},p.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:xv(p)?(We=0,xn=null,ET(s)):(We=0,xn=null,zo(n,s,p,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var w=Ve;if(E?sb(E):w.stateNode.complete){We=0,xn=null;var O=w.sibling;if(O!==null)Ve=O;else{var K=w.return;K!==null?(Ve=K,of(K)):Ve=null}break t}}We=0,xn=null,zo(n,s,p,5);break;case 6:We=0,xn=null,zo(n,s,p,6);break;case 8:Hg(),_t=6;break e;default:throw Error(i(462))}}iC();break}catch(ee){gT(n,ee)}while(!0);return lr=ha=null,J.H=c,J.A=m,Ye=o,Ve!==null?0:(at=null,Me=0,Ah(),_t)}function iC(){for(;Ve!==null&&!Tm();)vT(Ve)}function vT(n){var s=qE(n.alternate,n,_r);n.memoizedProps=n.pendingProps,s===null?of(n):Ve=s}function ET(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=ME(o,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=ME(o,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:ag(s);default:GE(o,s),s=Ve=_v(s,_r),s=qE(o,s,_r)}n.memoizedProps=n.pendingProps,s===null?of(n):Ve=s}function zo(n,s,o,c){lr=ha=null,ag(s),xo=null,mu=0;var m=s.return;try{if(G1(n,m,s,o,Me)){_t=1,$h(n,Bn(o,n.current)),Ve=null;return}}catch(p){if(m!==null)throw Ve=m,p;_t=1,$h(n,Bn(o,n.current)),Ve=null;return}s.flags&32768?(Be||c===1?n=!0:Lo||(Me&536870912)!==0?n=!1:(as=n=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),TT(s,n)):of(s)}function of(n){var s=n;do{if((s.flags&32768)!==0){TT(s,as);return}n=s.return;var o=Q1(s.alternate,s,_r);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=n}while(s!==null);_t===0&&(_t=5)}function TT(n,s){do{var o=Y1(n.alternate,n);if(o!==null){o.flags&=32767,Ve=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=o}while(n!==null);_t=6,Ve=null}function bT(n,s,o,c,m,p,E,w,O){n.cancelPendingCommit=null;do lf();while(Bt!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Pm,wm(n,o,p,E,w,O),n===at&&(Ve=at=null,Me=0),Uo=s,us=n,vr=o,Bg=p,Fg=m,hT=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,oC(zr,function(){return RT(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,m=ue.p,ue.p=2,E=Ye,Ye|=4;try{X1(n,s,o)}finally{Ye=E,ue.p=m,J.T=c}}Bt=1,ST(),wT(),AT()}}function ST(){if(Bt===1){Bt=0;var n=us,s=Uo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var c=ue.p;ue.p=2;var m=Ye;Ye|=4;try{iT(s,n);var p=ip,E=uv(n.containerInfo),w=p.focusedElem,O=p.selectionRange;if(E!==w&&w&&w.ownerDocument&&lv(w.ownerDocument.documentElement,w)){if(O!==null&&Cm(w)){var K=O.start,ee=O.end;if(ee===void 0&&(ee=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(ee,w.value.length);else{var re=w.ownerDocument||document,$=re&&re.defaultView||window;if($.getSelection){var W=$.getSelection(),me=w.textContent.length,Te=Math.min(O.start,me),st=O.end===void 0?Te:Math.min(O.end,me);!W.extend&&Te>st&&(E=st,st=Te,Te=E);var z=ov(w,Te),U=ov(w,st);if(z&&U&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==U.node||W.focusOffset!==U.offset)){var G=re.createRange();G.setStart(z.node,z.offset),W.removeAllRanges(),Te>st?(W.addRange(G),W.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),W.addRange(G))}}}}for(re=[],W=w;W=W.parentNode;)W.nodeType===1&&re.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var ie=re[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Ef=!!np,ip=np=null}finally{Ye=m,ue.p=c,J.T=o}}n.current=s,Bt=2}}function wT(){if(Bt===2){Bt=0;var n=us,s=Uo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var c=ue.p;ue.p=2;var m=Ye;Ye|=4;try{JE(n,s.alternate,s)}finally{Ye=m,ue.p=c,J.T=o}}Bt=3}}function AT(){if(Bt===4||Bt===3){Bt=0,Wc();var n=us,s=Uo,o=vr,c=hT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Bt=5:(Bt=0,Uo=us=null,IT(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(ls=null),nr(o),s=s.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ti,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=J.T,m=ue.p,ue.p=2,J.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var w=c[E];p(w.value,{componentStack:w.stack})}}finally{J.T=s,ue.p=m}}(vr&3)!==0&&lf(),Bi(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===qg?Du++:(Du=0,qg=n):Du=0,Ou(0)}}function IT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,fu(s)))}function lf(){return ST(),wT(),AT(),RT()}function RT(){if(Bt!==5)return!1;var n=us,s=Bg;Bg=0;var o=nr(vr),c=J.T,m=ue.p;try{ue.p=32>o?32:o,J.T=null,o=Fg,Fg=null;var p=us,E=vr;if(Bt=0,Uo=us=null,vr=0,(Ye&6)!==0)throw Error(i(331));var w=Ye;if(Ye|=4,lT(p.current),sT(p,p.current,E,o),Ye=w,Ou(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ti,p)}catch{}return!0}finally{ue.p=m,J.T=c,IT(n,s)}}function CT(n,s,o){s=Bn(o,s),s=Tg(n.stateNode,s,2),n=ns(n,s,2),n!==null&&(Qs(n,2),Bi(n))}function Je(n,s,o){if(n.tag===3)CT(n,n,o);else for(;s!==null;){if(s.tag===3){CT(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ls===null||!ls.has(c))){n=Bn(o,n),o=xE(2),c=ns(s,o,2),c!==null&&(NE(o,c,s,n),Qs(c,2),Bi(c));break}}s=s.return}}function Kg(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Z1;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(o)||(Ug=!0,m.add(o),n=rC.bind(null,n,s,o),s.then(n,n))}function rC(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,at===n&&(Me&o)===o&&(_t===4||_t===3&&(Me&62914560)===Me&&300>un()-tf?(Ye&2)===0&&jo(n,0):jg|=o,Mo===Me&&(Mo=0)),Bi(n)}function xT(n,s){s===0&&(s=ih()),n=la(n,s),n!==null&&(Qs(n,s),Bi(n))}function sC(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),xT(n,o)}function aC(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),xT(n,o)}function oC(n,s){return zt(n,s)}var uf=null,Bo=null,$g=!1,cf=!1,Qg=!1,hs=0;function Bi(n){n!==Bo&&n.next===null&&(Bo===null?uf=Bo=n:Bo=Bo.next=n),cf=!0,$g||($g=!0,uC())}function Ou(n,s){if(!Qg&&cf){Qg=!0;do for(var o=!1,c=uf;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var E=c.suspendedLanes,w=c.pingedLanes;p=(1<<31-Tt(42|n)+1)-1,p&=m&~(E&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,PT(c,p))}else p=Me,p=Si(c,c===at?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||ni(c,p)||(o=!0,PT(c,p));c=c.next}while(o);Qg=!1}}function lC(){NT()}function NT(){cf=$g=!1;var n=0;hs!==0&&vC()&&(n=hs);for(var s=un(),o=null,c=uf;c!==null;){var m=c.next,p=DT(c,s);p===0?(c.next=null,o===null?uf=m:o.next=m,m===null&&(Bo=o)):(o=c,(n!==0||(p&3)!==0)&&(cf=!0)),c=m}Bt!==0&&Bt!==5||Ou(n),hs!==0&&(hs=0)}function DT(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-Tt(p),w=1<<E,O=m[E];O===-1?((w&o)===0||(w&c)!==0)&&(m[E]=Sm(w,s)):O<=s&&(n.expiredLanes|=w),p&=~w}if(s=at,o=Me,o=Si(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(We===2||We===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&jr(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ni(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&jr(c),nr(o)){case 2:case 8:o=Fl;break;case 32:o=zr;break;case 268435456:o=Jc;break;default:o=zr}return c=OT.bind(null,n),o=zt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&jr(c),n.callbackPriority=2,n.callbackNode=null,2}function OT(n,s){if(Bt!==0&&Bt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(lf()&&n.callbackNode!==o)return null;var c=Me;return c=Si(n,n===at?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(dT(n,c,s),DT(n,un()),n.callbackNode!=null&&n.callbackNode===o?OT.bind(null,n):null)}function PT(n,s){if(lf())return null;dT(n,s,!0)}function uC(){TC(function(){(Ye&6)!==0?zt(Bl,lC):NT()})}function Yg(){if(hs===0){var n=Io;n===0&&(n=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),hs=n}return hs}function VT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:co(""+n)}function kT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function cC(n,s,o,c,m){if(s==="submit"&&o&&o.stateNode===m){var p=VT((m[Ht]||null).action),E=c.submitter;E&&(s=(s=E[Ht]||null)?VT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var w=new Vi("action","action",null,c,m);n.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hs!==0){var O=E?kT(m,E):new FormData(m);gg(o,{pending:!0,data:O,method:m.method,action:p},null,O)}}else typeof p=="function"&&(w.preventDefault(),O=E?kT(m,E):new FormData(m),gg(o,{pending:!0,data:O,method:m.method,action:p},p,O))},currentTarget:m}]})}}for(var Xg=0;Xg<Om.length;Xg++){var Wg=Om[Xg],hC=Wg.toLowerCase(),fC=Wg[0].toUpperCase()+Wg.slice(1);ci(hC,"on"+fC)}ci(fv,"onAnimationEnd"),ci(dv,"onAnimationIteration"),ci(mv,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(C1,"onTransitionRun"),ci(x1,"onTransitionStart"),ci(N1,"onTransitionCancel"),ci(gv,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function LT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var E=c.length-1;0<=E;E--){var w=c[E],O=w.instance,K=w.currentTarget;if(w=w.listener,O!==p&&m.isPropagationStopped())break e;p=w,m.currentTarget=K;try{p(m)}catch(ee){wh(ee)}m.currentTarget=null,p=O}else for(E=0;E<c.length;E++){if(w=c[E],O=w.instance,K=w.currentTarget,w=w.listener,O!==p&&m.isPropagationStopped())break e;p=w,m.currentTarget=K;try{p(m)}catch(ee){wh(ee)}m.currentTarget=null,p=O}}}}function ke(n,s){var o=s[so];o===void 0&&(o=s[so]=new Set);var c=n+"__bubble";o.has(c)||(MT(s,n,2,!1),o.add(c))}function Jg(n,s,o){var c=0;s&&(c|=4),MT(o,n,c,s)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Zg(n){if(!n[hf]){n[hf]=!0,Gl.forEach(function(o){o!=="selectionchange"&&(dC.has(o)||Jg(o,!1,n),Jg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[hf]||(s[hf]=!0,Jg("selectionchange",!1,s))}}function MT(n,s,o,c){switch(fb(s)){case 2:var m=BC;break;case 8:m=FC;break;default:m=mp}o=m.bind(null,s,o,n),m=void 0,!ea||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function ep(n,s,o,c,m){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var w=c.stateNode.containerInfo;if(w===m)break;if(E===4)for(E=c.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;w!==null;){if(E=Ri(w),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){c=p=E;continue e}w=w.parentNode}}c=c.return}Kr(function(){var K=p,ee=Mn(o),re=[];e:{var $=pv.get(n);if($!==void 0){var W=Vi,me=n;switch(n){case"keypress":if(na(o)===0)break e;case"keydown":case"keyup":W=Th;break;case"focusin":me="focus",W=ra;break;case"focusout":me="blur",W=ra;break;case"beforeblur":case"afterblur":W=ra;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case fv:case dv:case mv:W=mh;break;case gv:W=A;break;case"scroll":case"scrollend":W=iu;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=sr;break;case"toggle":case"beforetoggle":W=Ce}var Te=(s&4)!==0,st=!Te&&(n==="scroll"||n==="scrollend"),z=Te?$!==null?$+"Capture":null:$;Te=[];for(var U=K,G;U!==null;){var ie=U;if(G=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||G===null||z===null||(ie=ai(U,z),ie!=null&&Te.push(Vu(U,ie,G))),st)break;U=U.return}0<Te.length&&($=new W($,me,null,o,ee),re.push({event:$,listeners:Te}))}}if((s&7)===0){e:{if($=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",$&&o!==eu&&(me=o.relatedTarget||o.fromElement)&&(Ri(me)||me[Ai]))break e;if((W||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,W?(me=o.relatedTarget||o.toElement,W=K,me=me?Ri(me):null,me!==null&&(st=l(me),Te=me.tag,me!==st||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(W=null,me=K),W!==me)){if(Te=ru,ie="onMouseLeave",z="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Te=sr,ie="onPointerLeave",z="onPointerEnter",U="pointer"),st=W==null?$:Sn(W),G=me==null?$:Sn(me),$=new Te(ie,U+"leave",W,o,ee),$.target=st,$.relatedTarget=G,ie=null,Ri(ee)===K&&(Te=new Te(z,U+"enter",me,o,ee),Te.target=G,Te.relatedTarget=st,ie=Te),st=ie,W&&me)t:{for(Te=mC,z=W,U=me,G=0,ie=z;ie;ie=Te(ie))G++;ie=0;for(var ve=U;ve;ve=Te(ve))ie++;for(;0<G-ie;)z=Te(z),G--;for(;0<ie-G;)U=Te(U),ie--;for(;G--;){if(z===U||U!==null&&z===U.alternate){Te=z;break t}z=Te(z),U=Te(U)}Te=null}else Te=null;W!==null&&UT(re,$,W,Te,!1),me!==null&&st!==null&&UT(re,st,me,Te,!0)}}e:{if($=K?Sn(K):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Ge=tv;else if(Z_($))if(nv)Ge=A1;else{Ge=S1;var pe=b1}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&uo(K.elementType)&&(Ge=tv):Ge=w1;if(Ge&&(Ge=Ge(n,K))){ev(re,Ge,o,ee);break e}pe&&pe(n,$,K),n==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Wl($,"number",$.value)}switch(pe=K?Sn(K):window,n){case"focusin":(Z_(pe)||pe.contentEditable==="true")&&(_o=pe,xm=K,uu=null);break;case"focusout":uu=xm=_o=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,cv(re,o,ee);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":cv(re,o,ee)}var De;if(Qe)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else yo?sa(n,o)&&(Ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(Mi&&o.locale!=="ko"&&(yo||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&yo&&(De=nu()):(Pi=ee,tu="value"in Pi?Pi.value:Pi.textContent,yo=!0)),pe=ff(K,Ue),0<pe.length&&(Ue=new Li(Ue,n,null,o,ee),re.push({event:Ue,listeners:pe}),De?Ue.data=De:(De=po(o),De!==null&&(Ue.data=De)))),(De=jn?_1(n,o):v1(n,o))&&(Ue=ff(K,"onBeforeInput"),0<Ue.length&&(pe=new Li("onBeforeInput","beforeinput",null,o,ee),re.push({event:pe,listeners:Ue}),pe.data=De)),cC(re,n,K,o,ee)}LT(re,s)})}function Vu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ff(n,s){for(var o=s+"Capture",c=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=ai(n,o),m!=null&&c.unshift(Vu(n,m,p)),m=ai(n,s),m!=null&&c.push(Vu(n,m,p))),n.tag===3)return c;n=n.return}return[]}function mC(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function UT(n,s,o,c,m){for(var p=s._reactName,E=[];o!==null&&o!==c;){var w=o,O=w.alternate,K=w.stateNode;if(w=w.tag,O!==null&&O===c)break;w!==5&&w!==26&&w!==27||K===null||(O=K,m?(K=ai(o,p),K!=null&&E.unshift(Vu(o,K,O))):m||(K=ai(o,p),K!=null&&E.push(Vu(o,K,O)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var gC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function jT(n){return(typeof n=="string"?n:""+n).replace(gC,`
`).replace(pC,"")}function zT(n,s){return s=jT(s),jT(n)===s}function rt(n,s,o,c,m,p){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||gn(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&gn(n,""+c);break;case"className":wn(n,"class",c);break;case"tabIndex":wn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(n,o,c);break;case"style":Zl(n,c,p);break;case"data":if(s!=="object"){wn(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=co(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&rt(n,s,"name",m.name,m,null),rt(n,s,"formEncType",m.formEncType,m,null),rt(n,s,"formMethod",m.formMethod,m,null),rt(n,s,"formTarget",m.formTarget,m,null)):(rt(n,s,"encType",m.encType,m,null),rt(n,s,"method",m.method,m,null),rt(n,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=co(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=si);break;case"onScroll":c!=null&&ke("scroll",n);break;case"onScrollEnd":c!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=co(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":ke("beforetoggle",n),ke("toggle",n),oo(n,"popover",c);break;case"xlinkActuate":Nt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":oo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=hh.get(o)||o,oo(n,o,c))}}function tp(n,s,o,c,m,p){switch(o){case"style":Zl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?gn(n,c):(typeof c=="number"||typeof c=="bigint")&&gn(n,""+c);break;case"onScroll":c!=null&&ke("scroll",n);break;case"onScrollEnd":c!=null&&ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),p=n[Ht]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):oo(n,o,c)}}}function Zt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var c=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(n,s,p,E,o,null)}}m&&rt(n,s,"srcSet",o.srcSet,o,null),c&&rt(n,s,"src",o.src,o,null);return;case"input":ke("invalid",n);var w=p=E=m=null,O=null,K=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":m=ee;break;case"type":E=ee;break;case"checked":O=ee;break;case"defaultChecked":K=ee;break;case"value":p=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:rt(n,s,c,ee,o,null)}}lh(n,p,w,O,K,E,m,!1);return;case"select":ke("invalid",n),c=E=p=null;for(m in o)if(o.hasOwnProperty(m)&&(w=o[m],w!=null))switch(m){case"value":p=w;break;case"defaultValue":E=w;break;case"multiple":c=w;default:rt(n,s,m,w,o,null)}s=p,o=E,n.multiple=!!c,s!=null?Fr(n,!!c,s,!1):o!=null&&Fr(n,!!c,o,!0);return;case"textarea":ke("invalid",n),p=m=c=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":c=w;break;case"defaultValue":m=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:rt(n,s,E,w,o,null)}qr(n,c,m,p);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(c=o[O],c!=null))switch(O){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(n,s,O,c,o,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(c=0;c<Pu.length;c++)ke(Pu[c],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(c=o[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(n,s,K,c,o,null)}return;default:if(uo(s)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&tp(n,s,ee,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&rt(n,s,w,c,o,null))}function yC(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,E=null,w=null,O=null,K=null,ee=null;for(W in o){var re=o[W];if(o.hasOwnProperty(W)&&re!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(W)||rt(n,s,W,null,c,re)}}for(var $ in c){var W=c[$];if(re=o[$],c.hasOwnProperty($)&&(W!=null||re!=null))switch($){case"type":p=W;break;case"name":m=W;break;case"checked":K=W;break;case"defaultChecked":ee=W;break;case"value":E=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==re&&rt(n,s,$,W,c,re)}}lo(n,E,w,O,K,ee,p,m);return;case"select":W=E=w=$=null;for(p in o)if(O=o[p],o.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":W=O;default:c.hasOwnProperty(p)||rt(n,s,p,null,c,O)}for(m in c)if(p=c[m],O=o[m],c.hasOwnProperty(m)&&(p!=null||O!=null))switch(m){case"value":$=p;break;case"defaultValue":w=p;break;case"multiple":E=p;default:p!==O&&rt(n,s,m,p,c,O)}s=w,o=E,c=W,$!=null?Fr(n,!!o,$,!1):!!c!=!!o&&(s!=null?Fr(n,!!o,s,!0):Fr(n,!!o,o?[]:"",!1));return;case"textarea":W=$=null;for(w in o)if(m=o[w],o.hasOwnProperty(w)&&m!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:rt(n,s,w,null,c,m)}for(E in c)if(m=c[E],p=o[E],c.hasOwnProperty(E)&&(m!=null||p!=null))switch(E){case"value":$=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&rt(n,s,E,m,c,p)}uh(n,$,W);return;case"option":for(var me in o)if($=o[me],o.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me))switch(me){case"selected":n.selected=!1;break;default:rt(n,s,me,null,c,$)}for(O in c)if($=c[O],W=o[O],c.hasOwnProperty(O)&&$!==W&&($!=null||W!=null))switch(O){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:rt(n,s,O,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)$=o[Te],o.hasOwnProperty(Te)&&$!=null&&!c.hasOwnProperty(Te)&&rt(n,s,Te,null,c,$);for(K in c)if($=c[K],W=o[K],c.hasOwnProperty(K)&&$!==W&&($!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:rt(n,s,K,$,c,W)}return;default:if(uo(s)){for(var st in o)$=o[st],o.hasOwnProperty(st)&&$!==void 0&&!c.hasOwnProperty(st)&&tp(n,s,st,void 0,c,$);for(ee in c)$=c[ee],W=o[ee],!c.hasOwnProperty(ee)||$===W||$===void 0&&W===void 0||tp(n,s,ee,$,c,W);return}}for(var z in o)$=o[z],o.hasOwnProperty(z)&&$!=null&&!c.hasOwnProperty(z)&&rt(n,s,z,null,c,$);for(re in c)$=c[re],W=o[re],!c.hasOwnProperty(re)||$===W||$==null&&W==null||rt(n,s,re,$,c,W)}function BT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _C(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],p=m.transferSize,E=m.initiatorType,w=m.duration;if(p&&w&&BT(E)){for(E=0,w=m.responseEnd,c+=1;c<o.length;c++){var O=o[c],K=O.startTime;if(K>w)break;var ee=O.transferSize,re=O.initiatorType;ee&&BT(re)&&(O=O.responseEnd,E+=ee*(O<w?1:(w-K)/(O-K)))}if(--c,s+=8*(p+E)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var np=null,ip=null;function df(n){return n.nodeType===9?n:n.ownerDocument}function FT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function rp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sp=null;function vC(){var n=window.event;return n&&n.type==="popstate"?n===sp?!1:(sp=n,!0):(sp=null,!1)}var HT=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,GT=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof GT<"u"?function(n){return GT.resolve(null).then(n).catch(bC)}:HT;function bC(n){setTimeout(function(){throw n})}function fs(n){return n==="head"}function KT(n,s){var o=s,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),Go(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ku(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ku(o);for(var p=o.firstChild;p;){var E=p.nextSibling,w=p.nodeName;p[Ii]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=E}}else o==="body"&&ku(n.ownerDocument.body);o=m}while(o);Go(s)}function $T(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function ap(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ap(o),ao(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function SC(n,s,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ii])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function wC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Kn(n.nextSibling),n===null))return null;return n}function QT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Kn(n.nextSibling),n===null))return null;return n}function op(n){return n.data==="$?"||n.data==="$~"}function lp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function AC(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Kn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var up=null;function YT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Kn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function XT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function WT(n,s,o){switch(s=df(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ku(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ao(n)}var $n=new Map,JT=new Set;function mf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Er=ue.d;ue.d={f:IC,r:RC,D:CC,C:xC,L:NC,m:DC,X:PC,S:OC,M:VC};function IC(){var n=Er.f(),s=sf();return n||s}function RC(n){var s=Ln(n);s!==null&&s.tag===5&&s.type==="form"?gE(s):Er.r(n)}var Fo=typeof document>"u"?null:document;function ZT(n,s,o){var c=Fo;if(c&&typeof s=="string"&&s){var m=mn(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),JT.has(m)||(JT.add(m),n={rel:n,crossOrigin:o,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),Zt(s,"link",n),xt(s),c.head.appendChild(s)))}}function CC(n){Er.D(n),ZT("dns-prefetch",n,null)}function xC(n,s){Er.C(n,s),ZT("preconnect",n,s)}function NC(n,s,o){Er.L(n,s,o);var c=Fo;if(c&&n&&s){var m='link[rel="preload"][as="'+mn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+mn(o.imageSizes)+'"]')):m+='[href="'+mn(n)+'"]';var p=m;switch(s){case"style":p=qo(n);break;case"script":p=Ho(n)}$n.has(p)||(n=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),$n.set(p,n),c.querySelector(m)!==null||s==="style"&&c.querySelector(Lu(p))||s==="script"&&c.querySelector(Mu(p))||(s=c.createElement("link"),Zt(s,"link",n),xt(s),c.head.appendChild(s)))}}function DC(n,s){Er.m(n,s);var o=Fo;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+mn(c)+'"][href="'+mn(n)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ho(n)}if(!$n.has(p)&&(n=v({rel:"modulepreload",href:n},s),$n.set(p,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mu(p)))return}c=o.createElement("link"),Zt(c,"link",n),xt(c),o.head.appendChild(c)}}}function OC(n,s,o){Er.S(n,s,o);var c=Fo;if(c&&n){var m=Ci(c).hoistableStyles,p=qo(n);s=s||"default";var E=m.get(p);if(!E){var w={loading:0,preload:null};if(E=c.querySelector(Lu(p)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},o),(o=$n.get(p))&&cp(n,o);var O=E=c.createElement("link");xt(O),Zt(O,"link",n),O._p=new Promise(function(K,ee){O.onload=K,O.onerror=ee}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,gf(E,s,c)}E={type:"stylesheet",instance:E,count:1,state:w},m.set(p,E)}}}function PC(n,s){Er.X(n,s);var o=Fo;if(o&&n){var c=Ci(o).hoistableScripts,m=Ho(n),p=c.get(m);p||(p=o.querySelector(Mu(m)),p||(n=v({src:n,async:!0},s),(s=$n.get(m))&&hp(n,s),p=o.createElement("script"),xt(p),Zt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function VC(n,s){Er.M(n,s);var o=Fo;if(o&&n){var c=Ci(o).hoistableScripts,m=Ho(n),p=c.get(m);p||(p=o.querySelector(Mu(m)),p||(n=v({src:n,async:!0,type:"module"},s),(s=$n.get(m))&&hp(n,s),p=o.createElement("script"),xt(p),Zt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function eb(n,s,o,c){var m=(m=Ne.current)?mf(m):null;if(!m)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=qo(o.href),o=Ci(m).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=qo(o.href);var p=Ci(m).hoistableStyles,E=p.get(n);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=m.querySelector(Lu(n)))&&!p._p&&(E.instance=p,E.state.loading=5),$n.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(n,o),p||kC(m,n,o,E.state))),s&&c===null)throw Error(i(528,""));return E}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ho(o),o=Ci(m).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function qo(n){return'href="'+mn(n)+'"'}function Lu(n){return'link[rel="stylesheet"]['+n+"]"}function tb(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function kC(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Zt(s,"link",o),xt(s),n.head.appendChild(s))}function Ho(n){return'[src="'+mn(n)+'"]'}function Mu(n){return"script[async]"+n}function nb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+mn(o.href)+'"]');if(c)return s.instance=c,xt(c),c;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),xt(c),Zt(c,"style",m),gf(c,o.precedence,n),s.instance=c;case"stylesheet":m=qo(o.href);var p=n.querySelector(Lu(m));if(p)return s.state.loading|=4,s.instance=p,xt(p),p;c=tb(o),(m=$n.get(m))&&cp(c,m),p=(n.ownerDocument||n).createElement("link"),xt(p);var E=p;return E._p=new Promise(function(w,O){E.onload=w,E.onerror=O}),Zt(p,"link",c),s.state.loading|=4,gf(p,o.precedence,n),s.instance=p;case"script":return p=Ho(o.src),(m=n.querySelector(Mu(p)))?(s.instance=m,xt(m),m):(c=o,(m=$n.get(p))&&(c=v({},o),hp(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),xt(m),Zt(m,"link",c),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,gf(c,o.precedence,n));return s.instance}function gf(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,E=0;E<c.length;E++){var w=c[E];if(w.dataset.precedence===s)p=w;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function cp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function hp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var pf=null;function ib(n,s,o){if(pf===null){var c=new Map,m=pf=new Map;m.set(o,c)}else m=pf,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[Ii]||p[Ct]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=n+E;var w=c.get(E);w?w.push(p):c.set(E,[p])}}return c}function rb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function LC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function sb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function MC(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=qo(c.href),p=s.querySelector(Lu(m));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=yf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,xt(p);return}p=s.ownerDocument||s,c=tb(c),(m=$n.get(m))&&cp(c,m),p=p.createElement("link"),xt(p);var E=p;E._p=new Promise(function(w,O){E.onload=w,E.onerror=O}),Zt(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=yf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var fp=0;function UC(n,s){return n.stylesheets&&n.count===0&&vf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&vf(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&fp===0&&(fp=62500*_C());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&vf(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>fp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _f=null;function vf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_f=new Map,s.forEach(jC,n),_f=null,yf.call(n))}function jC(n,s){if(!(s.state.loading&4)){var o=_f.get(n);if(o)var c=o.get(null);else{o=new Map,_f.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var E=m[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}m=s.instance,E=m.getAttribute("data-precedence"),p=o.get(E)||c,p===c&&o.set(null,m),o.set(E,m),this.count++,c=yf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Uu={$$typeof:te,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function zC(n,s,o,c,m,p,E,w,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function ab(n,s,o,c,m,p,E,w,O,K,ee,re){return n=new zC(n,s,o,E,O,K,ee,re,w),s=1,p===!0&&(s|=24),p=In(3,null,null,s),n.current=p,p.stateNode=n,s=Gm(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:s},Ym(p),n}function ob(n){return n?(n=To,n):To}function lb(n,s,o,c,m,p){m=ob(m),c.context===null?c.context=m:c.pendingContext=m,c=ts(s),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=ns(n,c,s),o!==null&&(En(o,n,s),pu(o,n,s))}function ub(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function dp(n,s){ub(n,s),(n=n.alternate)&&ub(n,s)}function cb(n){if(n.tag===13||n.tag===31){var s=la(n,67108864);s!==null&&En(s,n,67108864),dp(n,67108864)}}function hb(n){if(n.tag===13||n.tag===31){var s=Dn();s=Xs(s);var o=la(n,s);o!==null&&En(o,n,s),dp(n,s)}}var Ef=!0;function BC(n,s,o,c){var m=J.T;J.T=null;var p=ue.p;try{ue.p=2,mp(n,s,o,c)}finally{ue.p=p,J.T=m}}function FC(n,s,o,c){var m=J.T;J.T=null;var p=ue.p;try{ue.p=8,mp(n,s,o,c)}finally{ue.p=p,J.T=m}}function mp(n,s,o,c){if(Ef){var m=gp(c);if(m===null)ep(n,s,c,Tf,o),db(n,c);else if(HC(m,n,s,o,c))c.stopPropagation();else if(db(n,c),s&4&&-1<qC.indexOf(n)){for(;m!==null;){var p=Ln(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=bi(p.pendingLanes);if(E!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var O=1<<31-Tt(E);w.entanglements[1]|=O,E&=~O}Bi(p),(Ye&6)===0&&(nf=un()+500,Ou(0))}}break;case 31:case 13:w=la(p,2),w!==null&&En(w,p,2),sf(),dp(p,2)}if(p=gp(c),p===null&&ep(n,s,c,Tf,o),p===m)break;m=p}m!==null&&c.stopPropagation()}else ep(n,s,c,null,o)}}function gp(n){return n=Mn(n),pp(n)}var Tf=null;function pp(n){if(Tf=null,n=Ri(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Tf=n,null}function fb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ks()){case Bl:return 2;case Fl:return 8;case zr:case bm:return 32;case Jc:return 268435456;default:return 32}default:return 32}}var yp=!1,ds=null,ms=null,gs=null,ju=new Map,zu=new Map,ps=[],qC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function db(n,s){switch(n){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":ju.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(s.pointerId)}}function Bu(n,s,o,c,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},s!==null&&(s=Ln(s),s!==null&&cb(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function HC(n,s,o,c,m){switch(s){case"focusin":return ds=Bu(ds,n,s,o,c,m),!0;case"dragenter":return ms=Bu(ms,n,s,o,c,m),!0;case"mouseover":return gs=Bu(gs,n,s,o,c,m),!0;case"pointerover":var p=m.pointerId;return ju.set(p,Bu(ju.get(p)||null,n,s,o,c,m)),!0;case"gotpointercapture":return p=m.pointerId,zu.set(p,Bu(zu.get(p)||null,n,s,o,c,m)),!0}return!1}function mb(n){var s=Ri(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,ii(n.priority,function(){hb(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,ii(n.priority,function(){hb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=gp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);eu=c,o.target.dispatchEvent(c),eu=null}else return s=Ln(o),s!==null&&cb(s),n.blockedOn=o,!1;s.shift()}return!0}function gb(n,s,o){bf(n)&&o.delete(s)}function GC(){yp=!1,ds!==null&&bf(ds)&&(ds=null),ms!==null&&bf(ms)&&(ms=null),gs!==null&&bf(gs)&&(gs=null),ju.forEach(gb),zu.forEach(gb)}function Sf(n,s){n.blockedOn===s&&(n.blockedOn=null,yp||(yp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,GC)))}var wf=null;function pb(n){wf!==n&&(wf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){wf===n&&(wf=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],m=n[s+2];if(typeof c!="function"){if(pp(c||o)===null)continue;break}var p=Ln(o);p!==null&&(n.splice(s,3),s-=3,gg(p,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Go(n){function s(O){return Sf(O,n)}ds!==null&&Sf(ds,n),ms!==null&&Sf(ms,n),gs!==null&&Sf(gs,n),ju.forEach(s),zu.forEach(s);for(var o=0;o<ps.length;o++){var c=ps[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ps.length&&(o=ps[0],o.blockedOn===null);)mb(o),o.blockedOn===null&&ps.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],p=o[c+1],E=m[Ht]||null;if(typeof p=="function")E||pb(o);else if(E){var w=null;if(p&&p.hasAttribute("formAction")){if(m=p,E=p[Ht]||null)w=E.formAction;else if(pp(m)!==null)continue}else w=E.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),pb(o)}}}function yb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function _p(n){this._internalRoot=n}Af.prototype.render=_p.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Dn();lb(o,c,n,s,null,null)},Af.prototype.unmount=_p.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;lb(n.current,2,null,n,null,null),sf(),s[Ai]=null}};function Af(n){this._internalRoot=n}Af.prototype.unstable_scheduleHydration=function(n){if(n){var s=rh();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ps.length&&s!==0&&s<ps[o].priority;o++);ps.splice(o,0,n),o===0&&mb(n)}};var _b=e.version;if(_b!=="19.2.0")throw Error(i(527,_b,"19.2.0"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var KC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{ti=If.inject(KC),Qt=If}catch{}}return qu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,c="",m=AE,p=IE,E=RE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=ab(n,1,!1,null,null,o,c,null,m,p,E,yb),n[Ai]=s.current,Zg(n),new _p(s)},qu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var c=!1,m="",p=AE,E=IE,w=RE,O=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=ab(n,1,!0,s,o??null,c,m,O,p,E,w,yb),s.context=ob(null),o=s.current,c=Dn(),c=Xs(c),m=ts(c),m.callback=null,ns(o,m,c),o=c,s.current.lanes=o,Qs(s,o),Bi(s),n[Ai]=s.current,Zg(n),new Af(s)},qu.version="19.2.0",qu}var Cb;function ix(){if(Cb)return Tp.exports;Cb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Tp.exports=nx(),Tp.exports}var rx=ix();const sx=g0(rx);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xb="popstate";function ax(r={}){function e(i,a){let{pathname:l,search:u,hash:h}=i.location;return Yp("",{pathname:l,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:mc(a)}return lx(e,t,null,r)}function dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _i(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ox(){return Math.random().toString(36).substring(2,10)}function Nb(r,e){return{usr:r.state,key:r.key,idx:e}}function Yp(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Dl(e):e,state:t,key:e&&e.key||i||ox()}}function mc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Dl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function lx(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,h="POP",d=null,g=y();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let V=y(),Q=V==null?null:V-g;g=V,d&&d({action:h,location:P.location,delta:Q})}function S(V,Q){h="PUSH";let Y=Yp(P.location,V,Q);g=y()+1;let te=Nb(Y,g),ae=P.createHref(Y);try{u.pushState(te,"",ae)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(ae)}l&&d&&d({action:h,location:P.location,delta:1})}function I(V,Q){h="REPLACE";let Y=Yp(P.location,V,Q);g=y();let te=Nb(Y,g),ae=P.createHref(Y);u.replaceState(te,"",ae),l&&d&&d({action:h,location:P.location,delta:0})}function R(V){return ux(V)}let P={get action(){return h},get location(){return r(a,u)},listen(V){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(xb,v),d=V,()=>{a.removeEventListener(xb,v),d=null}},createHref(V){return e(a,V)},createURL:R,encodeLocation(V){let Q=R(V);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:S,replace:I,go(V){return u.go(V)}};return P}function ux(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),dt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:mc(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function p0(r,e,t="/"){return cx(r,e,t,!1)}function cx(r,e,t,i){let a=typeof e=="string"?Dl(e):e,l=Rr(a.pathname||"/",t);if(l==null)return null;let u=y0(r);hx(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let g=bx(l);h=Ex(u[d],g,i)}return h}function y0(r,e=[],t=[],i="",a=!1){let l=(u,h,d=a,g)=>{let y={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&d)return;dt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=Ar([i,y.relativePath]),S=t.concat(y);u.children&&u.children.length>0&&(dt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),y0(u.children,e,S,v,d)),!(u.path==null&&!u.index)&&e.push({path:v,score:_x(v,u.index),routesMeta:S})};return r.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))l(u,h);else for(let d of _0(u.path))l(u,h,!0,d)}),e}function _0(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=_0(i.join("/")),h=[];return h.push(...u.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...u),h.map(d=>r.startsWith("/")&&d===""?"/":d)}function hx(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:vx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var fx=/^:[\w-]+$/,dx=3,mx=2,gx=1,px=10,yx=-2,Db=r=>r==="*";function _x(r,e){let t=r.split("/"),i=t.length;return t.some(Db)&&(i+=yx),e&&(i+=mx),t.filter(a=>!Db(a)).reduce((a,l)=>a+(fx.test(l)?dx:l===""?gx:px),i)}function vx(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function Ex(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],g=h===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=id({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},y),S=d.route;if(!v&&g&&t&&!i[i.length-1].route.index&&(v=id({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Ar([l,v.pathname]),pathnameBase:Ix(Ar([l,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(l=Ar([l,v.pathnameBase]))}return u}function id(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=Tx(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:v},S)=>{if(y==="*"){let R=h[S]||"";u=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const I=h[S];return v&&!I?g[y]=void 0:g[y]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:r}}function Tx(r,e=!1,t=!0){_i(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function bx(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Rr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function Sx(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?Dl(r):r;return{pathname:t?t.startsWith("/")?t:wx(t,e):e,search:Rx(i),hash:Cx(a)}}function wx(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ap(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ax(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jy(r){let e=Ax(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function zy(r,e,t,i=!1){let a;typeof r=="string"?a=Dl(r):(a={...r},dt(!a.pathname||!a.pathname.includes("?"),Ap("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),Ap("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),Ap("#","search","hash",a)));let l=r===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),v-=1;a.pathname=S.join("/")}h=v>=0?e[v]:"/"}let d=Sx(a,h),g=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(g||y)&&(d.pathname+="/"),d}var Ar=r=>r.join("/").replace(/\/\/+/g,"/"),Ix=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Rx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Cx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function xx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var v0=["POST","PUT","PATCH","DELETE"];new Set(v0);var Nx=["GET",...v0];new Set(Nx);var Ol=F.createContext(null);Ol.displayName="DataRouter";var Ud=F.createContext(null);Ud.displayName="DataRouterState";F.createContext(!1);var E0=F.createContext({isTransitioning:!1});E0.displayName="ViewTransition";var Dx=F.createContext(new Map);Dx.displayName="Fetchers";var Ox=F.createContext(null);Ox.displayName="Await";var vi=F.createContext(null);vi.displayName="Navigation";var Oc=F.createContext(null);Oc.displayName="Location";var Zi=F.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var By=F.createContext(null);By.displayName="RouteError";function Px(r,{relative:e}={}){dt(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=F.useContext(vi),{hash:a,pathname:l,search:u}=Pc(r,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Ar([t,l])),i.createHref({pathname:h,search:u,hash:a})}function Pl(){return F.useContext(Oc)!=null}function Pr(){return dt(Pl(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Oc).location}var T0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b0(r){F.useContext(vi).static||F.useLayoutEffect(r)}function ei(){let{isDataRoute:r}=F.useContext(Zi);return r?Kx():Vx()}function Vx(){dt(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let r=F.useContext(Ol),{basename:e,navigator:t}=F.useContext(vi),{matches:i}=F.useContext(Zi),{pathname:a}=Pr(),l=JSON.stringify(jy(i)),u=F.useRef(!1);return b0(()=>{u.current=!0}),F.useCallback((d,g={})=>{if(_i(u.current,T0),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=zy(d,JSON.parse(l),a,g.relative==="path");r==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ar([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,r])}F.createContext(null);function Pc(r,{relative:e}={}){let{matches:t}=F.useContext(Zi),{pathname:i}=Pr(),a=JSON.stringify(jy(t));return F.useMemo(()=>zy(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function kx(r,e){return S0(r,e)}function S0(r,e,t,i,a){dt(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=F.useContext(vi),{matches:u}=F.useContext(Zi),h=u[u.length-1],d=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let Y=v&&v.path||"";w0(g,!v||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let S=Pr(),I;if(e){let Y=typeof e=="string"?Dl(e):e;dt(y==="/"||Y.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),I=Y}else I=S;let R=I.pathname||"/",P=R;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");P="/"+R.replace(/^\//,"").split("/").slice(Y.length).join("/")}let V=p0(r,{pathname:P});_i(v||V!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),_i(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=zx(V&&V.map(Y=>Object.assign({},Y,{params:Object.assign({},d,Y.params),pathname:Ar([y,l.encodeLocation?l.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:Ar([y,l.encodeLocation?l.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),u,t,i,a);return e&&Q?F.createElement(Oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},Q):Q}function Lx(){let r=Gx(),e=xx(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:a},t):null,u)}var Mx=F.createElement(Lx,null),Ux=class extends F.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?F.createElement(Zi.Provider,{value:this.props.routeContext},F.createElement(By.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jx({routeContext:r,match:e,children:t}){let i=F.useContext(Ol);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Zi.Provider,{value:r},t)}function zx(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,u=t?.errors;if(u!=null){let g=l.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);dt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:S}=t,I=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||I){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((g,y,v)=>{let S,I=!1,R=null,P=null;t&&(S=u&&y.route.id?u[y.route.id]:void 0,R=y.route.errorElement||Mx,h&&(d<0&&v===0?(w0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,P=null):d===v&&(I=!0,P=y.route.hydrateFallbackElement||null)));let V=e.concat(l.slice(0,v+1)),Q=()=>{let Y;return S?Y=R:I?Y=P:y.route.Component?Y=F.createElement(y.route.Component,null):y.route.element?Y=y.route.element:Y=g,F.createElement(jx,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:Y})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?F.createElement(Ux,{location:t.location,revalidation:t.revalidation,component:R,error:S,children:Q(),routeContext:{outlet:null,matches:V,isDataRoute:!0},unstable_onError:i}):Q()},null)}function Fy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bx(r){let e=F.useContext(Ol);return dt(e,Fy(r)),e}function Fx(r){let e=F.useContext(Ud);return dt(e,Fy(r)),e}function qx(r){let e=F.useContext(Zi);return dt(e,Fy(r)),e}function qy(r){let e=qx(r),t=e.matches[e.matches.length-1];return dt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Hx(){return qy("useRouteId")}function Gx(){let r=F.useContext(By),e=Fx("useRouteError"),t=qy("useRouteError");return r!==void 0?r:e.errors?.[t]}function Kx(){let{router:r}=Bx("useNavigate"),e=qy("useNavigate"),t=F.useRef(!1);return b0(()=>{t.current=!0}),F.useCallback(async(a,l={})=>{_i(t.current,T0),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var Ob={};function w0(r,e,t){!e&&!Ob[r]&&(Ob[r]=!0,_i(!1,t))}F.memo($x);function $x({routes:r,future:e,state:t,unstable_onError:i}){return S0(r,void 0,t,i,e)}function Uf({to:r,replace:e,state:t,relative:i}){dt(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=F.useContext(vi);_i(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=F.useContext(Zi),{pathname:u}=Pr(),h=ei(),d=zy(r,jy(l),u,i==="path"),g=JSON.stringify(d);return F.useEffect(()=>{h(JSON.parse(g),{replace:e,state:t,relative:i})},[h,g,i,e,t]),null}function Qn(r){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qx({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){dt(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=F.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Dl(t));let{pathname:d="/",search:g="",hash:y="",state:v=null,key:S="default"}=t,I=F.useMemo(()=>{let R=Rr(d,u);return R==null?null:{location:{pathname:R,search:g,hash:y,state:v,key:S},navigationType:i}},[u,d,g,y,v,S,i]);return _i(I!=null,`<Router basename="${u}"> is not able to match the URL "${d}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:F.createElement(vi.Provider,{value:h},F.createElement(Oc.Provider,{children:e,value:I}))}function Yx({children:r,location:e}){return kx(Xp(r),e)}function Xp(r,e=[]){let t=[];return F.Children.forEach(r,(i,a)=>{if(!F.isValidElement(i))return;let l=[...e,a];if(i.type===F.Fragment){t.push.apply(t,Xp(i.props.children,l));return}dt(i.type===Qn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Xp(i.props.children,l)),t.push(u)}),t}var jf="get",zf="application/x-www-form-urlencoded";function jd(r){return r!=null&&typeof r.tagName=="string"}function Xx(r){return jd(r)&&r.tagName.toLowerCase()==="button"}function Wx(r){return jd(r)&&r.tagName.toLowerCase()==="form"}function Jx(r){return jd(r)&&r.tagName.toLowerCase()==="input"}function Zx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function eN(r,e){return r.button===0&&(!e||e==="_self")&&!Zx(r)}var Rf=null;function tN(){if(Rf===null)try{new FormData(document.createElement("form"),0),Rf=!1}catch{Rf=!0}return Rf}var nN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ip(r){return r!=null&&!nN.has(r)?(_i(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zf}"`),null):r}function iN(r,e){let t,i,a,l,u;if(Wx(r)){let h=r.getAttribute("action");i=h?Rr(h,e):null,t=r.getAttribute("method")||jf,a=Ip(r.getAttribute("enctype"))||zf,l=new FormData(r)}else if(Xx(r)||Jx(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||h.getAttribute("action");if(i=d?Rr(d,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||jf,a=Ip(r.getAttribute("formenctype"))||Ip(h.getAttribute("enctype"))||zf,l=new FormData(h,r),!tN()){let{name:g,type:y,value:v}=r;if(y==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,v)}}else{if(jd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jf,i=null,a=zf,u=r}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rN(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Rr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function sN(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aN(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function oN(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await sN(l,t);return u.links?u.links():[]}return[]}));return hN(i.flat(1).filter(aN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Pb(r,e,t,i,a,l){let u=(d,g)=>t[g]?d.route.id!==t[g].route.id:!0,h=(d,g)=>t[g].pathname!==d.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,g)=>u(d,g)||h(d,g)):l==="data"?e.filter((d,g)=>{let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,g)||h(d,g))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function lN(r,e,{includeHydrateFallback:t}={}){return uN(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function uN(r){return[...new Set(r)]}function cN(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function hN(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(cN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function A0(){let r=F.useContext(Ol);return Hy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function fN(){let r=F.useContext(Ud);return Hy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Gy=F.createContext(void 0);Gy.displayName="FrameworkContext";function I0(){let r=F.useContext(Gy);return Hy(r,"You must render this element inside a <HydratedRouter> element"),r}function dN(r,e){let t=F.useContext(Gy),[i,a]=F.useState(!1),[l,u]=F.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:g,onMouseLeave:y,onTouchStart:v}=e,S=F.useRef(null);F.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let P=Q=>{Q.forEach(Y=>{u(Y.isIntersecting)})},V=new IntersectionObserver(P,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[r]),F.useEffect(()=>{if(i){let P=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(P)}}},[i]);let I=()=>{a(!0)},R=()=>{a(!1),u(!1)};return t?r!=="intent"?[l,S,{}]:[l,S,{onFocus:Hu(h,I),onBlur:Hu(d,R),onMouseEnter:Hu(g,I),onMouseLeave:Hu(y,R),onTouchStart:Hu(v,I)}]:[!1,S,{}]}function Hu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function mN({page:r,...e}){let{router:t}=A0(),i=F.useMemo(()=>p0(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?F.createElement(pN,{page:r,matches:i,...e}):null}function gN(r){let{manifest:e,routeModules:t}=I0(),[i,a]=F.useState([]);return F.useEffect(()=>{let l=!1;return oN(r,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[r,e,t]),i}function pN({page:r,matches:e,...t}){let i=Pr(),{manifest:a,routeModules:l}=I0(),{basename:u}=A0(),{loaderData:h,matches:d}=fN(),g=F.useMemo(()=>Pb(r,e,d,a,i,"data"),[r,e,d,a,i]),y=F.useMemo(()=>Pb(r,e,d,a,i,"assets"),[r,e,d,a,i]),v=F.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let R=new Set,P=!1;if(e.forEach(Q=>{let Y=a.routes[Q.route.id];!Y||!Y.hasLoader||(!g.some(te=>te.route.id===Q.route.id)&&Q.route.id in h&&l[Q.route.id]?.shouldRevalidate||Y.hasClientLoader?P=!0:R.add(Q.route.id))}),R.size===0)return[];let V=rN(r,u,"data");return P&&R.size>0&&V.searchParams.set("_routes",e.filter(Q=>R.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[V.pathname+V.search]},[u,h,i,a,g,e,r,l]),S=F.useMemo(()=>lN(y,a),[y,a]),I=gN(y);return F.createElement(F.Fragment,null,v.map(R=>F.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),S.map(R=>F.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),I.map(({key:R,link:P})=>F.createElement("link",{key:R,nonce:t.nonce,...P})))}function yN(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var R0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R0&&(window.__reactRouterVersion="7.9.4")}catch{}function _N({basename:r,children:e,window:t}){let i=F.useRef();i.current==null&&(i.current=ax({window:t,v5Compat:!0}));let a=i.current,[l,u]=F.useState({action:a.action,location:a.location}),h=F.useCallback(d=>{F.startTransition(()=>u(d))},[u]);return F.useLayoutEffect(()=>a.listen(h),[a,h]),F.createElement(Qx,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:a})}var C0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zd=F.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:h,target:d,to:g,preventScrollReset:y,viewTransition:v,...S},I){let{basename:R}=F.useContext(vi),P=typeof g=="string"&&C0.test(g),V,Q=!1;if(typeof g=="string"&&P&&(V=g,R0))try{let N=new URL(window.location.href),M=g.startsWith("//")?new URL(N.protocol+g):new URL(g),L=Rr(M.pathname,R);M.origin===N.origin&&L!=null?g=L+M.search+M.hash:Q=!0}catch{_i(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=Px(g,{relative:a}),[te,ae,j]=dN(i,S),se=bN(g,{replace:u,state:h,target:d,preventScrollReset:y,relative:a,viewTransition:v});function x(N){e&&e(N),N.defaultPrevented||se(N)}let C=F.createElement("a",{...S,...j,href:V||Y,onClick:Q||l?e:x,ref:yN(I,ae),target:d,"data-discover":!P&&t==="render"?"true":void 0});return te&&!P?F.createElement(F.Fragment,null,C,F.createElement(mN,{page:Y})):C});zd.displayName="Link";var vN=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:h,children:d,...g},y){let v=Pc(u,{relative:g.relative}),S=Pr(),I=F.useContext(Ud),{navigator:R,basename:P}=F.useContext(vi),V=I!=null&&RN(v)&&h===!0,Q=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,Y=S.pathname,te=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),te=te?te.toLowerCase():null,Q=Q.toLowerCase()),te&&P&&(te=Rr(te,P)||te);const ae=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let j=Y===Q||!a&&Y.startsWith(Q)&&Y.charAt(ae)==="/",se=te!=null&&(te===Q||!a&&te.startsWith(Q)&&te.charAt(Q.length)==="/"),x={isActive:j,isPending:se,isTransitioning:V},C=j?e:void 0,N;typeof i=="function"?N=i(x):N=[i,j?"active":null,se?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(x):l;return F.createElement(zd,{...g,"aria-current":C,className:N,ref:y,style:M,to:u,viewTransition:h},typeof d=="function"?d(x):d)});vN.displayName="NavLink";var EN=F.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=jf,action:h,onSubmit:d,relative:g,preventScrollReset:y,viewTransition:v,...S},I)=>{let R=AN(),P=IN(h,{relative:g}),V=u.toLowerCase()==="get"?"get":"post",Q=typeof h=="string"&&C0.test(h),Y=te=>{if(d&&d(te),te.defaultPrevented)return;te.preventDefault();let ae=te.nativeEvent.submitter,j=ae?.getAttribute("formmethod")||u;R(ae||te.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:v})};return F.createElement("form",{ref:I,method:V,action:P,onSubmit:i?d:Y,...S,"data-discover":!Q&&r==="render"?"true":void 0})});EN.displayName="Form";function TN(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x0(r){let e=F.useContext(Ol);return dt(e,TN(r)),e}function bN(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=ei(),d=Pr(),g=Pc(r,{relative:l});return F.useCallback(y=>{if(eN(y,e)){y.preventDefault();let v=t!==void 0?t:mc(d)===mc(g);h(r,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[d,h,g,t,i,e,r,a,l,u])}var SN=0,wN=()=>`__${String(++SN)}__`;function AN(){let{router:r}=x0("useSubmit"),{basename:e}=F.useContext(vi),t=Hx();return F.useCallback(async(i,a={})=>{let{action:l,method:u,encType:h,formData:d,body:g}=iN(i,e);if(a.navigate===!1){let y=a.fetcherKey||wN();await r.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:g,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await r.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:g,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function IN(r,{relative:e}={}){let{basename:t}=F.useContext(vi),i=F.useContext(Zi);dt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Pc(r||".",{relative:e})},u=Pr();if(r==null){l.search=u.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ar([t,l.pathname])),mc(l)}function RN(r,{relative:e}={}){let t=F.useContext(E0);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=x0("useViewTransitionState"),a=Pc(r,{relative:e});if(!t.isTransitioning)return!1;let l=Rr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Rr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return id(a.pathname,u)!=null||id(a.pathname,l)!=null}const CN=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},xN=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],h=r[t++],d=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const l=r[t++],u=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,h=u?r[a+1]:0,d=a+2<r.length,g=d?r[a+2]:0,y=l>>2,v=(l&3)<<4|h>>4;let S=(h&15)<<2|g>>6,I=g&63;d||(I=64,u||(S=64)),i.push(t[y],t[v],t[S],t[I])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):xN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],h=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const v=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||h==null||g==null||v==null)throw new NN;const S=l<<2|h>>4;if(i.push(S),g!==64){const I=h<<4&240|g>>2;if(i.push(I),v!==64){const R=g<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class NN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DN=function(r){const e=N0(r);return D0.encodeByteArray(e,!0)},rd=function(r){return DN(r).replace(/\./g,"")},O0=function(r){try{return D0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=()=>P0().__FIREBASE_DEFAULTS__,PN=()=>{if(typeof process>"u"||typeof Vb>"u")return;const r=Vb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},VN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&O0(r[1]);return e&&JSON.parse(e)},Bd=()=>{try{return CN()||ON()||PN()||VN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},V0=r=>Bd()?.emulatorHosts?.[r],k0=r=>{const e=V0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},L0=()=>Bd()?.config,M0=r=>Bd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ky(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[rd(JSON.stringify(t)),rd(JSON.stringify(u)),""].join(".")}const rc={};function LN(){const r={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?r.emulator.push(e):r.prod.push(e);return r}function MN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let kb=!1;function $y(r,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||rc[r]===e||rc[r]||kb)return;rc[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=LN().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function d(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{kb=!0,u()},S}function y(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=MN(i),I=t("text"),R=document.getElementById(I)||document.createElement("span"),P=t("learnmore"),V=document.getElementById(P)||document.createElement("a"),Q=t("preprendIcon"),Y=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;h(te),y(V,P);const ae=g();d(Y,Q),te.append(Y,R,V,ae),document.body.appendChild(te)}l?(R.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function j0(){const r=Bd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FN(){const r=Ft();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function z0(){return!j0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B0(){return!j0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function F0(){try{return typeof indexedDB=="object"}catch{return!1}}function qN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="FirebaseError";class er extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=HN,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vc.prototype.create)}}class Vc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?GN(l,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new er(a,h,i)}}function GN(r,e){return r.replace(KN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const KN=/\{\$([^}]+)}/g;function $N(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ka(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],u=e[a];if(Lb(l)&&Lb(u)){if(!ka(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Lb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ju(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QN(r,e){const t=new YN(r,e);return t.subscribe.bind(t)}class YN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");XN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Rp),a.error===void 0&&(a.error=Rp),a.complete===void 0&&(a.complete=Rp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r){return r&&r._delegate?r._delegate:r}class Os{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZN(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JN(r){return r===ba?void 0:r}function ZN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const tD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},nD=je.INFO,iD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},rD=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=iD[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Qy=class{constructor(e){this.name=e,this._logLevel=nD,this._logHandler=rD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}};const sD=(r,e)=>e.some(t=>r instanceof t);let Mb,Ub;function aD(){return Mb||(Mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oD(){return Ub||(Ub=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q0=new WeakMap,Wp=new WeakMap,H0=new WeakMap,Cp=new WeakMap,Yy=new WeakMap;function lD(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(Rs(r.result)),a()},u=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&q0.set(t,r)}).catch(()=>{}),Yy.set(e,r),e}function uD(r){if(Wp.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Wp.set(r,e)}let Jp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||H0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function cD(r){Jp=r(Jp)}function hD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(xp(this),e,...t);return H0.set(i,e.sort?e.sort():[e]),Rs(i)}:oD().includes(r)?function(...e){return r.apply(xp(this),e),Rs(q0.get(this))}:function(...e){return Rs(r.apply(xp(this),e))}}function fD(r){return typeof r=="function"?hD(r):(r instanceof IDBTransaction&&uD(r),sD(r,aD())?new Proxy(r,Jp):r)}function Rs(r){if(r instanceof IDBRequest)return lD(r);if(Cp.has(r))return Cp.get(r);const e=fD(r);return e!==r&&(Cp.set(r,e),Yy.set(e,r)),e}const xp=r=>Yy.get(r);function dD(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),h=Rs(u);return i&&u.addEventListener("upgradeneeded",d=>{i(Rs(u.result),d.oldVersion,d.newVersion,Rs(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const mD=["get","getKey","getAll","getAllKeys","count"],gD=["put","add","delete","clear"],Np=new Map;function jb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=gD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||mD.includes(t)))return;const l=async function(u,...h){const d=this.transaction(u,a?"readwrite":"readonly");let g=d.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),a&&d.done]))[0]};return Np.set(e,l),l}cD(r=>({...r,get:(e,t,i)=>jb(e,t)||r.get(e,t,i),has:(e,t)=>!!jb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function yD(r){return r.getComponent()?.type==="VERSION"}const Zp="@firebase/app",zb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Qy("@firebase/app"),_D="@firebase/app-compat",vD="@firebase/analytics-compat",ED="@firebase/analytics",TD="@firebase/app-check-compat",bD="@firebase/app-check",SD="@firebase/auth",wD="@firebase/auth-compat",AD="@firebase/database",ID="@firebase/data-connect",RD="@firebase/database-compat",CD="@firebase/functions",xD="@firebase/functions-compat",ND="@firebase/installations",DD="@firebase/installations-compat",OD="@firebase/messaging",PD="@firebase/messaging-compat",VD="@firebase/performance",kD="@firebase/performance-compat",LD="@firebase/remote-config",MD="@firebase/remote-config-compat",UD="@firebase/storage",jD="@firebase/storage-compat",zD="@firebase/firestore",BD="@firebase/ai",FD="@firebase/firestore-compat",qD="firebase",HD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",GD={[Zp]:"fire-core",[_D]:"fire-core-compat",[ED]:"fire-analytics",[vD]:"fire-analytics-compat",[bD]:"fire-app-check",[TD]:"fire-app-check-compat",[SD]:"fire-auth",[wD]:"fire-auth-compat",[AD]:"fire-rtdb",[ID]:"fire-data-connect",[RD]:"fire-rtdb-compat",[CD]:"fire-fn",[xD]:"fire-fn-compat",[ND]:"fire-iid",[DD]:"fire-iid-compat",[OD]:"fire-fcm",[PD]:"fire-fcm-compat",[VD]:"fire-perf",[kD]:"fire-perf-compat",[LD]:"fire-rc",[MD]:"fire-rc-compat",[UD]:"fire-gcs",[jD]:"fire-gcs-compat",[zD]:"fire-fst",[FD]:"fire-fst-compat",[BD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map,KD=new Map,ty=new Map;function Bb(r,e){try{r.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function La(r){const e=r.name;if(ty.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,r);for(const t of sd.values())Bb(t,r);for(const t of KD.values())Bb(t,r);return!0}function Fd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Tn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Vc("app","Firebase",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=HD;function G0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:ey,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Cs.create("bad-app-name",{appName:String(a)});if(t||(t=L0()),!t)throw Cs.create("no-options");const l=sd.get(a);if(l){if(ka(t,l.options)&&ka(i,l.config))return l;throw Cs.create("duplicate-app",{appName:a})}const u=new eD(a);for(const d of ty.values())u.addComponent(d);const h=new QD(t,i,u);return sd.set(a,h),h}function Xy(r=ey){const e=sd.get(r);if(!e&&r===ey&&L0())return G0();if(!e)throw Cs.create("no-app",{appName:r});return e}function Ki(r,e,t){let i=GD[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(u.join(" "));return}La(new Os(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-heartbeat-database",XD=1,gc="firebase-heartbeat-store";let Dp=null;function K0(){return Dp||(Dp=dD(YD,XD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(gc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Cs.create("idb-open",{originalErrorMessage:r.message})})),Dp}async function WD(r){try{const t=(await K0()).transaction(gc),i=await t.objectStore(gc).get($0(r));return await t.done,i}catch(e){if(e instanceof er)Cr.warn(e.message);else{const t=Cs.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(t.message)}}}async function Fb(r,e){try{const i=(await K0()).transaction(gc,"readwrite");await i.objectStore(gc).put(e,$0(r)),await i.done}catch(t){if(t instanceof er)Cr.warn(t.message);else{const i=Cs.create("idb-set",{originalErrorMessage:t?.message});Cr.warn(i.message)}}}function $0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=1024,ZD=30;class eO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>ZD){const a=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Cr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qb(),{heartbeatsToSend:t,unsentEntries:i}=tO(this._heartbeatsCache.heartbeats),a=rd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Cr.warn(e),""}}}function qb(){return new Date().toISOString().substring(0,10)}function tO(r,e=JD){const t=[];let i=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Hb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Hb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class nO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F0()?qN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hb(r){return rd(JSON.stringify({version:2,heartbeats:r})).length}function iO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(r){La(new Os("platform-logger",e=>new pD(e),"PRIVATE")),La(new Os("heartbeat",e=>new eO(e),"PRIVATE")),Ki(Zp,zb,r),Ki(Zp,zb,"esm2020"),Ki("fire-js","")}rO("");function Q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sO=Q0,Y0=new Vc("auth","Firebase",Q0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Qy("@firebase/auth");function aO(r,...e){ad.logLevel<=je.WARN&&ad.warn(`Auth (${Wa}): ${r}`,...e)}function Bf(r,...e){ad.logLevel<=je.ERROR&&ad.error(`Auth (${Wa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...e){throw Jy(r,...e)}function yi(r,...e){return Jy(r,...e)}function Wy(r,e,t){const i={...sO(),[e]:t};return new Vc("auth","Firebase",i).create(e,{appName:r.name})}function Ir(r){return Wy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oO(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Jn(r,"argument-error"),Wy(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jy(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Y0.create(r,...e)}function be(r,e,...t){if(!r)throw Jy(e,...t)}function br(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Bf(e),new Error(e)}function xr(r,e){r||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){return typeof self<"u"&&self.location?.href||""}function lO(){return Gb()==="http:"||Gb()==="https:"}function Gb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lO()||zN()||"connection"in navigator)?navigator.onLine:!0}function cO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,xr(t>e,"Short delay should be less than long delay!"),this.isMobile=UN()||BN()}get(){return uO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(r,e){xr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dO=new Lc(3e4,6e4);function js(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vr(r,e,t,i,a={}){return W0(r,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const h=kc({key:r.config.apiKey,...u}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:d,...l};return jN()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Xa(r.emulatorConfig.host)&&(g.credentials="include"),X0.fetch()(await J0(r,r.config.apiHost,t,h),g)})}async function W0(r,e,t){r._canInitEmulator=!1;const i={...hO,...e};try{const a=new gO(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Cf(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[d,g]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cf(r,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Cf(r,"email-already-in-use",u);if(d==="USER_DISABLED")throw Cf(r,"user-disabled",u);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Wy(r,y,g);Jn(r,y)}}catch(a){if(a instanceof er)throw a;Jn(r,"network-request-failed",{message:String(a)})}}async function Mc(r,e,t,i,a={}){const l=await Vr(r,e,t,i,a);return"mfaPendingCredential"in l&&Jn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function J0(r,e,t,i){const a=`${e}${t}?${i}`,l=r,u=l.config.emulator?Zy(r.config,a):`${r.config.apiScheme}://${a}`;return fO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function mO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yi(this.auth,"network-request-failed")),dO.get())})}}function Cf(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=yi(r,e,i);return a.customData._tokenResponse=t,a}function Kb(r){return r!==void 0&&r.enterprise!==void 0}class pO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yO(r,e){return Vr(r,"GET","/v2/recaptchaConfig",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(r,e){return Vr(r,"POST","/v1/accounts:delete",e)}async function od(r,e){return Vr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vO(r,e=!1){const t=Et(r),i=await t.getIdToken(e),a=e_(i);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:sc(Op(a.auth_time)),issuedAtTime:sc(Op(a.iat)),expirationTime:sc(Op(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Op(r){return Number(r)*1e3}function e_(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const a=O0(t);return a?JSON.parse(a):(Bf("Failed to decode base64 JWT payload"),null)}catch(a){return Bf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function $b(r){const e=e_(r);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof er&&EO(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function EO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(r){const e=r.auth,t=await r.getIdToken(),i=await gl(r,od(e,{idToken:t}));be(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?Z0(a.providerUserInfo):[],u=SO(r.providerData,l),h=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!u?.length,g=h?d:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new iy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,y)}async function bO(r){const e=Et(r);await ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SO(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Z0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(r,e){const t=await W0(r,{},async()=>{const i=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await J0(r,a,"/v1/token",`key=${l}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return r.emulatorConfig&&Xa(r.emulatorConfig.host)&&(d.credentials="include"),X0.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AO(r,e){return Vr(r,"POST","/v2/accounts:revokeToken",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await wO(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new ul;return i&&(be(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(be(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(r,e){be(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new TO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new iy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await gl(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vO(this,e)}reload(){return bO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ld(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await gl(this,_O(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:I,providerData:R,stsTokenManager:P}=t;be(v&&P,e,"internal-error");const V=ul.fromJSON(this.name,P);be(typeof v=="string",e,"internal-error"),_s(i,e.name),_s(a,e.name),be(typeof S=="boolean",e,"internal-error"),be(typeof I=="boolean",e,"internal-error"),_s(l,e.name),_s(u,e.name),_s(h,e.name),_s(d,e.name),_s(g,e.name),_s(y,e.name);const Q=new gi({uid:v,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:V,createdAt:g,lastLoginAt:y});return R&&Array.isArray(R)&&(Q.providerData=R.map(Y=>({...Y}))),d&&(Q._redirectEventId=d),Q}static async _fromIdTokenResponse(e,t,i=!1){const a=new ul;a.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await ld(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Z0(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,h=new ul;h.updateFromIdToken(i);const d=new gi({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new iy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,g),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Map;function Sr(r){xr(r instanceof Function,"Expected a class definition");let e=Qb.get(r);return e?(xr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Qb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eA.type="NONE";const Yb=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(r,e,t){return`firebase:${r}:${e}:${t}`}class cl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Ff(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ff("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await od(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new cl(Sr(Yb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Sr(Yb);const u=Ff(i,e.config.apiKey,e.name);let h=null;for(const g of t)try{const y=await g._get(u);if(y){let v;if(typeof y=="string"){const S=await od(e,{idToken:y}).catch(()=>{});if(!S)break;v=await gi._fromGetAccountInfoResponse(e,S,y)}else v=gi._fromJSON(e,y);g!==l&&(h=v),l=g;break}}catch{}const d=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new cl(l,e,i):(l=d[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new cl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aA(e))return"Blackberry";if(oA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(sA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function tA(r=Ft()){return/firefox\//i.test(r)}function nA(r=Ft()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(r=Ft()){return/crios\//i.test(r)}function rA(r=Ft()){return/iemobile/i.test(r)}function sA(r=Ft()){return/android/i.test(r)}function aA(r=Ft()){return/blackberry/i.test(r)}function oA(r=Ft()){return/webos/i.test(r)}function t_(r=Ft()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IO(r=Ft()){return t_(r)&&!!window.navigator?.standalone}function RO(){return FN()&&document.documentMode===10}function lA(r=Ft()){return t_(r)||sA(r)||oA(r)||aA(r)||/windows phone/i.test(r)||rA(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(r,e=[]){let t;switch(r){case"Browser":t=Xb(Ft());break;case"Worker":t=`${Xb(Ft())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,h)=>{try{const d=e(l);u(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(r,e={}){return Vr(r,"GET","/v2/passwordPolicy",js(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=6;class DO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??NO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new CO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await od(this,{idToken:e}),i=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ld(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Ir(this));const t=e?Et(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xO(this),t=new DO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await AO(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,a);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zs(r){return Et(r)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(r){qd=r}function cA(r){return qd.loadJS(r)}function VO(){return qd.recaptchaEnterpriseScript}function kO(){return qd.gapiScript}function LO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class MO{constructor(){this.enterprise=new UO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jO="recaptcha-enterprise",hA="NO_RECAPTCHA";class zO{constructor(e){this.type=jO,this.auth=zs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{yO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new pO(d);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(d=>{h(d)})})}function a(l,u,h){const d=window.grecaptcha;Kb(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(hA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MO().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(h=>{if(!t&&Kb(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=VO();d.length!==0&&(d+=h),cA(d).then(()=>{a(h,l,u)}).catch(g=>{u(g)})}}).catch(h=>{u(h)})})}}async function Jb(r,e,t,i=!1,a=!1){const l=new zO(r);let u;if(a)u=hA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ry(r,e,t,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Jb(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Jb(r,e,t,t==="getOobCode");return i(r,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(r,e){const t=Fd(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ka(l,e??{}))return a;Jn(a,"already-initialized")}return t.initialize({options:e})}function FO(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function qO(r,e,t){const i=zs(r);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=fA(e),{host:u,port:h}=HO(e),d=h===null?"":`:${h}`,g={url:`${l}//${u}${d}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(ka(g,i.config.emulator)&&ka(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Xa(u)?(Ky(`${l}//${u}${d}`),$y("Auth",!0)):GO()}function fA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function HO(r){const e=fA(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Zb(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:Zb(u)}}}function Zb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function GO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,t){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function KO(r,e){return Vr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(r,e){return Mc(r,"POST","/v1/accounts:signInWithPassword",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(r,e){return Mc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}async function YO(r,e){return Mc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends n_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new pc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new pc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,t,"signInWithPassword",$O);case"emailLink":return QO(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,i,"signUpPassword",KO);case"emailLink":return YO(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r,e){return Mc(r,"POST","/v1/accounts:signInWithIdp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="http://localhost";class Ma extends n_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new Ma(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return hl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,hl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hl(e,t)}buildRequest(){const e={requestUri:XO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JO(r){const e=Wu(Ju(r)).link,t=e?Wu(Ju(e)).deep_link_id:null,i=Wu(Ju(r)).deep_link_id;return(i?Wu(Ju(i)).link:null)||i||t||e||r}class i_{constructor(e){const t=Wu(Ju(e)),i=t.apiKey??null,a=t.oobCode??null,l=WO(t.mode??null);be(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=JO(e);try{return new i_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,t){return pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=i_.parseLink(t);return be(i,"argument-error"),pc._fromEmailAndCode(e,i.code,i.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends r_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Uc{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ma._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Tr.credential(t,i)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Uc{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Uc{constructor(){super("twitter.com")}static credential(e,t){return Ma._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ws.credential(t,i)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(r,e){return Mc(r,"POST","/v1/accounts:signUp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await gi._fromIdTokenResponse(e,i,a),u=eS(i);return new Ua({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=eS(i);return new Ua({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function eS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends er{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ud.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ud(e,t,i,a)}}function dA(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ud._fromErrorAndOperation(r,l,e,i):l})}async function e2(r,e,t=!1){const i=await gl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ua._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(r,e,t=!1){const{auth:i}=r;if(Tn(i.app))return Promise.reject(Ir(i));const a="reauthenticate";try{const l=await gl(r,dA(i,a,e,r),t);be(l.idToken,i,"internal-error");const u=e_(l.idToken);be(u,i,"internal-error");const{sub:h}=u;return be(r.uid===h,i,"user-mismatch"),Ua._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Jn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(r,e,t=!1){if(Tn(r.app))return Promise.reject(Ir(r));const i="signIn",a=await dA(r,i,e),l=await Ua._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function n2(r,e){return mA(zs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(r){const e=zs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function i2(r,e,t){if(Tn(r.app))return Promise.reject(Ir(r));const i=zs(r),u=await ry(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&gA(r),d}),h=await Ua._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function r2(r,e,t){return Tn(r.app)?Promise.reject(Ir(r)):n2(Et(r),Vl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gA(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(r,e){return Vr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Et(r),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await gl(i,s2(i.auth,l));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(r,e){return Et(r).setPersistence(e)}function l2(r,e,t,i){return Et(r).onIdTokenChanged(e,t,i)}function u2(r,e,t){return Et(r).beforeAuthStateChanged(e,t)}function c2(r,e,t,i){return Et(r).onAuthStateChanged(e,t,i)}function h2(r){return Et(r).signOut()}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1e3,d2=10;class yA extends pA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);RO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,d2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},f2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const _A=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends pA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vA.type="SESSION";const EA=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Hd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async g=>g(t.origin,l)),d=await m2(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,d)=>{const g=s_("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const S=v;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function p2(r){$i().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function y2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _2(){return navigator?.serviceWorker?.controller||null}function v2(){return TA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",E2=1,hd="firebaseLocalStorage",SA="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gd(r,e){return r.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function T2(){const r=indexedDB.deleteDatabase(bA);return new jc(r).toPromise()}function sy(){const r=indexedDB.open(bA,E2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(hd,{keyPath:SA})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(hd)?e(i):(i.close(),await T2(),e(await sy()))})})}async function tS(r,e,t){const i=Gd(r,!0).put({[SA]:e,value:t});return new jc(i).toPromise()}async function b2(r,e){const t=Gd(r,!1).get(e),i=await new jc(t).toPromise();return i===void 0?null:i.value}function nS(r,e){const t=Gd(r,!0).delete(e);return new jc(t).toPromise()}const S2=800,w2=3;class wA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>w2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hd._getInstance(v2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await y2(),!this.activeServiceWorker)return;this.sender=new g2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await tS(e,cd,"1"),await nS(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>b2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Gd(a,!1).getAll();return new jc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wA.type="LOCAL";const A2=wA;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(r,e){return e?Sr(e):(be(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends n_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function I2(r){return mA(r.auth,new a_(r),r.bypassAuthState)}function R2(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),t2(t,new a_(r),r.bypassAuthState)}async function C2(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),e2(t,new a_(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I2;case"linkViaPopup":case"linkViaRedirect":return C2;case"reauthViaPopup":case"reauthViaRedirect":return R2;default:Jn(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Lc(2e3,1e4);async function N2(r,e,t){if(Tn(r.app))return Promise.reject(yi(r,"operation-not-supported-in-this-environment"));const i=zs(r);oO(r,e,r_);const a=AA(i,t);return new xa(i,"signInViaPopup",e,a).executeNotNull()}class xa extends IA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=s_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x2.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="pendingRedirect",qf=new Map;class O2 extends IA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{const i=await P2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P2(r,e){const t=L2(e),i=k2(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function V2(r,e){qf.set(r._key(),e)}function k2(r){return Sr(r._redirectPersistence)}function L2(r){return Ff(D2,r.config.apiKey,r.name)}async function M2(r,e,t=!1){if(Tn(r.app))return Promise.reject(Ir(r));const i=zs(r),a=AA(i,e),u=await new O2(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=600*1e3;class j2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!RA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U2&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}}function iS(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function RA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function z2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RA(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(r,e={}){return Vr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q2=/^https?/;async function H2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await B2(r);for(const t of e)try{if(G2(t))return}catch{}Jn(r,"unauthorized-domain")}function G2(r){const e=ny(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!q2.test(t))return!1;if(F2.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Lc(3e4,6e4);function rS(){const r=$i().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function $2(r){return new Promise((e,t)=>{function i(){rS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rS(),t(yi(r,"network-request-failed"))},timeout:K2.get()})}if($i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($i().gapi?.load)i();else{const a=LO("iframefcb");return $i()[a]=()=>{gapi.load?i():t(yi(r,"network-request-failed"))},cA(`${kO()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function Q2(r){return Hf=Hf||$2(r),Hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Lc(5e3,15e3),X2="__/auth/iframe",W2="emulator/auth/iframe",J2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eP(r){const e=r.config;be(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zy(e,W2):`https://${r.config.authDomain}/${X2}`,i={apiKey:e.apiKey,appName:r.name,v:Wa},a=Z2.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${kc(i).slice(1)}`}async function tP(r){const e=await Q2(r),t=$i().gapi;return be(t,r,"internal-error"),e.open({where:document.body,url:eP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J2,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=yi(r,"network-request-failed"),h=$i().setTimeout(()=>{l(u)},Y2.get());function d(){$i().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iP=500,rP=600,sP="_blank",aP="http://localhost";class sS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oP(r,e,t,i=iP,a=rP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...nP,width:i.toString(),height:a.toString(),top:l,left:u},g=Ft().toLowerCase();t&&(h=iA(g)?sP:t),tA(g)&&(e=e||aP,d.scrollbars="yes");const y=Object.entries(d).reduce((S,[I,R])=>`${S}${I}=${R},`,"");if(IO(g)&&h!=="_self")return lP(e||"",h),new sS(null);const v=window.open(e||"",h,y);be(v,r,"popup-blocked");try{v.focus()}catch{}return new sS(v)}function lP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="__/auth/handler",cP="emulator/auth/handler",hP=encodeURIComponent("fac");async function aS(r,e,t,i,a,l){be(r.config.authDomain,r,"auth-domain-config-required"),be(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Wa,eventId:a};if(e instanceof r_){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",$N(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof Uc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}r.tenantId&&(u.tid=r.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await r._getAppCheckToken(),g=d?`#${hP}=${encodeURIComponent(d)}`:"";return`${fP(r)}?${kc(h).slice(1)}${g}`}function fP({config:r}){return r.emulator?Zy(r,cP):`https://${r.authDomain}/${uP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="webStorageSupport";class dP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EA,this._completeRedirectFn=M2,this._overrideRedirectResult=V2}async _openPopup(e,t,i,a){xr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await aS(e,t,i,ny(),a);return oP(e,l,s_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await aS(e,t,i,ny(),a);return p2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(xr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await tP(e),i=new j2(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pp,{type:Pp},a=>{const l=a?.[0]?.[Pp];l!==void 0&&t(!!l),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lA()||nA()||t_()}}const mP=dP;var oS="@firebase/auth",lS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yP(r){La(new Os("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;be(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uA(r)},g=new OO(i,a,l,d);return FO(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),La(new Os("auth-internal",e=>{const t=zs(e.getProvider("auth").getImmediate());return(i=>new gP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(oS,lS,pP(r)),Ki(oS,lS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=300,vP=M0("authIdTokenMaxAge")||_P;let uS=null;const EP=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>vP)return;const a=t?.token;uS!==a&&(uS=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TP(r=Xy()){const e=Fd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=BO(r,{popupRedirectResolver:mP,persistence:[A2,_A,EA]}),i=M0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=EP(l.toString());u2(t,u,()=>u(t.currentUser)),l2(t,h=>u(h))}}const a=V0("auth");return a&&qO(t,`http://${a}`),t}function bP(){return document.getElementsByTagName("head")?.[0]??document}PO({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=yi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",bP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yP("Browser");var SP="firebase",wP="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki(SP,wP,"app");var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,CA;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function N(){}N.prototype=C.prototype,x.F=C.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(M,L,B){for(var D=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)D[Le-2]=arguments[Le];return C.prototype[L].apply(M,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,C,N){N||(N=0);const M=Array(16);if(typeof C=="string")for(var L=0;L<16;++L)M[L]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(L=0;L<16;++L)M[L]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=x.g[0],N=x.g[1],L=x.g[2];let B=x.g[3],D;D=C+(B^N&(L^B))+M[0]+3614090360&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+M[1]+3905402710&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+M[2]+606105819&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+M[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+M[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+M[5]+1200080426&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+M[6]+2821735955&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+M[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+M[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+M[9]+2336552879&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+M[10]+4294925233&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+M[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+M[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+M[13]+4254626195&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+M[14]+2792965006&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+M[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(L^B&(N^L))+M[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+M[6]+3225465664&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+M[11]+643717713&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+M[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+M[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+M[10]+38016083&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+M[15]+3634488961&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+M[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+M[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+M[14]+3275163606&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+M[3]+4107603335&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+M[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+M[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+M[2]+4243563512&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+M[7]+1735328473&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+M[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(N^L^B)+M[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+M[8]+2272392833&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+M[11]+1839030562&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+M[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+M[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+M[4]+1272893353&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+M[7]+4139469664&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+M[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+M[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+M[0]+3936430074&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+M[3]+3572445317&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+M[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+M[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+M[12]+3873151461&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+M[15]+530742520&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+M[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(L^(N|~B))+M[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+M[7]+1126891415&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+M[14]+2878612391&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+M[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+M[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+M[3]+2399980690&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+M[10]+4293915773&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+M[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+M[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+M[15]+4264355552&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+M[6]+2734768916&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+M[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+M[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+M[11]+3174756917&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+M[2]+718787259&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+B&4294967295}i.prototype.v=function(x,C){C===void 0&&(C=x.length);const N=C-this.blockSize,M=this.C;let L=this.h,B=0;for(;B<C;){if(L==0)for(;B<=N;)a(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<C;)if(M[L++]=x.charCodeAt(B++),L==this.blockSize){a(this,M),L=0;break}}else for(;B<C;)if(M[L++]=x[B++],L==this.blockSize){a(this,M),L=0;break}}this.h=L,this.o+=C},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;C=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=C&255,C/=256;for(this.v(x),x=Array(16),C=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)x[C++]=this.g[N]>>>M&255;return x};function l(x,C){var N=h;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=C(x)}function u(x,C){this.h=C;const N=[];let M=!0;for(let L=x.length-1;L>=0;L--){const B=x[L]|0;M&&B==C||(N[L]=B,M=!1)}this.g=N}var h={};function d(x){return-128<=x&&x<128?l(x,function(C){return new u([C|0],C<0?-1:0)}):new u([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return V(g(-x));const C=[];let N=1;for(let M=0;x>=N;M++)C[M]=x/N|0,N*=4294967296;return new u(C,0)}function y(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return V(y(x.substring(1),C));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(C,8));let M=v;for(let B=0;B<x.length;B+=8){var L=Math.min(8,x.length-B);const D=parseInt(x.substring(B,B+L),C);L<8?(L=g(Math.pow(C,L)),M=M.j(L).add(g(D))):(M=M.j(N),M=M.add(g(D)))}return M}var v=d(0),S=d(1),I=d(16777216);r=u.prototype,r.m=function(){if(P(this))return-V(this).m();let x=0,C=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);x+=(M>=0?M:4294967296+M)*C,C*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(P(this))return"-"+V(this).toString(x);const C=g(Math.pow(x,6));var N=this;let M="";for(;;){const L=ae(N,C).g;N=Q(N,L.j(C));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=L,R(N))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(let C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function P(x){return x.h==-1}r.l=function(x){return x=Q(this,x),P(x)?-1:R(x)?0:1};function V(x){const C=x.g.length,N=[];for(let M=0;M<C;M++)N[M]=~x.g[M];return new u(N,~x.h).add(S)}r.abs=function(){return P(this)?V(this):this},r.add=function(x){const C=Math.max(this.g.length,x.g.length),N=[];let M=0;for(let L=0;L<=C;L++){let B=M+(this.i(L)&65535)+(x.i(L)&65535),D=(B>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);M=D>>>16,B&=65535,D&=65535,N[L]=D<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function Q(x,C){return x.add(V(C))}r.j=function(x){if(R(this)||R(x))return v;if(P(this))return P(x)?V(this).j(V(x)):V(V(this).j(x));if(P(x))return V(this.j(V(x)));if(this.l(I)<0&&x.l(I)<0)return g(this.m()*x.m());const C=this.g.length+x.g.length,N=[];for(var M=0;M<2*C;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let L=0;L<x.g.length;L++){const B=this.i(M)>>>16,D=this.i(M)&65535,Le=x.i(L)>>>16,pt=x.i(L)&65535;N[2*M+2*L]+=D*pt,Y(N,2*M+2*L),N[2*M+2*L+1]+=B*pt,Y(N,2*M+2*L+1),N[2*M+2*L+1]+=D*Le,Y(N,2*M+2*L+1),N[2*M+2*L+2]+=B*Le,Y(N,2*M+2*L+2)}for(x=0;x<C;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=C;x<2*C;x++)N[x]=0;return new u(N,0)};function Y(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function te(x,C){this.g=x,this.h=C}function ae(x,C){if(R(C))throw Error("division by zero");if(R(x))return new te(v,v);if(P(x))return C=ae(V(x),C),new te(V(C.g),V(C.h));if(P(C))return C=ae(x,V(C)),new te(V(C.g),C.h);if(x.g.length>30){if(P(x)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var N=S,M=C;M.l(x)<=0;)N=j(N),M=j(M);var L=se(N,1),B=se(M,1);for(M=se(M,2),N=se(N,2);!R(M);){var D=B.add(M);D.l(x)<=0&&(L=L.add(N),B=D),M=se(M,1),N=se(N,1)}return C=Q(x,L.j(C)),new te(L,C)}for(L=v;x.l(C)>=0;){for(N=Math.max(1,Math.floor(x.m()/C.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=g(N),D=B.j(C);P(D)||D.l(x)>0;)N-=M,B=g(N),D=B.j(C);R(B)&&(B=S),L=L.add(B),x=Q(x,D)}return new te(L,x)}r.B=function(x){return ae(this,x).h},r.and=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)&x.i(M);return new u(N,this.h&x.h)},r.or=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)|x.i(M);return new u(N,this.h|x.h)},r.xor=function(x){const C=Math.max(this.g.length,x.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)^x.i(M);return new u(N,this.h^x.h)};function j(x){const C=x.g.length+1,N=[];for(let M=0;M<C;M++)N[M]=x.i(M)<<1|x.i(M-1)>>>31;return new u(N,x.h)}function se(x,C){const N=C>>5;C%=32;const M=x.g.length-N,L=[];for(let B=0;B<M;B++)L[B]=C>0?x.i(B+N)>>>C|x.i(B+N+1)<<32-C:x.i(B+N);return new u(L,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,CA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,xs=u}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,Zu,NA,Gf,ay,DA,OA,PA;(function(){var r,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof xf=="object"&&xf];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(f,_){if(_)e:{var T=i;f=f.split(".");for(var A=0;A<f.length-1;A++){var H=f[A];if(!(H in T))break e;T=T[H]}f=f[f.length-1],A=T[f],_=_(A),_!=A&&_!=null&&e(T,f,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(_){var T=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&T.push([A,_[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,T){return f.call.apply(f.bind,arguments)}function g(f,_,T){return g=d,g.apply(null,arguments)}function y(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function v(f,_){function T(){}T.prototype=_.prototype,f.Z=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(A,H,X){for(var ce=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ce[Ce-2]=arguments[Ce];return _.prototype[H].apply(A,ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function I(f){const _=f.length;if(_>0){const T=Array(_);for(let A=0;A<_;A++)T[A]=f[A];return T}return[]}function R(f,_){for(let A=1;A<arguments.length;A++){const H=arguments[A];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=f.length||0;const X=H.length||0;f.length=T+X;for(let ce=0;ce<X;ce++)f[T+ce]=H[ce]}else f.push(H)}}class P{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function V(f){u.setTimeout(()=>{throw f},0)}function Q(){var f=x;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class Y{constructor(){this.h=this.g=null}add(_,T){const A=te.get();A.set(_,T),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new P(()=>new ae,f=>f.reset());class ae{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let j,se=!1,x=new Y,C=()=>{const f=Promise.resolve(void 0);j=()=>{f.then(N)}};function N(){for(var f;f=Q();){try{f.h.call(f.g)}catch(T){V(T)}var _=te;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}se=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,_),u.removeEventListener("test",T,_)}catch{}return f})();function D(f){return/^[\s\xa0]*$/.test(f)}function Le(f,_){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}v(Le,L),Le.prototype.init=function(f,_){const T=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),J=0;function ue(f,_,T,A,H){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!A,this.ha=H,this.key=++J,this.da=this.fa=!1}function ye(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Pe(f,_,T){for(const A in f)_.call(T,f[A],A,f)}function He(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function k(f){const _={};for(const T in f)_[T]=f[T];return _}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(f,_){let T,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(T in A)f[T]=A[T];for(let X=0;X<ne.length;X++)T=ne[X],Object.prototype.hasOwnProperty.call(A,T)&&(f[T]=A[T])}}function de(f){this.src=f,this.g={},this.h=0}de.prototype.add=function(f,_,T,A,H){const X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);const ce=Ne(f,_,A,H);return ce>-1?(_=f[ce],T||(_.fa=!1)):(_=new ue(_,this.src,X,!!A,H),_.fa=T,f.push(_)),_};function Se(f,_){const T=_.type;if(T in f.g){var A=f.g[T],H=Array.prototype.indexOf.call(A,_,void 0),X;(X=H>=0)&&Array.prototype.splice.call(A,H,1),X&&(ye(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Ne(f,_,T,A){for(let H=0;H<f.length;++H){const X=f[H];if(!X.da&&X.listener==_&&X.capture==!!T&&X.ha==A)return H}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),jt={};function ut(f,_,T,A,H){if(Array.isArray(_)){for(let X=0;X<_.length;X++)ut(f,_[X],T,A,H);return null}return T=zl(T),f&&f[pt]?f.J(_,T,h(A)?!!A.capture:!1,H):Hs(f,_,T,!1,A,H)}function Hs(f,_,T,A,H,X){if(!_)throw Error("Invalid event type");const ce=h(H)?!!H.capture:!!H;let Ce=Gs(f);if(Ce||(f[Fe]=Ce=new de(f)),T=Ce.add(_,T,A,ce,X),T.proxy)return T;if(A=to(),T.proxy=A,A.src=f,A.listener=T,f.addEventListener)B||(H=ce),H===void 0&&(H=!1),f.addEventListener(_.toString(),A,H);else if(f.attachEvent)f.attachEvent(Ei(_.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function to(){function f(T){return _.call(f.src,f.listener,T)}const _=Ul;return f}function no(f,_,T,A,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)no(f,_[X],T,A,H);else A=h(A)?!!A.capture:!!A,T=zl(T),f&&f[pt]?(f=f.i,X=String(_).toString(),X in f.g&&(_=f.g[X],T=Ne(_,T,A,H),T>-1&&(ye(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete f.g[X],f.h--)))):f&&(f=Gs(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Ne(_,T,A,H)),(T=f>-1?_[f]:null)&&io(T))}function io(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[pt])Se(_.i,f);else{var T=f.type,A=f.proxy;_.removeEventListener?_.removeEventListener(T,A,f.capture):_.detachEvent?_.detachEvent(Ei(T),A):_.addListener&&_.removeListener&&_.removeListener(A),(T=Gs(_))?(Se(T,f),T.h==0&&(T.src=null,_[Fe]=null)):ye(f)}}}function Ei(f){return f in jt?jt[f]:jt[f]="on"+f}function Ul(f,_){if(f.da)f=!0;else{_=new Le(_,this);const T=f.listener,A=f.ha||f.src;f.fa&&io(f),f=T.call(A,_)}return f}function Gs(f){return f=f[Fe],f instanceof de?f:null}var jl="__closure_events_fn_"+(Math.random()*1e9>>>0);function zl(f){return typeof f=="function"?f:(f[jl]||(f[jl]=function(_){return f.handleEvent(_)}),f[jl])}function It(){M.call(this),this.i=new de(this),this.M=this,this.G=null}v(It,M),It.prototype[pt]=!0,It.prototype.removeEventListener=function(f,_,T,A){no(this,f,_,T,A)};function zt(f,_){var T,A=f.G;if(A)for(T=[];A;A=A.G)T.push(A);if(f=f.M,A=_.type||_,typeof _=="string")_=new L(_,f);else if(_ instanceof L)_.target=_.target||f;else{var H=_;_=new L(A,f),he(_,H)}H=!0;let X,ce;if(T)for(ce=T.length-1;ce>=0;ce--)X=_.g=T[ce],H=jr(X,A,!0,_)&&H;if(X=_.g=f,H=jr(X,A,!0,_)&&H,H=jr(X,A,!1,_)&&H,T)for(ce=0;ce<T.length;ce++)X=_.g=T[ce],H=jr(X,A,!1,_)&&H}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const T=f.g[_];for(let A=0;A<T.length;A++)ye(T[A]);delete f.g[_],f.h--}}this.G=null},It.prototype.J=function(f,_,T,A){return this.i.add(String(f),_,!1,T,A)},It.prototype.K=function(f,_,T,A){return this.i.add(String(f),_,!0,T,A)};function jr(f,_,T,A){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let H=!0;for(let X=0;X<_.length;++X){const ce=_[X];if(ce&&!ce.da&&ce.capture==T){const Ce=ce.listener,bt=ce.ha||ce.src;ce.fa&&Se(f.i,ce),H=Ce.call(bt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Tm(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(f,_||0)}function Wc(f){f.g=Tm(()=>{f.g=null,f.i&&(f.i=!1,Wc(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class un extends M{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Wc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(f){M.call(this),this.h=f,this.g={}}v(Ks,M);var Bl=[];function Fl(f){Pe(f.g,function(_,T){this.g.hasOwnProperty(T)&&io(_)},f),f.g={}}Ks.prototype.N=function(){Ks.Z.N.call(this),Fl(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=u.JSON.stringify,bm=u.JSON.parse,Jc=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Zc(){}function eh(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){L.call(this,"d")}v(Qt,L);function kn(){L.call(this,"c")}v(kn,L);var Tt={},th=null;function ro(){return th=th||new It}Tt.Ia="serverreachability";function nh(f){L.call(this,Tt.Ia,f)}v(nh,L);function Ti(f){const _=ro();zt(_,new nh(_))}Tt.STAT_EVENT="statevent";function $s(f,_){L.call(this,Tt.STAT_EVENT,f),this.stat=_}v($s,L);function Rt(f){const _=ro();zt(_,new $s(_,f))}Tt.Ja="timingevent";function bi(f,_){L.call(this,Tt.Ja,f),this.size=_}v(bi,L);function Si(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},_)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Sm(f,_,T,A,H,X){f.info(function(){if(f.g)if(X){var ce="",Ce=X.split("&");for(let Qe=0;Qe<Ce.length;Qe++){var bt=Ce[Qe].split("=");if(bt.length>1){const ct=bt[0];bt=bt[1];const jn=ct.split("_");ce=jn.length>=2&&jn[1]=="type"?ce+(ct+"="+bt+"&"):ce+(ct+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+`
`+T+`
`+ce})}function ih(f,_,T,A,H,X,ce){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+`
`+T+`
`+X+" "+ce})}function wi(f,_,T,A){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+wm(f,T)+(A?" "+A:"")})}function Qs(f,_){f.info(function(){return"TIMEOUT: "+_})}ni.prototype.info=function(){};function wm(f,_){if(!f.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(f=0;f<X.length;f++)if(Array.isArray(X[f])){var T=X[f];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ce=1;ce<A.length;ce++)A[ce]=""}}}}return zr(X)}catch{return _}}var Ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hl;function Xs(){}v(Xs,Zc),Xs.prototype.g=function(){return new XMLHttpRequest},Hl=new Xs;function nr(f){return encodeURIComponent(String(f))}function rh(f){var _=1;f=f.split(":");const T=[];for(;_>0&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function ii(f,_,T,A){this.j=f,this.i=_,this.l=T,this.S=A||1,this.V=new Ks(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Ct={},Ht={};function Ai(f,_,T){f.M=1,f.A=Ws(Nt(_)),f.u=T,f.R=!0,so(f,null)}function so(f,_){f.F=Date.now(),Ii(f),f.B=Nt(f.A);var T=f.B,A=f.S;Array.isArray(A)||(A=[String(A)]),uo(T.i,"t",A),f.C=0,T=f.j.L,f.h=new ri,f.g=vh(f.j,T?_:null,!f.u),f.P>0&&(f.O=new un(g(f.Y,f,f.g),f.P)),_=f.V,T=f.g,A=f.ba;var H="readystatechange";Array.isArray(H)||(H&&(Bl[0]=H.toString()),H=Bl);for(let X=0;X<H.length;X++){const ce=ut(T,H[X],A||_.handleEvent,!1,_.h||_);if(!ce)break;_.g[ce.key]=ce}_=f.J?k(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Ti(),Sm(f.i,f.v,f.B,f.l,f.S,f.u)}ii.prototype.ba=function(f){f=f.target;const _=this.O;_&&oi(f)==3?_.j():this.Y(f)},ii.prototype.Y=function(f){try{if(f==this.g)e:{const Ce=oi(this.g),bt=this.g.ya(),Qe=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ce!=4||bt==7||(bt==8||Qe<=0?Ti(3):Ti(2)),Ri(this);var _=this.g.ca();this.X=_;var T=Am(this);if(this.o=_==200,ih(this.i,this.v,this.B,this.l,this.S,Ce,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var X=A;break t}}X=null}if(f=X)wi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,f);else{this.o=!1,this.m=3,Rt(12),Sn(this),Ln(this);break e}}if(this.R){f=!0;let ct;for(;!this.K&&this.C<T.length;)if(ct=ah(this,T),ct==Ht){Ce==4&&(this.m=4,Rt(14),f=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Ct){this.m=4,Rt(15),wi(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else wi(this.i,this.l,ct,null),Ci(this,ct);if(sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||T.length!=0||this.h.h||(this.m=1,Rt(16),f=!1),this.o=this.o&&f,!f)wi(this.i,this.l,T,"[Invalid Chunked Response]"),Sn(this),Ln(this);else if(T.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),su(ce),ce.P=!0,Rt(11))}}else wi(this.i,this.l,T,null),Ci(this,T);Ce==4&&Sn(this),this.o&&!this.K&&(Ce==4?gh(this.j,this):(this.o=!1,Ii(this)))}else rr(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Sn(this),Ln(this)}}}catch{}finally{}};function Am(f){if(!sh(f))return f.g.la();const _=Yt(f.g);if(_==="")return"";let T="";const A=_.length,H=oi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Sn(f),Ln(f),"";f.h.i=new u.TextDecoder}for(let X=0;X<A;X++)f.h.h=!0,T+=f.h.i.decode(_[X],{stream:!(H&&X==A-1)});return _.length=0,f.h.g+=T,f.C=0,f.h.g}function sh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function ah(f,_){var T=f.C,A=_.indexOf(`
`,T);return A==-1?Ht:(T=Number(_.substring(T,A)),isNaN(T)?Ct:(A+=1,A+T>_.length?Ht:(_=_.slice(A,A+T),f.C=A+T,_)))}ii.prototype.cancel=function(){this.K=!0,Sn(this)};function Ii(f){f.T=Date.now()+f.H,ao(f,f.H)}function ao(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Si(g(f.aa,f),_)}function Ri(f){f.D&&(u.clearTimeout(f.D),f.D=null)}ii.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Qs(this.i,this.B),this.M!=2&&(Ti(),Rt(17)),Sn(this),this.m=2,Ln(this)):ao(this,this.T-f)};function Ln(f){f.j.I==0||f.K||gh(f.j,f)}function Sn(f){Ri(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,Fl(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function Ci(f,_){try{var T=f.j;if(T.I!=0&&(T.g==f||Ni(T.h,f))){if(!f.L&&Ni(T.h,f)&&T.I==3){try{var A=T.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)go(T),Qr(T);else break e;ra(T),Rt(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Si(g(T.Va,T),6e3));xi(T.h)<=1&&T.ta&&(T.ta=void 0)}else Li(T,11)}else if((f.L||T.g==f)&&go(T),!D(_))for(H=T.Ba.g.parse(_),_=0;_<H.length;_++){let Qe=H[_];const ct=Qe[0];if(!(ct<=T.K))if(T.K=ct,Qe=Qe[1],T.I==2)if(Qe[0]=="c"){T.M=Qe[1],T.ba=Qe[2];const jn=Qe[3];jn!=null&&(T.ka=jn,T.j.info("VER="+T.ka));const Mi=Qe[4];Mi!=null&&(T.za=Mi,T.j.info("SVER="+T.za));const li=Qe[5];li!=null&&typeof li=="number"&&li>0&&(A=1.5*li,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const ui=f.g;if(ui){const sa=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var X=A.h;X.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&($l(X,X.h),X.h=null))}if(A.G){const po=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;po&&(A.wa=po,Xe(A.J,A.G,po))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var ce=f;if(A.na=_h(A,A.L?A.ba:null,A.W),ce.L){Ql(A.h,ce);var Ce=ce,bt=A.O;bt&&(Ce.H=bt),Ce.D&&(Ri(Ce),Ii(Ce)),A.g=ce}else dh(A);T.i.length>0&&ki(T)}else Qe[0]!="stop"&&Qe[0]!="close"||Li(T,7);else T.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Li(T,7):iu(T):Qe[0]!="noop"&&T.l&&T.l.qa(Qe),T.A=0)}}Ti(4)}catch{}}var xt=class{constructor(f,_){this.g=f,this.map=_}};function Gl(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function xi(f){return f.h?1:f.g?f.g.size:0}function Ni(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function $l(f,_){f.g?f.g.add(_):f.h=_}function Ql(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Gl.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yl(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.G);return _}return I(f.i)}var oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oo(f,_){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const A=f[T].indexOf("=");let H,X=null;A>=0?(H=f[T].substring(0,A),X=f[T].substring(A+1)):H=f[T],_(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function wn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof wn?(this.l=f.l,Gt(this,f.j),this.o=f.o,this.g=f.g,Br(this,f.u),this.h=f.h,Xl(this,hh(f.i)),this.m=f.m):f&&(_=String(f).match(oh))?(this.l=!1,Gt(this,_[1]||"",!0),this.o=Di(_[2]||""),this.g=Di(_[3]||"",!0),Br(this,_[4]),this.h=Di(_[5]||"",!0),Xl(this,_[6]||"",!0),this.m=Di(_[7]||"")):(this.l=!1,this.i=new qr(null,this.l))}wn.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Js(_,lo,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Js(_,lo,!0),"@"),f.push(nr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Js(T,T.charAt(0)=="/"?Wl:lh,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Js(T,uh)),f.join("")},wn.prototype.resolve=function(f){const _=Nt(this);let T=!!f.j;T?Gt(_,f.j):T=!!f.o,T?_.o=f.o:T=!!f.g,T?_.g=f.g:T=f.u!=null;var A=f.h;if(T)Br(_,f.u);else if(T=!!f.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=_.h.lastIndexOf("/");H!=-1&&(A=_.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ce=0;ce<H.length;){const Ce=H[ce++];Ce=="."?A&&ce==H.length&&X.push(""):Ce==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),A&&ce==H.length&&X.push("")):(X.push(Ce),A=!0)}A=X.join("/")}else A=H}return T?_.h=A:T=f.i.toString()!=="",T?Xl(_,hh(f.i)):T=!!f.m,T&&(_.m=f.m),_};function Nt(f){return new wn(f)}function Gt(f,_,T){f.j=T?Di(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Br(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function Xl(f,_,T){_ instanceof qr?(f.i=_,co(f.i,f.l)):(T||(_=Js(_,Fr)),f.i=new qr(_,f.l))}function Xe(f,_,T){f.i.set(_,T)}function Ws(f){return Xe(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Di(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Js(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,mn),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function mn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var lo=/[#\/\?@]/g,lh=/[#\?:]/g,Wl=/[#\?]/g,Fr=/[#\?@]/g,uh=/#/g;function qr(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function gn(f){f.g||(f.g=new Map,f.h=0,f.i&&oo(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}r=qr.prototype,r.add=function(f,_){gn(this),this.i=null,f=Hr(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function ch(f,_){gn(f),_=Hr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Jl(f,_){return gn(f),_=Hr(f,_),f.g.has(_)}r.forEach=function(f,_){gn(this),this.g.forEach(function(T,A){T.forEach(function(H){f.call(_,H,A,this)},this)},this)};function Zl(f,_){gn(f);let T=[];if(typeof _=="string")Jl(f,_)&&(T=T.concat(f.g.get(Hr(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)T=T.concat(f[_]);return T}r.set=function(f,_){return gn(this),this.i=null,f=Hr(this,f),Jl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},r.get=function(f,_){return f?(f=Zl(this,f),f.length>0?String(f[0]):_):_};function uo(f,_,T){ch(f,_),T.length>0&&(f.i=null,f.g.set(Hr(f,_),I(T)),f.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var T=_[A];const H=nr(T);T=Zl(this,T);for(let X=0;X<T.length;X++){let ce=H;T[X]!==""&&(ce+="="+nr(T[X])),f.push(ce)}}return this.i=f.join("&")};function hh(f){const _=new qr;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Hr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function co(f,_){_&&!f.j&&(gn(f),f.i=null,f.g.forEach(function(T,A){const H=A.toLowerCase();A!=H&&(ch(this,A),uo(this,H,T))},f)),f.j=_}function si(f,_){const T=new ni;if(u.Image){const A=new Image;A.onload=y(Mn,T,"TestLoadImage: loaded",!0,_,A),A.onerror=y(Mn,T,"TestLoadImage: error",!1,_,A),A.onabort=y(Mn,T,"TestLoadImage: abort",!1,_,A),A.ontimeout=y(Mn,T,"TestLoadImage: timeout",!1,_,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else _(!1)}function eu(f,_){const T=new ni,A=new AbortController,H=setTimeout(()=>{A.abort(),Mn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:A.signal}).then(X=>{clearTimeout(H),X.ok?Mn(T,"TestPingServer: ok",!0,_):Mn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Mn(T,"TestPingServer: error",!1,_)})}function Mn(f,_,T,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(T)}catch{}}function Gr(){this.g=new Jc}function Oi(f){this.i=f.Sb||null,this.h=f.ab||!1}v(Oi,Zc),Oi.prototype.g=function(){return new Zs(this.i,this.h)};function Zs(f,_){It.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Zs,It),r=Zs.prototype,r.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,ai(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},r.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ho(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ho(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}r.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Kr(this):ai(this),this.readyState==3&&ho(this)}},r.Oa=function(f){this.g&&(this.response=this.responseText=f,Kr(this))},r.Na=function(f){this.g&&(this.response=f,Kr(this))},r.ga=function(){this.g&&Kr(this)};function Kr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,ai(f)}r.setRequestHeader=function(f,_){this.A.append(f,_)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function ai(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Un(f){let _="";return Pe(f,function(T,A){_+=A,_+=":",_+=T,_+=`\r
`}),_}function ea(f,_,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=Un(T),typeof f=="string"?T!=null&&nr(T):Xe(f,_,T))}function nt(f){It.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(nt,It);var Pi=/^https?$/i,tu=["POST","PUT"];r=nt.prototype,r.Fa=function(f){this.H=f},r.ea=function(f,_,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(X){ta(this,X);return}if(f=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)T.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())T.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(tu,_,void 0)>=0)||A||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of T)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(X){ta(this,X)}};function ta(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,nu(f),ir(f)}function nu(f){f.A||(f.A=!0,zt(f,"complete"),zt(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,zt(this,"complete"),zt(this,"abort"),ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),nt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?na(this):this.Xa())},r.Xa=function(){na(this)};function na(f){if(f.h&&typeof l<"u"){if(f.v&&oi(f)==4)setTimeout(f.Ca.bind(f),0);else if(zt(f,"readystatechange"),oi(f)==4){f.h=!1;try{const X=f.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var A;if(A=X===0){let ce=String(f.D).match(oh)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),A=!Pi.test(ce?ce.toLowerCase():"")}T=A}if(T)zt(f,"complete"),zt(f,"success");else{f.o=6;try{var H=oi(f)>2?f.g.statusText:""}catch{H=""}f.l=H+" ["+f.ca()+"]",nu(f)}}finally{ir(f)}}}}function ir(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,_||zt(f,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function oi(f){return f.g?f.g.readyState:0}r.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),bm(_)}};function Yt(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function rr(f){const _={};f=(f.g&&oi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(D(f[A]))continue;var T=rh(f[A]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const X=_[H]||[];_[H]=X,X.push(T)}He(_,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function $r(f){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,f),this.Za=Vi("retryDelaySeedMs",1e4,f),this.Ta=Vi("forwardChannelMaxRetries",2,f),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Gl(f&&f.concurrentRequestLimit),this.Ba=new Gr,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=$r.prototype,r.ka=8,r.I=1,r.connect=function(f,_,T,A){Rt(0),this.W=f,this.H=_||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=_h(this,null,this.W),ki(this)};function iu(f){if(fo(f),f.I==3){var _=f.V++,T=Nt(f.J);if(Xe(T,"SID",f.M),Xe(T,"RID",_),Xe(T,"TYPE","terminate"),ia(f,T),_=new ii(f,f.j,_),_.M=2,_.A=Ws(Nt(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=_.A,T=!0),T||(_.g=vh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ii(_)}yh(f)}function Qr(f){f.g&&(su(f),f.g.cancel(),f.g=null)}function fo(f){Qr(f),f.v&&(u.clearTimeout(f.v),f.v=null),go(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function ki(f){if(!Kl(f.h)&&!f.m){f.m=!0;var _=f.Ea;j||C(),se||(j(),se=!0),x.add(_,f),f.D=0}}function mo(f,_){return xi(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Si(g(f.Ea,f,_),ph(f,f.D)),f.D++,!0)}r.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const H=new ii(this,this.j,f);let X=this.o;if(this.U&&(X?(X=k(X),he(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=fh(this,H,_),T=Nt(this.J),Xe(T,"RID",f),Xe(T,"CVER",22),this.G&&Xe(T,"X-HTTP-Session-Id",this.G),ia(this,T),X&&(this.R?_="headers="+nr(Un(X))+"&"+_:this.u&&ea(T,this.u,X)),$l(this.h,H),this.Ra&&Xe(T,"TYPE","init"),this.S?(Xe(T,"$req",_),Xe(T,"SID","null"),H.U=!0,Ai(H,T,null)):Ai(H,T,_),this.I=2}}else this.I==3&&(f?ru(this,f):this.i.length==0||Kl(this.h)||ru(this))};function ru(f,_){var T;_?T=_.l:T=f.V++;const A=Nt(f.J);Xe(A,"SID",f.M),Xe(A,"RID",T),Xe(A,"AID",f.K),ia(f,A),f.u&&f.o&&ea(A,f.u,f.o),T=new ii(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),_&&(f.i=_.G.concat(f.i)),_=fh(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),$l(f.h,T),Ai(T,A,_)}function ia(f,_){f.H&&Pe(f.H,function(T,A){Xe(_,A,T)}),f.l&&Pe({},function(T,A){Xe(_,A,T)})}function fh(f,_,T){T=Math.min(f.i.length,T);const A=f.l?g(f.l.Ka,f.l,f):null;e:{var H=f.i;let Ce=-1;for(;;){const bt=["count="+T];Ce==-1?T>0?(Ce=H[0].g,bt.push("ofs="+Ce)):Ce=0:bt.push("ofs="+Ce);let Qe=!0;for(let ct=0;ct<T;ct++){var X=H[ct].g;const jn=H[ct].map;if(X-=Ce,X<0)Ce=Math.max(0,H[ct].g-100),Qe=!1;else try{X="req"+X+"_"||"";try{var ce=jn instanceof Map?jn:Object.entries(jn);for(const[Mi,li]of ce){let ui=li;h(li)&&(ui=zr(li)),bt.push(X+Mi+"="+encodeURIComponent(ui))}}catch(Mi){throw bt.push(X+"type="+encodeURIComponent("_badmap")),Mi}}catch{A&&A(jn)}}if(Qe){ce=bt.join("&");break e}}ce=void 0}return f=f.i.splice(0,T),_.G=f,ce}function dh(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;j||C(),se||(j(),se=!0),x.add(_,f),f.A=0}}function ra(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Si(g(f.Da,f),ph(f,f.A)),f.A++,!0)}r.Da=function(){if(this.v=null,mh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Si(g(this.Wa,this),f)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Qr(this),mh(this))};function su(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function mh(f){f.g=new ii(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=Nt(f.na);Xe(_,"RID","rpc"),Xe(_,"SID",f.M),Xe(_,"AID",f.K),Xe(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&Xe(_,"TO",f.ia),Xe(_,"TYPE","xmlhttp"),ia(f,_),f.u&&f.o&&ea(_,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ws(Nt(_)),T.u=null,T.R=!0,so(T,f)}r.Va=function(){this.C!=null&&(this.C=null,Qr(this),ra(this),Rt(19))};function go(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function gh(f,_){var T=null;if(f.g==_){go(f),su(f),f.g=null;var A=2}else if(Ni(f.h,_))T=_.G,Ql(f.h,_),A=1;else return;if(f.I!=0){if(_.o)if(A==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var H=f.D;A=ro(),zt(A,new bi(A,T)),ki(f)}else dh(f);else if(H=_.m,H==3||H==0&&_.X>0||!(A==1&&mo(f,_)||A==2&&ra(f)))switch(T&&T.length>0&&(_=f.h,_.i=_.i.concat(T)),H){case 1:Li(f,5);break;case 4:Li(f,10);break;case 3:Li(f,6);break;default:Li(f,2)}}}function ph(f,_){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*_}function Li(f,_){if(f.j.info("Error code "+_),_==2){var T=g(f.bb,f),A=f.Ua;const H=!A;A=new wn(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(A,"https"),Ws(A),H?si(A.toString(),T):eu(A.toString(),T)}else Rt(2);f.I=0,f.l&&f.l.pa(_),yh(f),fo(f)}r.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function yh(f){if(f.I=0,f.ja=[],f.l){const _=Yl(f.h);(_.length!=0||f.i.length!=0)&&(R(f.ja,_),R(f.ja,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.oa()}}function _h(f,_,T){var A=T instanceof wn?Nt(T):new wn(T);if(A.g!="")_&&(A.g=_+"."+A.g),Br(A,A.u);else{var H=u.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;const X=new wn(null);A&&Gt(X,A),_&&(X.g=_),H&&Br(X,H),T&&(X.h=T),A=X}return T=f.G,_=f.wa,T&&_&&Xe(A,T,_),Xe(A,"VER",f.ka),ia(f,A),A}function vh(f,_,T){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new nt(new Oi({ab:T})):new nt(f.ma),_.Fa(f.L),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eh(){}r=Eh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Yr(){}Yr.prototype.g=function(f,_){return new cn(f,_)};function cn(f,_){It.call(this),this.g=new $r(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!D(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new sr(this)}v(cn,It),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){iu(this.g)},cn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=zr(f),f=T);_.i.push(new xt(_.Ya++,f)),_.I==3&&ki(_)},cn.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,cn.Z.N.call(this)};function Th(f){Qt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const T in _){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}v(Th,Qt);function bh(){kn.call(this),this.status=1}v(bh,kn);function sr(f){this.g=f}v(sr,Eh),sr.prototype.ra=function(){zt(this.g,"a")},sr.prototype.qa=function(f){zt(this.g,new Th(f))},sr.prototype.pa=function(f){zt(this.g,new bh)},sr.prototype.oa=function(){zt(this.g,"b")},Yr.prototype.createWebChannel=Yr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,PA=function(){return new Yr},OA=function(){return ro()},DA=Tt,ay={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,Gf=Ys,ql.COMPLETE="complete",NA=ql,eh.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",It.prototype.listen=It.prototype.J,Zu=eh,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,xA=nt}).apply(typeof xf<"u"?xf:typeof self<"u"?self:typeof window<"u"?window:{});const hS="@firebase/firestore",fS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Qy("@firebase/firestore");function il(){return ja.logLevel}function oe(r,...e){if(ja.logLevel<=je.DEBUG){const t=e.map(o_);ja.debug(`Firestore (${kl}): ${r}`,...t)}}function fn(r,...e){if(ja.logLevel<=je.ERROR){const t=e.map(o_);ja.error(`Firestore (${kl}): ${r}`,...t)}}function za(r,...e){if(ja.logLevel<=je.WARN){const t=e.map(o_);ja.warn(`Firestore (${kl}): ${r}`,...t)}}function o_(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,VA(r,i,t)}function VA(r,e,t){let i=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw fn(i),new Error(i)}function _e(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||VA(e,a,i)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class IP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RP{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let i=this.i;const a=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let l=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qi,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},h=d=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new kA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class CP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new CP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const i=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=DP(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ae(r,e){return r<e?-1:r>e?1:0}function oy(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Vp(a)===Vp(l)?Ae(a,l):Vp(a)?1:-1}return Ae(r.length,e.length)}const OP=55296,PP=57343;function Vp(r){const e=r.charCodeAt(0);return e>=OP&&e<=PP}function pl(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function LA(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="__name__";class Fi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Fi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ae(e.length,t.length)}static compareSegments(e,t){const i=Fi.isNumericId(e),a=Fi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Fi.extractNumericId(e).compare(Fi.extractNumericId(t)):oy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class $e extends Fi{construct(e,t,i){return new $e(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new $e(t)}static emptyPath(){return new $e([])}}const VP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Fi{construct(e,t,i){return new gt(e,t,i)}static isValidIdentifier(e){return VP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mS}static keyField(){return new gt([mS])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(l(),a++)}if(l(),u)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe($e.fromString(e))}static fromName(e){return new fe($e.fromString(e).popFirst(5))}static empty(){return new fe($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r,e,t){if(!t)throw new le(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kP(r,e,t,i){if(e===!0&&i===!0)throw new le(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function gS(r){if(!fe.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function pS(r){if(fe.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function UA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function Zn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kd(r);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,e){const t={typeString:r};return e&&(t.value=e),t}function zc(r,e){if(!UA(r))throw new le(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new le(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=-62135596800,_S=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*_S);return new Ze(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yS)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_S}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Lt("string",Ze._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;class fd{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function ly(r){return r.fields.find((e=>e.kind===2))}function Sa(r){return r.fields.filter((e=>e.kind!==2))}fd.UNKNOWN_ID=-1;class Kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class _c{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _c(0,Vn.min())}}function LP(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new Vn(a,fe.empty(),e)}function jA(r){return new Vn(r.readTime,r.key,yc)}class Vn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vn(Ee.min(),fe.empty(),yc)}static max(){return new Vn(Ee.max(),fe.empty(),yc)}}function u_(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(r.documentKey,e.documentKey),t!==0?t:Ae(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==zA)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,i)=>{t(e)}))}static reject(e){return new q(((t,i)=>{i(e)}))}static waitFor(e){return new q(((t,i)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(d=>i(d)))})),u=!0,l===a&&t()}))}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next((a=>a?q.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new q(((i,a)=>{const l=e.length,u=new Array(l);let h=0;for(let d=0;d<l;d++){const g=d;t(e[g]).next((y=>{u[g]=y,++h,h===l&&i(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new q(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class $d{static open(e,t,i,a){try{return new $d(t,e.transaction(a,i))}catch(l){throw new ac(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Qi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ac(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=c_(i.target.error);this.S.reject(new ac(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new UP(t)}}class Ns{static delete(e){return oe(On,"Removing database:",e),Aa(P0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!F0())return!1;if(Ns.F())return!0;const e=Ft(),t=Ns.M(e),i=0<t&&t<10,a=FA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Ns.M(Ft())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(On,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{i(new ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?i(new le(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new le(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new ac(e,u))},a.onupgradeneeded=l=>{oe(On,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{oe(On,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const h=$d.open(this.db,e,l?"readonly":"readwrite",i),d=a(h).next((g=>(h.C(),g))).catch((g=>(h.abort(g),q.reject(g)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,g=d.name!=="FirebaseError"&&u<3;if(oe(On,"Transaction failed with error:",d.message,"Retrying:",g),this.close(),!g)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class MP{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Aa(this.U.delete())}}class ac extends le{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bs(r){return r.name==="IndexedDbTransactionError"}class UP{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(oe(On,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(oe(On,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Aa(i)}add(e){return oe(On,"ADD",this.store.name,e,e),Aa(this.store.add(e))}get(e){return Aa(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(On,"GET",this.store.name,e,t),t)))}delete(e){return oe(On,"DELETE",this.store.name,e),Aa(this.store.delete(e))}count(){return oe(On,"COUNT",this.store.name),Aa(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new q(((u,h)=>{l.onerror=d=>{h(d.target.error)},l.onsuccess=d=>{u(d.target.result)}}))}{const l=this.cursor(i),u=[];return this.H(l,((h,d)=>{u.push(d)})).next((()=>u))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new q(((a,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{a(u.target.result)}}))}Z(e,t){oe(On,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,u,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new q(((i,a)=>{t.onerror=l=>{const u=c_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():i()})):i()}}))}H(e,t){const i=[];return new q(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const d=new MP(h),g=t(h.primaryKey,h.value,d);if(g instanceof q){const y=g.catch((v=>(d.done(),q.reject(v))));i.push(y)}d.isDone?a():d.G===null?h.continue():h.continue(d.G)}})).next((()=>q.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Aa(r){return new q(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=c_(i.target.error);t(a)}}))}let vS=!1;function c_(r){const e=Ns.M(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vS||(vS=!0,setTimeout((()=>{throw i}),0)),i}}return r}const oc="IndexBackfiller";class jP{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(oc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe(oc,`Documents written: ${t}`)}catch(t){Bs(t)?oe(oc,"Ignoring IndexedDB error during index backfill: ",t):await Ja(t)}await this.re(6e4)}))}}class zP{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return q.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return oe(oc,`Processing collection: ${u}`),this.oe(e,u,a).next((h=>{a-=h,i.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((h=>(oe(oc,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const u=jA(l);u_(u,i)>0&&(i=u)})),new Vn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=-1;function Qd(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function BP(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="";function ln(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ES(e)),e=FP(r.get(t),e);return ES(e)}function FP(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case dd:t+="";break;default:t+=l}}return t}function ES(r){return r+dd+""}function qi(r){const e=r.length;if(_e(e>=2,64408,{path:r}),e===2)return _e(r.charAt(0)===dd&&r.charAt(1)==="",56145,{path:r}),$e.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const u=r.indexOf(dd,l);switch((u<0||u>t)&&ge(50515,{path:r}),r.charAt(u+1)){case"":const h=r.substring(l,u);let d;a.length===0?d=h:(a+=h,d=a,a=""),i.push(d);break;case"":a+=r.substring(l,u),a+="\0";break;case"":a+=r.substring(l,u+1);break;default:ge(61167,{path:r})}l=u+2}return new $e(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="remoteDocuments",Bc="owner",Ko="owner",Ec="mutationQueues",qP="userId",mi="mutations",TS="batchId",Na="userMutationsIndex",bS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,e){return[r,ln(e)]}function qA(r,e,t){return[r,ln(e),t]}const HP={},yl="documentMutations",md="remoteDocumentsV14",GP=["prefixPath","collectionGroup","readTime","documentId"],Qf="documentKeyIndex",KP=["prefixPath","collectionGroup","documentId"],HA="collectionGroupIndex",$P=["collectionGroup","readTime","prefixPath","documentId"],Tc="remoteDocumentGlobal",uy="remoteDocumentGlobalKey",_l="targets",GA="queryTargetsIndex",QP=["canonicalId","targetId"],vl="targetDocuments",YP=["targetId","path"],h_="documentTargetsIndex",XP=["path","targetId"],gd="targetGlobalKey",Oa="targetGlobal",bc="collectionParents",WP=["collectionId","parent"],El="clientMetadata",JP="clientId",Yd="bundles",ZP="bundleId",Xd="namedQueries",eV="name",f_="indexConfiguration",tV="indexId",cy="collectionGroupIndex",nV="collectionGroup",lc="indexState",iV=["indexId","uid"],KA="sequenceNumberIndex",rV=["uid","sequenceNumber"],uc="indexEntries",sV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$A="documentKeyIndex",aV=["indexId","uid","orderedDocumentKey"],Wd="documentOverlays",oV=["userId","collectionPath","documentId"],hy="collectionPathOverlayIndex",lV=["userId","collectionPath","largestBatchId"],QA="collectionGroupOverlayIndex",uV=["userId","collectionGroup","largestBatchId"],d_="globals",cV="name",YA=[Ec,mi,yl,wa,_l,Bc,Oa,vl,El,Tc,bc,Yd,Xd],hV=[...YA,Wd],XA=[Ec,mi,yl,md,_l,Bc,Oa,vl,El,Tc,bc,Yd,Xd,Wd],WA=XA,m_=[...WA,f_,lc,uc],fV=m_,JA=[...m_,d_],dV=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends BA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function qt(r,e){const t=Ie(r);return Ns.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ZA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}}class Nf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new tn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wS(this.data.getIterator())}getIteratorFrom(e){return new wS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class wS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $o(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new tt(gt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new eI("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const mV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(r){if(_e(!!r,39018),typeof r=="string"){let e=0;const t=mV.exec(r);if(_e(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Dr(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="server_timestamp",nI="__type__",iI="__previous_value__",rI="__local_write_time__";function Jd(r){return(r?.mapValue?.fields||{})[nI]?.stringValue===tI}function Zd(r){const e=r.mapValue.fields[iI];return Jd(e)?Zd(e):e}function Sc(r){const e=Nr(r.mapValue.fields[rI].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t,i,a,l,u,h,d,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=g,this.isUsingEmulator=y}}const pd="(default)";class Ba{constructor(e,t){this.projectId=e,this.database=t||pd}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__type__",sI="__max__",Is={mapValue:{fields:{__type__:{stringValue:sI}}}},p_="__vector__",Tl="value",Yf={nullValue:"NULL_VALUE"};function Ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Jd(r)?4:aI(r)?9007199254740991:em(r)?10:11:ge(28295,{value:r})}function Wi(r,e){if(r===e)return!0;const t=Ps(r);if(t!==Ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Sc(r).isEqual(Sc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Nr(a.timestampValue),h=Nr(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Dr(a.bytesValue).isEqual(Dr(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return ft(a.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ft(a.integerValue)===ft(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=ft(a.doubleValue),h=ft(l.doubleValue);return u===h?vc(u)===vc(h):isNaN(u)&&isNaN(h)}return!1})(r,e);case 9:return pl(r.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(SS(u)!==SS(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Wi(u[d],h[d])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function wc(r,e){return(r.values||[]).find((t=>Wi(t,e)))!==void 0}function Vs(r,e){if(r===e)return 0;const t=Ps(r),i=Ps(e);if(t!==i)return Ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=ft(l.integerValue||l.doubleValue),d=ft(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(r,e);case 3:return AS(r.timestampValue,e.timestampValue);case 4:return AS(Sc(r),Sc(e));case 5:return oy(r.stringValue,e.stringValue);case 6:return(function(l,u){const h=Dr(l),d=Dr(u);return h.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),d=u.split("/");for(let g=0;g<h.length&&g<d.length;g++){const y=Ae(h[g],d[g]);if(y!==0)return y}return Ae(h.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=Ae(ft(l.latitude),ft(u.latitude));return h!==0?h:Ae(ft(l.longitude),ft(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return IS(r.arrayValue,e.arrayValue);case 10:return(function(l,u){const h=l.fields||{},d=u.fields||{},g=h[Tl]?.arrayValue,y=d[Tl]?.arrayValue,v=Ae(g?.values?.length||0,y?.values?.length||0);return v!==0?v:IS(g,y)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Is.mapValue&&u===Is.mapValue)return 0;if(l===Is.mapValue)return 1;if(u===Is.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),g=u.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const S=oy(d[v],y[v]);if(S!==0)return S;const I=Vs(h[d[v]],g[y[v]]);if(I!==0)return I}return Ae(d.length,y.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function AS(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ae(r,e);const t=Nr(r),i=Nr(e),a=Ae(t.seconds,i.seconds);return a!==0?a:Ae(t.nanos,i.nanos)}function IS(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Vs(t[a],i[a]);if(l)return l}return Ae(t.length,i.length)}function bl(r){return dy(r)}function dy(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Nr(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Dr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return fe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=dy(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${dy(t.fields[u])}`;return a+"}"})(r.mapValue):ge(61005,{value:r})}function Xf(r){switch(Ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zd(r);return e?16+Xf(e):16;case 5:return 2*r.stringValue.length;case 6:return Dr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Xf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Fs(i.fields,((l,u)=>{a+=l.length+Xf(u)})),a})(r.mapValue);default:throw ge(13486,{value:r})}}function Fa(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function my(r){return!!r&&"integerValue"in r}function Ac(r){return!!r&&"arrayValue"in r}function RS(r){return!!r&&"nullValue"in r}function CS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wf(r){return!!r&&"mapValue"in r}function em(r){return(r?.mapValue?.fields||{})[g_]?.stringValue===p_}function cc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Fs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cc(r.arrayValue.values[t]);return e}return{...r}}function aI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}const oI={mapValue:{fields:{[g_]:{stringValue:p_},[Tl]:{arrayValue:{}}}}};function pV(r){return"nullValue"in r?Yf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Fa(Ba.empty(),fe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?em(r)?oI:{mapValue:{}}:ge(35942,{value:r})}function yV(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Fa(Ba.empty(),fe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?oI:"mapValue"in r?em(r)?{mapValue:{}}:Is:ge(61959,{value:r})}function xS(r,e){const t=Vs(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function NS(r,e){const t=Vs(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}setAll(e){let t=gt.emptyPath(),i={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,a),i={},a=[],t=h.popLast()}u?i[h.lastSegment()]=cc(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Fs(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new an(cc(this.value))}}function lI(r){const e=[];return Fs(r.fields,((t,i)=>{const a=new gt([t]);if(Wf(i)){const l=lI(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t,i,a,l,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new vt(e,0,Ee.min(),Ee.min(),Ee.min(),an.empty(),0)}static newFoundDocument(e,t,i,a){return new vt(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new vt(e,2,t,Ee.min(),Ee.min(),an.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,Ee.min(),Ee.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.position=e,this.inclusive=t}}function DS(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?i=fe.comparator(fe.fromName(u.referenceValue),t.key):i=Vs(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function OS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function _V(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{}class ze extends uI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vV(e,t,i):t==="array-contains"?new bV(e,i):t==="in"?new gI(e,i):t==="not-in"?new SV(e,i):t==="array-contains-any"?new wV(e,i):new ze(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new EV(e,i):new TV(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vs(t,this.value)):t!==null&&Ps(this.value)===Ps(t)&&this.matchesComparison(Vs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends uI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new et(e,t)}matches(e){return Sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sl(r){return r.op==="and"}function gy(r){return r.op==="or"}function y_(r){return cI(r)&&Sl(r)}function cI(r){for(const e of r.filters)if(e instanceof et)return!1;return!0}function py(r){if(r instanceof ze)return r.field.canonicalString()+r.op.toString()+bl(r.value);if(y_(r))return r.filters.map((e=>py(e))).join(",");{const e=r.filters.map((t=>py(t))).join(",");return`${r.op}(${e})`}}function hI(r,e){return r instanceof ze?(function(i,a){return a instanceof ze&&i.op===a.op&&i.field.isEqual(a.field)&&Wi(i.value,a.value)})(r,e):r instanceof et?(function(i,a){return a instanceof et&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,h)=>l&&hI(u,a.filters[h])),!0):!1})(r,e):void ge(19439)}function fI(r,e){const t=r.filters.concat(e);return et.create(t,r.op)}function dI(r){return r instanceof ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(r):r instanceof et?(function(t){return t.op.toString()+" {"+t.getFilters().map(dI).join(" ,")+"}"})(r):"Filter"}class vV extends ze{constructor(e,t,i){super(e,t,i),this.key=fe.fromName(i.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class EV extends ze{constructor(e,t){super(e,"in",t),this.keys=mI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TV extends ze{constructor(e,t){super(e,"not-in",t),this.keys=mI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mI(r,e){return(e.arrayValue?.values||[]).map((t=>fe.fromName(t.referenceValue)))}class bV extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ac(t)&&wc(t.arrayValue,this.value)}}class gI extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wc(this.value.arrayValue,t)}}class SV extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wc(this.value.arrayValue,t)}}class wV extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t=null,i=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function yy(r,e=null,t=[],i=[],a=null,l=null,u=null){return new AV(r,e,t,i,a,l,u)}function qa(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>py(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>bl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>bl(i))).join(",")),e.Te=t}return e.Te}function Fc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_V(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!hI(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!OS(r.startAt,e.startAt)&&OS(r.endAt,e.endAt)}function yd(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function _d(r,e){return r.filters.filter((t=>t instanceof ze&&t.field.isEqual(e)))}function PS(r,e,t){let i=Yf,a=!0;for(const l of _d(r,e)){let u=Yf,h=!0;switch(l.op){case"<":case"<=":u=pV(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=Yf}xS({value:i,inclusive:a},{value:u,inclusive:h})<0&&(i=u,a=h)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const u=t.position[l];xS({value:i,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}function VS(r,e,t){let i=Is,a=!0;for(const l of _d(r,e)){let u=Is,h=!0;switch(l.op){case">=":case">":u=yV(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=Is}NS({value:i,inclusive:a},{value:u,inclusive:h})>0&&(i=u,a=h)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const u=t.position[l];NS({value:i,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t=null,i=[],a=[],l=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IV(r,e,t,i,a,l,u,h){return new Za(r,e,t,i,a,l,u,h)}function tm(r){return new Za(r)}function kS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function __(r){return r.collectionGroup!==null}function fl(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new tt(gt.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ic(l,i))})),t.has(gt.keyField().canonicalString())||e.Ie.push(new Ic(gt.keyField(),i))}return e.Ie}function Wn(r){const e=Ie(r);return e.Ee||(e.Ee=RV(e,fl(r))),e.Ee}function RV(r,e){if(r.limitType==="F")return yy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ic(a.field,l)}));const t=r.endAt?new ks(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ks(r.startAt.position,r.startAt.inclusive):null;return yy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function _y(r,e){const t=r.filters.concat([e]);return new Za(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function vd(r,e,t){return new Za(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function nm(r,e){return Fc(Wn(r),Wn(e))&&r.limitType===e.limitType}function pI(r){return`${qa(Wn(r))}|lt:${r.limitType}`}function rl(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>dI(a))).join(", ")}]`),Qd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>bl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>bl(a))).join(",")),`Target(${i})`})(Wn(r))}; limitType=${r.limitType})`}function qc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):fe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of fl(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(u,h,d){const g=DS(u,h,d);return u.inclusive?g<=0:g<0})(i.startAt,fl(i),a)||i.endAt&&!(function(u,h,d){const g=DS(u,h,d);return u.inclusive?g>=0:g>0})(i.endAt,fl(i),a))})(r,e)}function CV(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yI(r){return(e,t)=>{let i=!1;for(const a of fl(r)){const l=xV(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function xV(r,e,t){const i=r.field.isKeyField()?fe.comparator(e.key,t.key):(function(l,u,h){const d=u.data.field(l),g=h.data.field(l);return d!==null&&g!==null?Vs(d,g):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new mt(fe.comparator);function Pn(){return NV}const _I=new mt(fe.comparator);function ec(...r){let e=_I;for(const t of r)e=e.insert(t.key,t);return e}function vI(r){let e=_I;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Hi(){return hc()}function EI(){return hc()}function hc(){return new kr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const DV=new mt(fe.comparator),OV=new tt(fe.comparator);function Oe(...r){let e=OV;for(const t of r)e=e.add(t);return e}const PV=new tt(Ae);function VV(){return PV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function TI(r){return{integerValue:""+r}}function kV(r,e){return BP(e)?TI(e):v_(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function LV(r,e,t){return r instanceof wl?(function(a,l){const u={fields:{[nI]:{stringValue:tI},[rI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Jd(l)&&(l=Zd(l)),l&&(u.fields[iI]=l),{mapValue:u}})(t,e):r instanceof Al?SI(r,e):r instanceof Il?wI(r,e):(function(a,l){const u=bI(a,l),h=LS(u)+LS(a.Ae);return my(u)&&my(a.Ae)?TI(h):v_(a.serializer,h)})(r,e)}function MV(r,e,t){return r instanceof Al?SI(r,e):r instanceof Il?wI(r,e):t}function bI(r,e){return r instanceof Rc?(function(i){return my(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class wl extends im{}class Al extends im{constructor(e){super(),this.elements=e}}function SI(r,e){const t=AI(e);for(const i of r.elements)t.some((a=>Wi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Il extends im{constructor(e){super(),this.elements=e}}function wI(r,e){let t=AI(e);for(const i of r.elements)t=t.filter((a=>!Wi(a,i)));return{arrayValue:{values:t}}}class Rc extends im{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function LS(r){return ft(r.integerValue||r.doubleValue)}function AI(r){return Ac(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this.field=e,this.transform=t}}function UV(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Al&&a instanceof Al||i instanceof Il&&a instanceof Il?pl(i.elements,a.elements,Wi):i instanceof Rc&&a instanceof Rc?Wi(i.Ae,a.Ae):i instanceof wl&&a instanceof wl})(r.transform,e.transform)}class jV{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class rm{}function RI(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new sm(r.key,on.none()):new Ll(r.key,r.data,on.none());{const t=r.data,i=an.empty();let a=new tt(gt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Lr(r.key,i,new bn(a.toArray()),on.none())}}function zV(r,e,t){r instanceof Ll?(function(a,l,u){const h=a.value.clone(),d=US(a.fieldTransforms,l,u.transformResults);h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(r,e,t):r instanceof Lr?(function(a,l,u){if(!Jf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=US(a.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(CI(a)),d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(r,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fc(r,e,t,i){return r instanceof Ll?(function(l,u,h,d){if(!Jf(l.precondition,u))return h;const g=l.value.clone(),y=jS(l.fieldTransforms,d,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Lr?(function(l,u,h,d){if(!Jf(l.precondition,u))return h;const g=jS(l.fieldTransforms,d,u),y=u.data;return y.setAll(CI(l)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(r,e,t,i):(function(l,u,h){return Jf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(r,e,t)}function BV(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=bI(i.transform,a||null);l!=null&&(t===null&&(t=an.empty()),t.set(i.field,l))}return t||null}function MS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&pl(i,a,((l,u)=>UV(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ll extends rm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Lr extends rm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CI(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function US(r,e,t){const i=new Map;_e(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,h=e.data.field(l.field);i.set(l.field,MV(u,h,t[a]))}return i}function jS(r,e,t){const i=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);i.set(a.field,LV(l,u,e))}return i}class sm extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xI extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&zV(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=EI();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const d=RI(u,h);d!==null&&i.set(a.key,d),u.isValidDocument()||u.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,((t,i)=>MS(t,i)))&&pl(this.baseMutations,e.baseMutations,((t,i)=>MS(t,i)))}}class T_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return DV})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new T_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,qe;function qV(r){switch(r){case Z.OK:return ge(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function NI(r){if(r===void 0)return fn("GRPC error has no .code"),Z.UNKNOWN;switch(r){case kt.OK:return Z.OK;case kt.CANCELLED:return Z.CANCELLED;case kt.UNKNOWN:return Z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Z.INTERNAL;case kt.UNAVAILABLE:return Z.UNAVAILABLE;case kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case kt.NOT_FOUND:return Z.NOT_FOUND;case kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case kt.ABORTED:return Z.ABORTED;case kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case kt.DATA_LOSS:return Z.DATA_LOSS;default:return ge(39323,{code:r})}}(qe=kt||(kt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=new xs([4294967295,4294967295],0);function zS(r){const e=HV().encode(r),t=new CA;return t.update(e),new Uint8Array(t.digest())}function BS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([a,l],0)]}class S_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(i<0)throw new tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(xs.fromNumber(i)));return a.compare(GV)===1&&(a=new xs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zS(e),[i,a]=BS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new S_(l,a,t);return i.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=zS(e),[i,a]=BS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new am(Ee.min(),a,new mt(Ae),Pn(),Oe())}}class Hc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Hc(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class DI{constructor(e,t){this.targetId=e,this.Ce=t}}class OI{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class FS{constructor(){this.ve=0,this.Fe=qS(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge(38017,{changeType:l})}})),new Hc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=qS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=Df(),this.He=Df(),this.Ye=new mt(Ae)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(yd(l))if(i===0){const u=new fe(l.path);this.et(t,u,vt.newNoDocument(u,Ee.min()))}else _e(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const h=this.ut(e),d=h?this.ct(h,e,u):1;if(d!==0){this.it(t);const g=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=Dr(i).toUint8Array()}catch(d){if(d instanceof eI)return za("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new S_(u,a,l)}catch(d){return za(d instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&yd(h.target)){const d=new fe(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,vt.newNoDocument(d,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Oe();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((d=>{const g=this.ot(d);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new am(e,t,this.Ye,this.je,i);return this.je=Pn(),this.Je=Df(),this.He=Df(),this.Ye=new mt(Ae),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new FS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tt(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tt(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new FS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Df(){return new mt(fe.comparator)}function qS(){return new mt(fe.comparator)}const $V={asc:"ASCENDING",desc:"DESCENDING"},QV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YV={and:"AND",or:"OR"};class XV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vy(r,e){return r.useProto3Json||Qd(e)?e:{value:e}}function Rl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PI(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WV(r,e){return Rl(r,e.toTimestamp())}function dn(r){return _e(!!r,49232),Ee.fromTimestamp((function(t){const i=Nr(t);return new Ze(i.seconds,i.nanos)})(r))}function w_(r,e){return Ey(r,e).canonicalString()}function Ey(r,e){const t=(function(a){return new $e(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function VI(r){const e=$e.fromString(r);return _e(qI(e),10190,{key:e.toString()}),e}function Ed(r,e){return w_(r.databaseId,e.path)}function Pa(r,e){const t=VI(e);if(t.get(1)!==r.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new fe(MI(t))}function kI(r,e){return w_(r.databaseId,e)}function LI(r){const e=VI(r);return e.length===4?$e.emptyPath():MI(e)}function Ty(r){return new $e(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function MI(r){return _e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function HS(r,e,t){return{name:Ed(r,e),fields:t.value.mapValue.fields}}function JV(r,e,t){const i=Pa(r,e.name),a=dn(e.updateTime),l=e.createTime?dn(e.createTime):Ee.min(),u=new an({mapValue:{fields:e.fields}}),h=vt.newFoundDocument(i,a,l,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function ZV(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(_e(y===void 0||typeof y=="string",58123),Mt.fromBase64String(y||"")):(_e(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Mt.fromUint8Array(y||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(g){const y=g.code===void 0?Z.UNKNOWN:NI(g.code);return new le(y,g.message||"")})(u);t=new OI(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Pa(r,i.document.name),l=dn(i.document.updateTime),u=i.document.createTime?dn(i.document.createTime):Ee.min(),h=new an({mapValue:{fields:i.document.fields}}),d=vt.newFoundDocument(a,l,u,h),g=i.targetIds||[],y=i.removedTargetIds||[];t=new Zf(g,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Pa(r,i.document),l=i.readTime?dn(i.readTime):Ee.min(),u=vt.newNoDocument(a,l),h=i.removedTargetIds||[];t=new Zf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Pa(r,i.document),l=i.removedTargetIds||[];t=new Zf([],l,a,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new FV(a,l),h=i.targetId;t=new DI(h,u)}}return t}function Td(r,e){let t;if(e instanceof Ll)t={update:HS(r,e.key,e.value)};else if(e instanceof sm)t={delete:Ed(r,e.key)};else if(e instanceof Lr)t={update:HS(r,e.key,e.data),updateMask:sk(e.fieldMask)};else{if(!(e instanceof xI))return ge(16599,{Vt:e.type});t={verify:Ed(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const h=u.transform;if(h instanceof wl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Il)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Rc)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw ge(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:WV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function by(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?on.updateTime(dn(l.updateTime)):l.exists!==void 0?on.exists(l.exists):on.none()})(e.currentDocument):on.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(u,h){let d=null;if("setToServerValue"in h)_e(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new wl;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];d=new Al(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];d=new Il(y)}else"increment"in h?d=new Rc(u,h.increment):ge(16584,{proto:h});const g=gt.fromServerFormat(h.fieldPath);return new II(g,d)})(r,a))):[];if(e.update){e.update.name;const a=Pa(r,e.update.name),l=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(d){const g=d.fieldPaths||[];return new bn(g.map((y=>gt.fromServerFormat(y))))})(e.updateMask);return new Lr(a,l,u,t,i)}return new Ll(a,l,t,i)}if(e.delete){const a=Pa(r,e.delete);return new sm(a,t)}if(e.verify){const a=Pa(r,e.verify);return new xI(a,t)}return ge(1463,{proto:e})}function ek(r,e){return r&&r.length>0?(_e(e!==void 0,14353),r.map((t=>(function(a,l){let u=a.updateTime?dn(a.updateTime):dn(l);return u.isEqual(Ee.min())&&(u=dn(l)),new jV(u,a.transformResults||[])})(t,e)))):[]}function UI(r,e){return{documents:[kI(r,e.path)]}}function jI(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=kI(r,a);const l=(function(g){if(g.length!==0)return FI(et.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((y=>(function(S){return{field:sl(S.field),direction:nk(S.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=vy(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function zI(r){let e=LI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){_e(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const S=BI(v);return S instanceof et&&y_(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((S=>(function(R){return new Ic(al(R.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let S;return S=typeof v=="object"?v.value:v,Qd(S)?null:S})(t.limit));let d=null;t.startAt&&(d=(function(v){const S=!!v.before,I=v.values||[];return new ks(I,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const S=!v.before,I=v.values||[];return new ks(I,S)})(t.endAt)),IV(e,a,u,l,h,"F",d,g)}function tk(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BI(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=al(t.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=al(t.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=al(t.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=al(t.unaryFilter.field);return ze.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return ze.create(al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return et.create(t.compositeFilter.filters.map((i=>BI(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function nk(r){return $V[r]}function ik(r){return QV[r]}function rk(r){return YV[r]}function sl(r){return{fieldPath:r.canonicalString()}}function al(r){return gt.fromServerFormat(r.fieldPath)}function FI(r){return r instanceof ze?(function(t){if(t.op==="=="){if(CS(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(RS(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CS(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(RS(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:ik(t.op),value:t.value}}})(r):r instanceof et?(function(t){const i=t.getFilters().map((a=>FI(a)));return i.length===1?i[0]:{compositeFilter:{op:rk(t.op),filters:i}}})(r):ge(54877,{filter:r})}function sk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,i,a,l=Ee.min(),u=Ee.min(),h=Mt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.yt=e}}function ak(r,e){let t;if(e.document)t=JV(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=fe.fromSegments(e.noDocument.path),a=Ga(e.noDocument.readTime);t=vt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const i=fe.fromSegments(e.unknownDocument.path),a=Ga(e.unknownDocument.version);t=vt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Ze(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function GS(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,u){return{name:Ed(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Rl(l,u.version.toTimestamp()),createTime:Rl(l,u.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ha(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Ha(e.version)}}return i}function bd(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ha(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ga(r){const e=new Ze(r.seconds,r.nanoseconds);return Ee.fromTimestamp(e)}function Ia(r,e){const t=(e.baseMutations||[]).map((l=>by(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const h=e.mutations[l+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>by(r.yt,l))),a=Ze.fromMillis(e.localWriteTimeMs);return new E_(e.batchId,a,t,i)}function nc(r){const e=Ga(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ga(r.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const u=l.documents.length;return _e(u===1,1966,{count:u}),Wn(tm(LI(l.documents[0])))})(r.query):(function(l){return Wn(zI(l))})(r.query),new wr(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Mt.fromBase64String(r.resumeToken))}function GI(r,e){const t=Ha(e.snapshotVersion),i=Ha(e.lastLimboFreeSnapshotVersion);let a;a=yd(e.target)?UI(r.yt,e.target):jI(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function KI(r){const e=zI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?vd(e,e.limit,"L"):e}function kp(r,e){return new b_(e.largestBatchId,by(r.yt,e.overlayMutation))}function KS(r,e){const t=e.path.lastSegment();return[r,ln(e.path.popLast()),t]}function $S(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ha(i.readTime),documentKey:ln(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{getBundleMetadata(e,t){return QS(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ga(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return QS(e).put((function(a){return{bundleId:a.id,createTime:Ha(dn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return YS(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:KI(l.bundledQuery),readTime:Ga(l.readTime)}})(i)}))}saveNamedQuery(e,t){return YS(e).put((function(a){return{name:a.name,readTime:Ha(dn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function QS(r){return qt(r,Yd)}function YS(r){return qt(r,Xd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new om(e,i)}getOverlay(e,t){return Gu(e).get(KS(this.userId,t)).next((i=>i?kp(this.serializer,i):null))}getOverlays(e,t){const i=Hi();return q.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,u)=>{const h=new b_(t,u);a.push(this.St(e,h))})),q.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((u=>a.add(ln(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);l.push(Gu(e).Z(hy,h))})),q.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Hi(),l=ln(t),u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Gu(e).J(hy,u).next((h=>{for(const d of h){const g=kp(this.serializer,d);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Hi();let u;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gu(e).ee({index:QA,range:h},((d,g,y)=>{const v=kp(this.serializer,g);l.size()<a||v.largestBatchId===u?(l.set(v.getKey(),v),u=v.largestBatchId):y.done()})).next((()=>l))}St(e,t){return Gu(e).put((function(a,l,u){const[h,d,g]=KS(l,u.mutation.key);return{userId:l,collectionPath:d,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Td(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Gu(r){return qt(r,Wd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{bt(e){return qt(e,d_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Mt.fromUint8Array(i):Mt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const i=ft(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),vc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Nr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Dr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?aI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):em(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ge(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Tl,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ra.Kt=new Ra;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=255;function uk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function XS(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const u=uk(255&i[l]);if(a+=u,u!==8)break}return a})(r);return Math.ceil(e/8)}class ck{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=XS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=XS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Qo),this.sn(255)}_n(){this.an(Qo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Qo?(this.sn(Qo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Qo?(this.an(Qo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class hk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class fk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ku{constructor(){this.cn=new ck,this.ln=new hk(this.cn),this.hn=new fk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Ca(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:ed(this.En),directionalValue:ed(this.dn),orderedDocumentKey:ed(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function vs(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=WS(r.En,e.En),t!==0?t:(t=WS(r.dn,e.dn),t!==0?t:fe.comparator(r.In,e.In)))}function WS(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function ed(r){return B0()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function JS(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class ZS{constructor(e){this.mn=new tt(((t,i)=>gt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=ly(e);if(t!==void 0&&!this.wn(t))return!1;const i=Sa(e);let a=new Set,l=0,u=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const d=i[l];if(!this.Sn(h,d)||!this.bn(this.fn[u++],d))return!1}++l}for(;l<i.length;++l){const h=i[l];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new tt(gt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Kf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Kf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Kf(i.field,i.dir==="asc"?0:1)));return new fd(fd.UNKNOWN_ID,this.collectionId,t,_c.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(r){if(_e(r instanceof ze||r instanceof et,20012),r instanceof ze){if(r instanceof gI){const t=r.value.arrayValue?.values?.map((i=>ze.create(r.field,"==",i)))||[];return et.create(t,"or")}return r}const e=r.filters.map((t=>$I(t)));return et.create(e,r.op)}function dk(r){if(r.getFilters().length===0)return[];const e=Ay($I(r));return _e(QI(e),7391),Sy(e)||wy(e)?[e]:e.getFilters()}function Sy(r){return r instanceof ze}function wy(r){return r instanceof et&&y_(r)}function QI(r){return Sy(r)||wy(r)||(function(t){if(t instanceof et&&gy(t)){for(const i of t.getFilters())if(!Sy(i)&&!wy(i))return!1;return!0}return!1})(r)}function Ay(r){if(_e(r instanceof ze||r instanceof et,34018),r instanceof ze)return r;if(r.filters.length===1)return Ay(r.filters[0]);const e=r.filters.map((i=>Ay(i)));let t=et.create(e,r.op);return t=Sd(t),QI(t)?t:(_e(t instanceof et,64498),_e(Sl(t),40251),_e(t.filters.length>1,57927),t.filters.reduce(((i,a)=>A_(i,a))))}function A_(r,e){let t;return _e(r instanceof ze||r instanceof et,38388),_e(e instanceof ze||e instanceof et,25473),t=r instanceof ze?e instanceof ze?(function(a,l){return et.create([a,l],"and")})(r,e):ew(r,e):e instanceof ze?ew(e,r):(function(a,l){if(_e(a.filters.length>0&&l.filters.length>0,48005),Sl(a)&&Sl(l))return fI(a,l.getFilters());const u=gy(a)?a:l,h=gy(a)?l:a,d=u.filters.map((g=>A_(g,h)));return et.create(d,"or")})(r,e),Sd(t)}function ew(r,e){if(Sl(e))return fI(e,r.getFilters());{const t=e.filters.map((i=>A_(r,i)));return et.create(t,"or")}}function Sd(r){if(_e(r instanceof ze||r instanceof et,11850),r instanceof ze)return r;const e=r.getFilters();if(e.length===1)return Sd(e[0]);if(cI(r))return r;const t=e.map((a=>Sd(a))),i=[];return t.forEach((a=>{a instanceof ze?i.push(a):a instanceof et&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:et.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.Cn=new I_}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Vn.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class I_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new tt($e.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new tt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="IndexedDbIndexManager",Of=new Uint8Array(0);class gk{constructor(e,t){this.databaseId=t,this.vn=new I_,this.Fn=new kr((i=>qa(i)),((i,a)=>Fc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:ln(a)};return nw(e).put(l)}return q.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[LA(t),""],!1,!0);return nw(e).J(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;i.push(qi(u.parent))}return i}))}addFieldIndex(e,t){const i=$u(e),a=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const u=Xo(e);return l.next((h=>{u.put($S(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=$u(e),a=Xo(e),l=Yo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$u(e),i=Yo(e),a=Xo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return q.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new ZS(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Yo(e);let a=!0;const l=new Map;return q.forEach(this.Mn(t),(u=>this.xn(e,u).next((h=>{a&&(a=!!h),l.set(u,h)})))).next((()=>{if(a){let u=Oe();const h=[];return q.forEach(l,((d,g)=>{oe(tw,`Using index ${(function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(d)} to execute ${qa(t)}`);const y=(function(te,ae){const j=ly(ae);if(j===void 0)return null;for(const se of _d(te,j.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null})(g,d),v=(function(te,ae){const j=new Map;for(const se of Sa(ae))for(const x of _d(te,se.fieldPath))switch(x.op){case"==":case"in":j.set(se.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return j.set(se.fieldPath.canonicalString(),x.value),Array.from(j.values())}return null})(g,d),S=(function(te,ae){const j=[];let se=!0;for(const x of Sa(ae)){const C=x.kind===0?PS(te,x.fieldPath,te.startAt):VS(te,x.fieldPath,te.startAt);j.push(C.value),se&&(se=C.inclusive)}return new ks(j,se)})(g,d),I=(function(te,ae){const j=[];let se=!0;for(const x of Sa(ae)){const C=x.kind===0?VS(te,x.fieldPath,te.endAt):PS(te,x.fieldPath,te.endAt);j.push(C.value),se&&(se=C.inclusive)}return new ks(j,se)})(g,d),R=this.On(d,g,S),P=this.On(d,g,I),V=this.Nn(d,g,v),Q=this.Bn(d.indexId,y,R,S.inclusive,P,I.inclusive,V);return q.forEach(Q,(Y=>i.Y(Y,t.limit).next((te=>{te.forEach((ae=>{const j=fe.fromSegments(ae.documentKey);u.has(j)||(u=u.add(j),h.push(j))}))}))))})).next((()=>h))}return q.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=dk(et.create(e.filters,"and")).map((i=>yy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,u,h){const d=(t!=null?t.length:1)*Math.max(i.length,l.length),g=d/(t!=null?t.length:1),y=[];for(let v=0;v<d;++v){const S=t?this.Ln(t[v/g]):Of,I=this.kn(e,S,i[v%g],a),R=this.qn(e,S,l[v%g],u),P=h.map((V=>this.kn(e,S,V,!0)));y.push(...this.createRange(I,R,P))}return y}kn(e,t,i,a){const l=new Ca(e,fe.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new Ca(e,fe.empty(),t,i);return a?l.An():l}xn(e,t){const i=new ZS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const h of l)i.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return q.forEach(a,(l=>this.xn(e,l).next((u=>{u?i!==0&&u.fields.length<(function(d){let g=new tt(gt.comparator),y=!1;for(const v of d.filters)for(const S of v.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?y=!0:g=g.add(S.field));for(const v of d.orderBy)v.field.isKeyField()||(g=g.add(v.field));return g.size+(y?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new Ku;for(const a of Sa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=i.Pn(a.kind);Ra.Kt.Dt(l,u)}return i.un()}Ln(e){const t=new Ku;return Ra.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Ku;return Ra.Kt.Dt(Fa(this.databaseId,t),i.Pn((function(l){const u=Sa(l);return u.length===0?0:u[u.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new Ku);let l=0;for(const u of Sa(e)){const h=i[l++];for(const d of a)if(this.Un(t,u.fieldPath)&&Ac(h))a=this.Kn(a,u,h);else{const g=d.Pn(u.kind);Ra.Kt.Dt(h,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const u of i.arrayValue.values||[])for(const h of a){const d=new Ku;d.seed(h.un()),Ra.Kt.Dt(u,d.Pn(t.kind)),l.push(d)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof ze&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=$u(e),a=Xo(e);return(t?i.J(cy,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const u=[];return q.forEach(l,(h=>a.get([h.indexId,this.uid]).next((d=>{u.push((function(y,v){const S=v?new _c(v.sequenceNumber,new Vn(Ga(v.readTime),new fe(qi(v.documentKey)),v.largestBatchId)):_c.empty(),I=y.fields.map((([R,P])=>new Kf(gt.fromServerFormat(R),P)));return new fd(y.indexId,y.collectionGroup,I,S)})(h,d))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ae(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=$u(e),l=Xo(e);return this.Gn(e).next((u=>a.J(cy,IDBKeyRange.bound(t,t)).next((h=>q.forEach(h,(d=>l.put($S(d.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return q.forEach(t,((a,l)=>{const u=i.get(a.collectionGroup);return(u?q.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((h=>(i.set(a.collectionGroup,h),q.forEach(h,(d=>this.zn(e,a,d).next((g=>{const y=this.jn(l,d);return g.isEqual(y)?q.resolve():this.Jn(e,l,d,g,y)})))))))}))}Hn(e,t,i,a){return Yo(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return Yo(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=Yo(e);let l=new tt(vs);return a.ee({index:$A,range:IDBKeyRange.only([i.indexId,this.uid,ed(this.$n(i,t))])},((u,h)=>{l=l.add(new Ca(i.indexId,t,JS(h.arrayValue),JS(h.directionalValue)))})).next((()=>l))}jn(e,t){let i=new tt(vs);const a=this.Qn(t,e);if(a==null)return i;const l=ly(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Ac(u))for(const h of u.arrayValue.values||[])i=i.add(new Ca(t.indexId,e.key,this.Ln(h),a))}else i=i.add(new Ca(t.indexId,e.key,Of,a));return i}Jn(e,t,i,a,l){oe(tw,"Updating index entries for document '%s'",t.key);const u=[];return(function(d,g,y,v,S){const I=d.getIterator(),R=g.getIterator();let P=$o(I),V=$o(R);for(;P||V;){let Q=!1,Y=!1;if(P&&V){const te=y(P,V);te<0?Y=!0:te>0&&(Q=!0)}else P!=null?Y=!0:Q=!0;Q?(v(V),V=$o(R)):Y?(S(P),P=$o(I)):(P=$o(I),V=$o(R))}})(a,l,vs,(h=>{u.push(this.Hn(e,t,i,h))}),(h=>{u.push(this.Yn(e,t,i,h))})),q.waitFor(u)}Gn(e){let t=1;return Xo(e).ee({index:KA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,h)=>vs(u,h))).filter(((u,h,d)=>!h||vs(u,d[h-1])!==0));const a=[];a.push(e);for(const u of i){const h=vs(u,e),d=vs(u,t);if(h===0)a[0]=e.An();else if(h>0&&d<0)a.push(u),a.push(u.An());else if(d>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Zn(a[u],a[u+1]))return[];const h=a[u].Vn(this.uid,Of,fe.empty()),d=a[u+1].Vn(this.uid,Of,fe.empty());l.push(IDBKeyRange.bound(h,d))}return l}Zn(e,t){return vs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iw)}getMinOffset(e,t){return q.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||ge(44426))))).next(iw)}}function nw(r){return qt(r,bc)}function Yo(r){return qt(r,uc)}function $u(r){return qt(r,f_)}function Xo(r){return qt(r,lc)}function iw(r){_e(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;u_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Vn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YI=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(r,e,t){const i=r.store(mi),a=r.store(yl),l=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:u},((y,v,S)=>(h++,S.delete())));l.push(d.next((()=>{_e(h===1,47070,{batchId:t.batchId})})));const g=[];for(const y of t.mutations){const v=qA(e,y.key.path,t.batchId);l.push(a.delete(v)),g.push(y.key)}return q.waitFor(l).next((()=>g))}function wd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ge(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(YI,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class lm{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new lm(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Es(e).ee({index:Na,range:i},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=ol(e),u=Es(e);return u.add({}).next((h=>{_e(typeof h=="number",49019);const d=new E_(h,t,i,a),g=(function(I,R,P){const V=P.baseMutations.map((Y=>Td(I.yt,Y))),Q=P.mutations.map((Y=>Td(I.yt,Y)));return{userId:R,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:V,mutations:Q}})(this.serializer,this.userId,d),y=[];let v=new tt(((S,I)=>Ae(S.canonicalString(),I.canonicalString())));for(const S of a){const I=qA(this.userId,S.key.path,h);v=v.add(S.key.path.popLast()),y.push(u.put(g)),y.push(l.put(I,HP))}return v.forEach((S=>{y.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),q.waitFor(y).next((()=>d))}))}lookupMutationBatch(e,t){return Es(e).get(t).next((i=>i?(_e(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Ia(this.serializer,i)):null))}er(e,t){return this.Xn[t]?q.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Es(e).ee({index:Na,range:a},((u,h,d)=>{h.userId===this.userId&&(_e(h.batchId>=i,47524,{tr:i}),l=Ia(this.serializer,h)),d.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Da;return Es(e).ee({index:Na,range:t,reverse:!0},((a,l,u)=>{i=l.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Da],[this.userId,Number.POSITIVE_INFINITY]);return Es(e).J(Na,t).next((i=>i.map((a=>Ia(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=$f(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return ol(e).ee({range:a},((u,h,d)=>{const[g,y,v]=u,S=qi(y);if(g===this.userId&&t.path.isEqual(S))return Es(e).get(v).next((I=>{if(!I)throw ge(61480,{nr:u,batchId:v});_e(I.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:I.userId,batchId:v}),l.push(Ia(this.serializer,I))}));d.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(Ae);const a=[];return t.forEach((l=>{const u=$f(this.userId,l.path),h=IDBKeyRange.lowerBound(u),d=ol(e).ee({range:h},((g,y,v)=>{const[S,I,R]=g,P=qi(I);S===this.userId&&l.path.isEqual(P)?i=i.add(R):v.done()}));a.push(d)})),q.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=$f(this.userId,i),u=IDBKeyRange.lowerBound(l);let h=new tt(Ae);return ol(e).ee({range:u},((d,g,y)=>{const[v,S,I]=d,R=qi(S);v===this.userId&&i.isPrefixOf(R)?R.length===a&&(h=h.add(I)):y.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Es(e).get(l).next((u=>{if(u===null)throw ge(35274,{batchId:l});_e(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),i.push(Ia(this.serializer,u))})))})),q.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return XI(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),q.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return ol(e).ee({range:i},((l,u,h)=>{if(l[0]===this.userId){const d=qi(l[1]);a.push(d)}else h.done()})).next((()=>{_e(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return WI(e,this.userId,t)}_r(e){return JI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Da,lastStreamToken:""}))}}function WI(r,e,t){const i=$f(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let u=!1;return ol(r).ee({range:l,X:!0},((h,d,g)=>{const[y,v,S]=h;y===e&&v===a&&(u=!0),g.done()})).next((()=>u))}function Es(r){return qt(r,mi)}function ol(r){return qt(r,yl)}function JI(r){return qt(r,Ec)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ka(0)}static cr(){return new Ka(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Ka(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(_e(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Wo(e).ee(((u,h)=>{const d=nc(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(a++,l.push(this.removeTargetData(e,d)))})).next((()=>q.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Wo(e).ee(((i,a)=>{const l=nc(a);t(l)}))}lr(e){return sw(e).get(gd).next((t=>(_e(t!==null,2888),t)))}hr(e,t){return sw(e).put(gd,t)}Pr(e,t){return Wo(e).put(GI(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=qa(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Wo(e).ee({range:a,index:GA},((u,h,d)=>{const g=nc(h);Fc(t,g.target)&&(l=g,d.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=As(e);return t.forEach((u=>{const h=ln(u.path);a.push(l.put({targetId:i,path:h})),a.push(this.referenceDelegate.addReference(e,i,u))})),q.waitFor(a)}removeMatchingKeys(e,t,i){const a=As(e);return q.forEach(t,(l=>{const u=ln(l.path);return q.waitFor([a.delete([i,u]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=As(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=As(e);let l=Oe();return a.ee({range:i,X:!0},((u,h,d)=>{const g=qi(u[1]),y=new fe(g);l=l.add(y)})).next((()=>l))}containsKey(e,t){const i=ln(t.path),a=IDBKeyRange.bound([i],[LA(i)],!1,!0);let l=0;return As(e).ee({index:h_,X:!0,range:a},(([u,h],d,g)=>{u!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Wo(e).get(t).next((i=>i?nc(i):null))}}function Wo(r){return qt(r,_l)}function sw(r){return qt(r,Oa)}function As(r){return qt(r,vl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="LruGarbageCollector",yk=1048576;function ow([r,e],[t,i]){const a=Ae(r,t);return a===0?Ae(e,i):a}class _k{constructor(e){this.Ir=e,this.buffer=new tt(ow),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ow(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(aw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bs(t)?oe(aw,"Ignoring IndexedDB error during garbage collection: ",t):await Ja(t)}await this.Vr(3e5)}))}}class vk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Xn.ce);const i=new _k(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(rw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,h,d,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(g=Date.now(),il()<=je.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(g-d)+`ms
Total Duration: ${g-y}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function eR(r,e){return new vk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this.db=e,this.garbageCollector=eR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return Pf(e,i)}removeReference(e,t,i){return Pf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Pf(e,t)}br(e,t){return(function(a,l){let u=!1;return JI(a).te((h=>WI(a,h,l).next((d=>(d&&(u=!0),q.resolve(!d)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((u,h)=>{if(h<=t){const d=this.br(e,u).next((g=>{if(!g)return l++,i.getEntry(e,u).next((()=>(i.removeEntry(u,Ee.min()),As(e).delete((function(v){return[0,ln(v.path)]})(u)))))}));a.push(d)}})).next((()=>q.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Pf(e,t)}Sr(e,t){const i=As(e);let a,l=Xn.ce;return i.ee({index:h_},(([u,h],{path:d,sequenceNumber:g})=>{u===0?(l!==Xn.ce&&t(new fe(qi(a)),l),l=g,a=d):l=Xn.ce})).next((()=>{l!==Xn.ce&&t(new fe(qi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pf(r,e){return As(r).put((function(i,a){return{targetId:0,path:ln(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.changes=new kr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ta(e).put(i)}removeEntry(e,t,i){return Ta(e).delete((function(l,u){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],bd(u),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=vt.newInvalidDocument(t);return Ta(e).ee({index:Qf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:vt.newInvalidDocument(t)};return Ta(e).ee({index:Qf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{i={document:this.Cr(t,l),size:wd(l)}})).next((()=>i))}getEntries(e,t){let i=Pn();return this.Fr(e,t,((a,l)=>{const u=this.Cr(a,l);i=i.insert(a,u)})).next((()=>i))}Mr(e,t){let i=Pn(),a=new mt(fe.comparator);return this.Fr(e,t,((l,u)=>{const h=this.Cr(l,u);i=i.insert(l,h),a=a.insert(l,wd(u))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return q.resolve();let a=new tt(cw);t.forEach((d=>a=a.add(d)));const l=IDBKeyRange.bound(Qu(a.first()),Qu(a.last())),u=a.getIterator();let h=u.getNext();return Ta(e).ee({index:Qf,range:l},((d,g,y)=>{const v=fe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&cw(h,v)<0;)i(h,null),h=u.getNext();h&&h.isEqual(v)&&(i(h,g),h=u.hasNext()?u.getNext():null),h?y.j(Qu(h)):y.done()})).next((()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),bd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ta(e).J(IDBKeyRange.bound(h,d,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let y=Pn();for(const v of g){const S=this.Cr(fe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);S.isFoundDocument()&&(qc(t,S)||a.has(S.key))&&(y=y.insert(S.key,S))}return y}))}getAllFromCollectionGroup(e,t,i,a){let l=Pn();const u=uw(t,i),h=uw(t,Vn.max());return Ta(e).ee({index:HA,range:IDBKeyRange.bound(u,h,!0)},((d,g,y)=>{const v=this.Cr(fe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(v.key,v),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(e){return new bk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return lw(e).get(uy).next((t=>(_e(!!t,20021),t)))}Dr(e,t){return lw(e).put(uy,t)}Cr(e,t){if(t){const i=ak(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return vt.newInvalidDocument(e)}}function nR(r){return new Tk(r)}class bk extends tR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new kr((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new tt(((l,u)=>Ae(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const h=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,h.readTime)),u.isValidDocument()){const d=GS(this.Nr.serializer,u);a=a.add(l.path.popLast());const g=wd(d);i+=g-h.size,t.push(this.Nr.addEntry(e,l,d))}else if(i-=h.size,this.trackRemovals){const d=GS(this.Nr.serializer,u.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,d))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),q.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,u)=>{this.Br.set(l,{size:u,readTime:i.get(l).readTime})})),i)))}}function lw(r){return qt(r,Tc)}function Ta(r){return qt(r,md)}function Qu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uw(r,e){const t=e.documentKey.path.toArray();return[r,bd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cw(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ae(t[l],i[l]),a)return a;return a=Ae(t.length,i.length),a||(a=Ae(t[t.length-2],i[i.length-2]),a||Ae(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&fc(i.mutation,a,bn.empty(),Ze.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const a=Hi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=ec();return l.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Hi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,i,a){let l=Pn();const u=hc(),h=(function(){return hc()})();return t.forEach(((d,g)=>{const y=i.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Lr)?l=l.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),fc(y.mutation,g,y.mutation.getFieldMask(),Ze.now())):u.set(g.key,bn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((g,y)=>u.set(g,y))),t.forEach(((g,y)=>h.set(g,new Sk(y,u.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=hc();let a=new mt(((u,h)=>u-h)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((d=>{const g=t.get(d);if(g===null)return;let y=i.get(d)||bn.empty();y=h.applyToLocalView(g,y),i.set(d,y);const v=(a.get(h.batchId)||Oe()).add(d);a=a.insert(h.batchId,v)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),g=d.key,y=d.value,v=EI();y.forEach((S=>{if(!l.has(S)){const I=RI(t.get(S),i.get(S));I!==null&&v.set(S,I),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,v))}return q.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return fe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):q.resolve(Hi());let h=yc,d=l;return u.next((g=>q.forEach(g,((y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(y)?q.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{d=d.insert(y,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,d,g,Oe()))).next((y=>({batchId:h,changes:vI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((i=>{let a=ec();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=ec();return this.indexManager.getCollectionParents(e,l).next((h=>q.forEach(h,(d=>{const g=(function(v,S){return new Za(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((y=>{y.forEach(((v,S)=>{u=u.insert(v,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((d,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,vt.newInvalidDocument(y)))}));let h=ec();return u.forEach(((d,g)=>{const y=l.get(d);y!==void 0&&fc(y.mutation,g,bn.empty(),Ze.now()),qc(t,g)&&(h=h.insert(d,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:dn(a.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:KI(a.bundledQuery),readTime:dn(a.readTime)}})(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.overlays=new mt(fe.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Hi();return q.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),q.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const a=Hi(),l=t.length+1,u=new fe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,g=d.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&d.largestBatchId>i&&a.set(d.getKey(),d)}return q.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new mt(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let y=l.get(g.largestBatchId);y===null&&(y=Hi(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Hi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=a)););return q.resolve(h)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new b_(t,i));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.Qr=new tt($t.$r),this.Ur=new tt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new fe(new $e([])),i=new $t(t,e),a=new $t(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new fe(new $e([])),i=new $t(t,e),a=new $t(t,e+1);let l=Oe();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new $t(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tt($t.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new E_(l,t,i,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new $t(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Da:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(Ae);return t.forEach((a=>{const l=new $t(a,0),u=new $t(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{i=i.add(h.Yr)}))})),q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;fe.isDocumentKey(l)||(l=l.child(""));const u=new $t(new fe(l),0);let h=new tt(Ae);return this.Zr.forEachWhile((d=>{const g=d.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(h=h.add(d.Yr)),!0)}),u),q.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return q.forEach(t.mutations,(a=>{const l=new $t(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new $t(t,0),a=this.Zr.firstAfterOrEqual(i);return q.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.ri=e,this.docs=(function(){return new mt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let i=Pn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():vt.newInvalidDocument(a))})),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Pn();const u=t.path,h=new fe(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:g,value:{document:y}}=d.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||u_(jA(y),i)<=0||(a.has(y.key)||qc(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge(9500)}ii(e,t){return q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new xk(this)}getSize(e){return q.resolve(this.size)}}class xk extends tR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.persistence=e,this.si=new kr((t=>qa(t)),Fc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new R_,this.targetCount=0,this.ai=Ka.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),q.waitFor(l).next((()=>a))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xn(0),this.li=!1,this.li=!0,this.hi=new Ik,this.referenceDelegate=e(this),this.Pi=new Nk(this),this.indexManager=new mk,this.remoteDocumentCache=(function(a){return new Ck(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new HI(t),this.Ii=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ak,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Rk(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const a=new Dk(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Dk extends BA{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Ri=new R_,this.Vi=null}static mi(e){return new um(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(i=>{const a=fe.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ad{constructor(e,t){this.persistence=e,this.pi=new kr((i=>ln(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=eR(this,t)}static mi(e,t){return new Ad(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?q.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(i++,l.removeEntry(u,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xf(e.data.value)),t}br(e,t,i){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return q.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.serializer=e}k(e,t,i,a){const l=new $d("createOrUpgrade",t);i<1&&a>=1&&((function(d){d.createObjectStore(Bc)})(e),(function(d){d.createObjectStore(Ec,{keyPath:qP}),d.createObjectStore(mi,{keyPath:TS,autoIncrement:!0}).createIndex(Na,bS,{unique:!0}),d.createObjectStore(yl)})(e),hw(e),(function(d){d.createObjectStore(wa)})(e));let u=q.resolve();return i<3&&a>=3&&(i!==0&&((function(d){d.deleteObjectStore(vl),d.deleteObjectStore(_l),d.deleteObjectStore(Oa)})(e),hw(e)),u=u.next((()=>(function(d){const g=d.store(Oa),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(gd,y)})(l)))),i<4&&a>=4&&(i!==0&&(u=u.next((()=>(function(d,g){return g.store(mi).J().next((v=>{d.deleteObjectStore(mi),d.createObjectStore(mi,{keyPath:TS,autoIncrement:!0}).createIndex(Na,bS,{unique:!0});const S=g.store(mi),I=v.map((R=>S.put(R)));return q.waitFor(I)}))})(e,l)))),u=u.next((()=>{(function(d){d.createObjectStore(El,{keyPath:JP})})(e)}))),i<5&&a>=5&&(u=u.next((()=>this.yi(l)))),i<6&&a>=6&&(u=u.next((()=>((function(d){d.createObjectStore(Tc)})(e),this.wi(l))))),i<7&&a>=7&&(u=u.next((()=>this.Si(l)))),i<8&&a>=8&&(u=u.next((()=>this.bi(e,l)))),i<9&&a>=9&&(u=u.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(u=u.next((()=>this.Di(l)))),i<11&&a>=11&&(u=u.next((()=>{(function(d){d.createObjectStore(Yd,{keyPath:ZP})})(e),(function(d){d.createObjectStore(Xd,{keyPath:eV})})(e)}))),i<12&&a>=12&&(u=u.next((()=>{(function(d){const g=d.createObjectStore(Wd,{keyPath:oV});g.createIndex(hy,lV,{unique:!1}),g.createIndex(QA,uV,{unique:!1})})(e)}))),i<13&&a>=13&&(u=u.next((()=>(function(d){const g=d.createObjectStore(md,{keyPath:GP});g.createIndex(Qf,KP),g.createIndex(HA,$P)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(wa)))),i<14&&a>=14&&(u=u.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(u=u.next((()=>(function(d){d.createObjectStore(f_,{keyPath:tV,autoIncrement:!0}).createIndex(cy,nV,{unique:!1}),d.createObjectStore(lc,{keyPath:iV}).createIndex(KA,rV,{unique:!1}),d.createObjectStore(uc,{keyPath:sV}).createIndex($A,aV,{unique:!1})})(e)))),i<16&&a>=16&&(u=u.next((()=>{t.objectStore(lc).clear()})).next((()=>{t.objectStore(uc).clear()}))),i<17&&a>=17&&(u=u.next((()=>{(function(d){d.createObjectStore(d_,{keyPath:cV})})(e)}))),i<18&&a>=18&&B0()&&(u=u.next((()=>{t.objectStore(lc).clear()})).next((()=>{t.objectStore(uc).clear()}))),u}wi(e){let t=0;return e.store(wa).ee(((i,a)=>{t+=wd(a)})).next((()=>{const i={byteSize:t};return e.store(Tc).put(uy,i)}))}yi(e){const t=e.store(Ec),i=e.store(mi);return t.J().next((a=>q.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,Da],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Na,u).next((h=>q.forEach(h,(d=>{_e(d.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const g=Ia(this.serializer,d);return XI(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(vl),i=e.store(wa);return e.store(Oa).get(gd).next((a=>{const l=[];return i.ee(((u,h)=>{const d=new $e(u),g=(function(v){return[0,ln(v)]})(d);l.push(t.get(g).next((y=>y?q.resolve():(v=>t.put({targetId:0,path:ln(v),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>q.waitFor(l)))}))}bi(e,t){e.createObjectStore(bc,{keyPath:WP});const i=t.store(bc),a=new I_,l=u=>{if(a.add(u)){const h=u.lastSegment(),d=u.popLast();return i.put({collectionId:h,parent:ln(d)})}};return t.store(wa).ee({X:!0},((u,h)=>{const d=new $e(u);return l(d.popLast())})).next((()=>t.store(yl).ee({X:!0},(([u,h,d],g)=>{const y=qi(h);return l(y.popLast())}))))}Di(e){const t=e.store(_l);return t.ee(((i,a)=>{const l=nc(a),u=GI(this.serializer,l);return t.put(u)}))}Ci(e,t){const i=t.store(wa),a=[];return i.ee(((l,u)=>{const h=t.store(md),d=(function(v){return v.document?new fe($e.fromString(v.document.name).popFirst(5)):v.noDocument?fe.fromSegments(v.noDocument.path):v.unknownDocument?fe.fromSegments(v.unknownDocument.path):ge(36783)})(u).path.toArray(),g={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(g))})).next((()=>q.waitFor(a)))}Fi(e,t){const i=t.store(mi),a=nR(this.serializer),l=new C_(um.mi,this.serializer.yt);return i.J().next((u=>{const h=new Map;return u.forEach((d=>{let g=h.get(d.userId)??Oe();Ia(this.serializer,d).keys().forEach((y=>g=g.add(y))),h.set(d.userId,g)})),q.forEach(h,((d,g)=>{const y=new en(g),v=om.wt(this.serializer,y),S=l.getIndexManager(y),I=lm.wt(y,this.serializer,S,l.referenceDelegate);return new iR(a,I,v,S).recalculateAndSaveOverlaysForDocumentKeys(new fy(t,Xn.ce),d).next()}))}))}}function hw(r){r.createObjectStore(vl,{keyPath:YP}).createIndex(h_,XP,{unique:!0}),r.createObjectStore(_l,{keyPath:"targetId"}).createIndex(GA,QP,{unique:!0}),r.createObjectStore(Oa)}const Ts="IndexedDbPersistence",Lp=18e5,Mp=5e3,Up="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pk="main";class x_{constructor(e,t,i,a,l,u,h,d,g,y,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=u,this.document=h,this.xi=g,this.Oi=y,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!x_.v())throw new le(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ek(this,a),this.$i=t+Pk,this.serializer=new HI(d),this.Ui=new Ns(this.$i,this.Ni,new Ok(this.serializer)),this.hi=new lk,this.Pi=new pk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nR(this.serializer),this.Ii=new ok,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&fn(Ts,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,Up);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Xn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Bs(e))return oe(Ts,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(Ts,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Yu(e).get(Ko).next((t=>q.resolve(this.es(t))))}ts(e){return Vf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Lp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=qt(t,El);return i.J().next((a=>{const l=this.ss(a,Lp),u=a.filter((h=>l.indexOf(h)===-1));return q.forEach(u,(h=>i.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?q.resolve(!0):Yu(e).get(Ko).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Mp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,Up);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vf(e).J().next((i=>this.ss(i,Mp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(l||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(Ts,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Bc,El],(e=>{const t=new fy(e,Xn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Vf(e).J().next((t=>this.ss(t,Lp).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return lm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return om.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){oe(Ts,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(d){return d===18?dV:d===17?JA:d===16?fV:d===15?m_:d===14?WA:d===13?XA:d===12?hV:d===11?YA:void ge(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,a,l,(h=>(u=new fy(h,this.ci?this.ci.next():Xn.ce),t==="readwrite-primary"?this.Hi(u).next((d=>!!d||this.Yi(u))).next((d=>{if(!d)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new le(Z.FAILED_PRECONDITION,zA);return i(u)})).next((d=>this.Xi(u).next((()=>d)))):this.Is(u).next((()=>i(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(e){return Yu(e).get(Ko).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Mp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(Z.FAILED_PRECONDITION,Up)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yu(e).put(Ko,t)}static v(){return Ns.v()}Zi(e){const t=Yu(e);return t.get(Ko).next((i=>this.es(i)?(oe(Ts,"Releasing primary lease."),t.delete(Ko)):q.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(fn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;z0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return oe(Ts,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return fn(Ts,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yu(r){return qt(r,Bc)}function Vf(r){return qt(r,El)}function Vk(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Oe(),a=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new N_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z0()?8:FA(Ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new kk;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(il()<=je.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(il()<=je.DEBUG&&oe("QueryEngine","Query:",rl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(il()<=je.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(t))):q.resolve())}ys(e,t){if(kS(t))return q.resolve(null);let i=Wn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=vd(t,null,"F"),i=Wn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Oe(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const g=this.Ds(t,h);return this.Cs(t,g,u,d.readTime)?this.ys(e,vd(t,null,"F")):this.vs(e,g,t,d)}))))})))))}ws(e,t,i,a){return kS(t)||a.isEqual(Ee.min())?q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?q.resolve(null):(il()<=je.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.vs(e,u,t,LP(a,yc)).next((h=>h)))}))}Ds(e,t){let i=new tt(yI(e));return t.forEach(((a,l)=>{qc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return il()<=je.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ps.getDocumentsMatchingQuery(e,t,Vn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LocalStore",Lk=3e8;class Mk{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new mt(Ae),this.xs=new kr((l=>qa(l)),Fc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sR(r,e,t,i){return new Mk(r,e,t,i)}async function aR(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],h=[];let d=Oe();for(const g of a){u.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}for(const g of l){h.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(i,d).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:h})))}))}))}function Uk(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,g,y){const v=g.batch,S=v.keys();let I=q.resolve();return S.forEach((R=>{I=I.next((()=>y.getEntry(d,R))).next((P=>{const V=g.docVersions.get(R);_e(V!==null,48541),P.version.compareTo(V)<0&&(v.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),y.addEntry(P)))}))})),I.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=Oe();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(d=d.add(h.batch.mutations[g].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function oR(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function jk(r,e){const t=Ie(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((y,v)=>{const S=a.get(v);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,v))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(Mt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,i)),a=a.insert(v,I),(function(P,V,Q){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Lk?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,I,y)&&h.push(t.Pi.updateTargetData(l,I))}));let d=Pn(),g=Oe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(zk(l,u,e.documentUpdates).next((y=>{d=y.ks,g=y.qs}))),!i.isEqual(Ee.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(y)}return q.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,g))).next((()=>d))})).then((l=>(t.Ms=a,l)))}function zk(r,e,t){let i=Oe(),a=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let u=Pn();return t.forEach(((h,d)=>{const g=l.get(h);d.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(Ee.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||d.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):oe(D_,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",d.version)})),{ks:u,qs:a}}))}function Bk(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Da),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Fk(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,q.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new wr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Iy(r,e,t){const i=Ie(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Bs(u))throw u;oe(D_,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function fw(r,e,t){const i=Ie(r);let a=Ee.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,g,y){const v=Ie(d),S=v.xs.get(y);return S!==void 0?q.resolve(v.Ms.get(S)):v.Pi.getTargetData(g,y)})(i,u,Wn(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{l=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Ee.min(),t?l:Oe()))).next((h=>(qk(i,CV(e),h),{documents:h,Qs:l})))))}function qk(r,e,t){let i=r.Os.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class dw{constructor(){this.activeTargetIds=VV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lR{constructor(){this.Mo=new dw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="ConnectivityMonitor";class gw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(mw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(mw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf=null;function Ry(){return kf===null?kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():kf++,"0x"+kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",Gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===pd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=Ry(),h=this.zo(e,t.toUriEncodedString());oe(jp,`Sending RPC '${e}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,l);const{host:g}=new URL(h),y=Xa(g);return this.Jo(e,h,d,i,y).then((v=>(oe(jp,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw za(jp,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=Gk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Qk extends Kk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=Ry();return new Promise(((h,d)=>{const g=new xA;g.setWithCredentials(!0),g.listenOnce(NA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Gf.NO_ERROR:const v=g.getResponseJson();oe(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case Gf.TIMEOUT:oe(rn,`RPC '${e}' ${u} timed out`),d(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const S=g.getStatus();if(oe(rn,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const R=I?.error;if(R&&R.status&&R.message){const P=(function(Q){const Y=Q.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Y)>=0?Y:Z.UNKNOWN})(R.status);d(new le(P,R.message))}else d(new le(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new le(Z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{oe(rn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);oe(rn,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=Ry(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=PA(),h=OA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const y=l.join("");oe(rn,`Creating RPC '${e}' stream ${a}: ${y}`,d);const v=u.createWebChannel(y,d);this.I_(v);let S=!1,I=!1;const R=new $k({Yo:V=>{I?oe(rn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(S||(oe(rn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),S=!0),oe(rn,`RPC '${e}' stream ${a} sending:`,V),v.send(V))},Zo:()=>v.close()}),P=(V,Q,Y)=>{V.listen(Q,(te=>{try{Y(te)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return P(v,Zu.EventType.OPEN,(()=>{I||(oe(rn,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),P(v,Zu.EventType.CLOSE,(()=>{I||(I=!0,oe(rn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(v))})),P(v,Zu.EventType.ERROR,(V=>{I||(I=!0,za(rn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.a_(new le(Z.UNAVAILABLE,"The operation could not be completed")))})),P(v,Zu.EventType.MESSAGE,(V=>{if(!I){const Q=V.data[0];_e(!!Q,16349);const Y=Q,te=Y?.error||Y[0]?.error;if(te){oe(rn,`RPC '${e}' stream ${a} received error:`,te);const ae=te.status;let j=(function(C){const N=kt[C];if(N!==void 0)return NI(N)})(ae),se=te.message;j===void 0&&(j=Z.INTERNAL,se="Unknown error status: "+ae+" with message "+te.message),I=!0,R.a_(new le(j,se)),v.close()}else oe(rn,`RPC '${e}' stream ${a} received:`,Q),R.u_(Q)}})),P(h,DA.STAT_EVENT,(V=>{V.stat===ay.PROXY?oe(rn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===ay.NOPROXY&&oe(rn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(r){return new XV(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="PersistentStream";class cR{constructor(e,t,i,a,l,u,h,d){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new le(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(pw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(pw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xk extends cR{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZV(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ee.min():u.readTime?dn(u.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Ty(this.serializer),t.addTarget=(function(l,u){let h;const d=u.target;if(h=yd(d)?{documents:UI(l,d)}:{query:jI(l,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=PI(l,u.resumeToken);const g=vy(l,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Rl(l,u.snapshotVersion.toTimestamp());const g=vy(l,u.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const i=tk(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Ty(this.serializer),t.removeTarget=e,this.q_(t)}}class Wk extends cR{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ek(e.writeResults,e.commitTime),i=dn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ty(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Td(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{}class Zk extends Jk{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Ey(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(Z.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Ey(t,i),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(Z.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class eL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="RemoteStore";class tL{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{eo(this)&&(oe($a,"Restarting streams for network reachability change."),await(async function(d){const g=Ie(d);g.Ea.add(4),await Gc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await hm(g)})(this))}))})),this.Ra=new eL(i,a)}}async function hm(r){if(eo(r))for(const e of r.da)await e(!0)}async function Gc(r){for(const e of r.da)await e(!1)}function hR(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),k_(t)?V_(t):Ml(t).O_()&&P_(t,e))}function O_(r,e){const t=Ie(r),i=Ml(t);t.Ia.delete(e),i.O_()&&fR(t,e),t.Ia.size===0&&(i.O_()?i.L_():eo(t)&&t.Ra.set("Unknown"))}function P_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(r).Y_(e)}function fR(r,e){r.Va.Ue(e),Ml(r).Z_(e)}function V_(r){r.Va=new KV({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ml(r).start(),r.Ra.ua()}function k_(r){return eo(r)&&!Ml(r).x_()&&r.Ia.size>0}function eo(r){return Ie(r).Ea.size===0}function dR(r){r.Va=void 0}async function nL(r){r.Ra.set("Online")}async function iL(r){r.Ia.forEach(((e,t)=>{P_(r,e)}))}async function rL(r,e){dR(r),k_(r)?(r.Ra.ha(e),V_(r)):r.Ra.set("Unknown")}async function sL(r,e,t){if(r.Ra.set("Online"),e instanceof OI&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(r,e)}catch(i){oe($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Id(r,i)}else if(e instanceof Zf?r.Va.Ze(e):e instanceof DI?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await oR(r.localStore);t.compareTo(i)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,g)=>{const y=l.Ia.get(d);if(!y)return;l.Ia.set(d,y.withResumeToken(Mt.EMPTY_BYTE_STRING,y.snapshotVersion)),fR(l,d);const v=new wr(y.target,d,g,y.sequenceNumber);P_(l,v)})),l.remoteSyncer.applyRemoteEvent(h)})(r,t)}catch(i){oe($a,"Failed to raise snapshot:",i),await Id(r,i)}}async function Id(r,e,t){if(!Bs(e))throw e;r.Ea.add(1),await Gc(r),r.Ra.set("Offline"),t||(t=()=>oR(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{oe($a,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await hm(r)}))}function mR(r,e){return e().catch((t=>Id(r,t,e)))}async function Kc(r){const e=Ie(r),t=Ls(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Da;for(;aL(e);)try{const a=await Bk(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,oL(e,a)}catch(a){await Id(e,a)}gR(e)&&pR(e)}function aL(r){return eo(r)&&r.Ta.length<10}function oL(r,e){r.Ta.push(e);const t=Ls(r);t.O_()&&t.X_&&t.ea(e.mutations)}function gR(r){return eo(r)&&!Ls(r).x_()&&r.Ta.length>0}function pR(r){Ls(r).start()}async function lL(r){Ls(r).ra()}async function uL(r){const e=Ls(r);for(const t of r.Ta)e.ea(t.mutations)}async function cL(r,e,t){const i=r.Ta.shift(),a=T_.from(i,e,t);await mR(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Kc(r)}async function hL(r,e){e&&Ls(r).X_&&await(async function(i,a){if((function(u){return qV(u)&&u!==Z.ABORTED})(a.code)){const l=i.Ta.shift();Ls(i).B_(),await mR(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Kc(i)}})(r,e),gR(r)&&pR(r)}async function yw(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),oe($a,"RemoteStore received new credentials");const i=eo(t);t.Ea.add(3),await Gc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hm(t)}async function fL(r,e){const t=Ie(r);e?(t.Ea.delete(2),await hm(t)):e||(t.Ea.add(2),await Gc(t),t.Ra.set("Unknown"))}function Ml(r){return r.ma||(r.ma=(function(t,i,a){const l=Ie(t);return l.sa(),new Xk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:nL.bind(null,r),t_:iL.bind(null,r),r_:rL.bind(null,r),H_:sL.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),k_(r)?V_(r):r.Ra.set("Unknown")):(await r.ma.stop(),dR(r))}))),r.ma}function Ls(r){return r.fa||(r.fa=(function(t,i,a){const l=Ie(t);return l.sa(),new Wk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:lL.bind(null,r),r_:hL.bind(null,r),ta:uL.bind(null,r),na:cL.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Kc(r)):(await r.fa.stop(),r.Ta.length>0&&(oe($a,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,h=new L_(e,t,u,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(r,e){if(fn("AsyncQueue",`${e}: ${r}`),Bs(r))return new le(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||fe.comparator(t.key,i.key):(t,i)=>fe.comparator(t.key,i.key),this.keyedMap=ec(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new dl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.ga=new mt(fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Cl{constructor(e,t,i,a,l,u,h,d,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Cl(e,t,dl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mL{constructor(){this.queries=vw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ie(t),l=a.queries;a.queries=vw(),l.forEach(((u,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function vw(){return new kr((r=>pI(r)),nm)}async function yR(r,e){const t=Ie(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new dL,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=M_(u,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&U_(t)}async function _R(r,e){const t=Ie(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function gL(r,e){const t=Ie(r);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(i=!0);u.wa=a}}i&&U_(t)}function pL(r,e,t){const i=Ie(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function U_(r){r.Ca.forEach((e=>{e.next()}))}var Cy,Ew;(Ew=Cy||(Cy={})).Ma="default",Ew.Cache="cache";class vR{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.key=e}}class TR{constructor(e){this.key=e}}class yL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=yI(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new _w,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const S=a.get(y),I=qc(this.query,v)?v:null,R=!!S&&this.mutatedKeys.has(S.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;S&&I?S.data.isEqual(I.data)?R!==P&&(i.track({type:3,doc:I}),V=!0):this.su(S,I)||(i.track({type:2,doc:I}),V=!0,(d&&this.eu(I,d)>0||g&&this.eu(I,g)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),V=!0):S&&!I&&(i.track({type:1,doc:S}),V=!0,(d||g)&&(h=!0)),V&&(I?(u=u.add(I),l=P?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:u,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,v)=>(function(I,R){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:V})}};return P(I)-P(R)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const h=t&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,g=d!==this.Za;return this.Za=d,u.length!==0||g?{snapshot:new Cl(this.query,e.tu,l,u,e.mutatedKeys,d===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _w,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new TR(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new ER(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const j_="SyncEngine";class _L{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class vL{constructor(e){this.key=e,this.hu=!1}}class EL{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new kr((h=>pI(h)),nm),this.Iu=new Map,this.Eu=new Set,this.du=new mt(fe.comparator),this.Au=new Map,this.Ru=new R_,this.Vu={},this.mu=new Map,this.fu=Ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TL(r,e,t=!0){const i=RR(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await bR(i,e,t,!0),a}async function bL(r,e){const t=RR(r);await bR(t,e,!0,!1)}async function bR(r,e,t,i){const a=await Fk(r.localStore,Wn(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await SL(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&hR(r.remoteStore,a),h}async function SL(r,e,t,i,a){r.pu=(v,S,I)=>(async function(P,V,Q,Y){let te=V.view.ru(Q);te.Cs&&(te=await fw(P.localStore,V.query,!1).then((({documents:x})=>V.view.ru(x,te))));const ae=Y&&Y.targetChanges.get(V.targetId),j=Y&&Y.targetMismatches.get(V.targetId)!=null,se=V.view.applyChanges(te,P.isPrimaryClient,ae,j);return bw(P,V.targetId,se.au),se.snapshot})(r,v,S,I);const l=await fw(r.localStore,e,!0),u=new yL(e,l.Qs),h=u.ru(l.documents),d=Hc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=u.applyChanges(h,r.isPrimaryClient,d);bw(r,t,g.au);const y=new _L(e,t,u);return r.Tu.set(e,y),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function wL(r,e,t){const i=Ie(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!nm(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Iy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&O_(i.remoteStore,a.targetId),xy(i,a.targetId)})).catch(Ja)):(xy(i,a.targetId),await Iy(i.localStore,a.targetId,!0))}async function AL(r,e){const t=Ie(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),O_(t.remoteStore,i.targetId))}async function IL(r,e,t){const i=CR(r);try{const a=await(function(u,h){const d=Ie(u),g=Ze.now(),y=h.reduce(((I,R)=>I.add(R.key)),Oe());let v,S;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let R=Pn(),P=Oe();return d.Ns.getEntries(I,y).next((V=>{R=V,R.forEach(((Q,Y)=>{Y.isValidDocument()||(P=P.add(Q))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,R))).next((V=>{v=V;const Q=[];for(const Y of h){const te=BV(Y,v.get(Y.key).overlayedDocument);te!=null&&Q.push(new Lr(Y.key,te,lI(te.value.mapValue),on.exists(!0)))}return d.mutationQueue.addMutationBatch(I,g,Q,h)})).next((V=>{S=V;const Q=V.applyToLocalDocumentSet(v,P);return d.documentOverlayCache.saveOverlays(I,V.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:vI(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,h,d){let g=u.Vu[u.currentUser.toKey()];g||(g=new mt(Ae)),g=g.insert(h,d),u.Vu[u.currentUser.toKey()]=g})(i,a.batchId,t),await $c(i,a.changes),await Kc(i.remoteStore)}catch(a){const l=M_(a,"Failed to persist write");t.reject(l)}}async function SR(r,e){const t=Ie(r);try{const i=await jk(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?_e(u.hu,14607):a.removedDocuments.size>0&&(_e(u.hu,42227),u.hu=!1))})),await $c(t,i,e)}catch(i){await Ja(i)}}function Tw(r,e,t){const i=Ie(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const d=Ie(u);d.onlineState=h;let g=!1;d.queries.forEach(((y,v)=>{for(const S of v.Sa)S.va(h)&&(g=!0)})),g&&U_(d)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RL(r,e,t){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new mt(fe.comparator);u=u.insert(l,vt.newNoDocument(l,Ee.min()));const h=Oe().add(l),d=new am(Ee.min(),new Map,new mt(Ae),u,h);await SR(i,d),i.du=i.du.remove(l),i.Au.delete(e),z_(i)}else await Iy(i.localStore,e,!1).then((()=>xy(i,e,t))).catch(Ja)}async function CL(r,e){const t=Ie(r),i=e.batch.batchId;try{const a=await Uk(t.localStore,e);AR(t,i,null),wR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await $c(t,a)}catch(a){await Ja(a)}}async function xL(r,e,t){const i=Ie(r);try{const a=await(function(u,h){const d=Ie(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return d.mutationQueue.lookupMutationBatch(g,h).next((v=>(_e(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(g,v)))).next((()=>d.mutationQueue.performConsistencyCheck(g))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>d.localDocuments.getDocuments(g,y)))}))})(i.localStore,e);AR(i,e,t),wR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await $c(i,a)}catch(a){await Ja(a)}}function wR(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function AR(r,e,t){const i=Ie(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function xy(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||IR(r,i)}))}function IR(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(O_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),z_(r))}function bw(r,e,t){for(const i of t)i instanceof ER?(r.Ru.addReference(i.key,e),NL(r,i)):i instanceof TR?(oe(j_,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||IR(r,i.key)):ge(19791,{wu:i})}function NL(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(oe(j_,"New document in limbo: "+t),r.Eu.add(i),z_(r))}function z_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new fe($e.fromString(e)),i=r.fu.next();r.Au.set(i,new vL(t)),r.du=r.du.insert(t,i),hR(r.remoteStore,new wr(Wn(tm(t.path)),i,"TargetPurposeLimboResolution",Xn.ce))}}async function $c(r,e,t){const i=Ie(r),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{u.push(i.pu(d,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(g){a.push(g);const y=N_.As(d.targetId,g);l.push(y)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(d,g){const y=Ie(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>q.forEach(g,(S=>q.forEach(S.Es,(I=>y.persistence.referenceDelegate.addReference(v,S.targetId,I))).next((()=>q.forEach(S.ds,(I=>y.persistence.referenceDelegate.removeReference(v,S.targetId,I)))))))))}catch(v){if(!Bs(v))throw v;oe(D_,"Failed to update sequence numbers: "+v)}for(const v of g){const S=v.targetId;if(!v.fromCache){const I=y.Ms.get(S),R=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(S,P)}}})(i.localStore,l))}async function DL(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){oe(j_,"User change. New user:",e.toKey());const i=await aR(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new le(Z.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await $c(t,i.Ls)}}function OL(r,e){const t=Ie(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let a=Oe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function RR(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=SR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RL.bind(null,e),e.Pu.H_=gL.bind(null,e.eventManager),e.Pu.yu=pL.bind(null,e.eventManager),e}function CR(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xL.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sR(this.persistence,new rR,e.initialUser,this.serializer)}Cu(e){return new C_(um.mi,this.serializer)}Du(e){return new lR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class PL extends Cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_e(this.persistence.referenceDelegate instanceof Ad,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new C_((i=>Ad.mi(i,t)),this.serializer)}}class VL extends Cc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await CR(this.xu.syncEngine),await Kc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return sR(this.persistence,new rR,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new ZI(i,e.asyncQueue,t)}Mu(e,t){const i=new zP(t,this.persistence);return new jP(e.asyncQueue,i)}Cu(e){const t=Vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new x_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Yk(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new lR}}class Rd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DL.bind(null,this.syncEngine),await fL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mL})()}createDatastore(e){const t=cm(e.databaseInfo.databaseId),i=(function(l){return new Qk(l)})(e.databaseInfo);return(function(l,u,h,d){return new Zk(l,u,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,h){return new tL(i,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Tw(this.syncEngine,t,0)),(function(){return gw.v()?new gw:new Hk})())}createSyncEngine(e,t){return(function(a,l,u,h,d,g,y){const v=new EL(a,l,u,h,d,g);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ie(t);oe($a,"RemoteStore shutting down."),i.Ea.add(5),await Gc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rd.provider={build:()=>new Rd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class kL{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=en.UNAUTHENTICATED,this.clientId=l_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{oe(Ms,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(oe(Ms,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=M_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zp(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Ms,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await aR(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Sw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await LL(r);oe(Ms,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>yw(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>yw(e.remoteStore,a))),r._onlineComponents=e}async function LL(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Ms,"Using user provided OfflineComponentProvider");try{await zp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),await zp(r,new Cc)}}else oe(Ms,"Using default OfflineComponentProvider"),await zp(r,new PL(void 0));return r._offlineComponents}async function NR(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Ms,"Using user provided OnlineComponentProvider"),await Sw(r,r._uninitializedComponentsProvider._online)):(oe(Ms,"Using default OnlineComponentProvider"),await Sw(r,new Rd))),r._onlineComponents}function ML(r){return NR(r).then((e=>e.syncEngine))}async function DR(r){const e=await NR(r),t=e.eventManager;return t.onListen=TL.bind(null,e.syncEngine),t.onUnlisten=wL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AL.bind(null,e.syncEngine),t}function UL(r,e,t={}){const i=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,d,g){const y=new xR({next:S=>{y.Nu(),u.enqueueAndForget((()=>_R(l,v)));const I=S.docs.has(h);!I&&S.fromCache?g.reject(new le(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&d&&d.source==="server"?g.reject(new le(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),v=new vR(tm(h.path),y,{includeMetadataChanges:!0,qa:!0});return yR(l,v)})(await DR(r),r.asyncQueue,e,t,i))),i.promise}function jL(r,e,t={}){const i=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,d,g){const y=new xR({next:S=>{y.Nu(),u.enqueueAndForget((()=>_R(l,v))),S.fromCache&&d.source==="server"?g.reject(new le(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),v=new vR(h,y,{includeMetadataChanges:!0,qa:!0});return yR(l,v)})(await DR(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firestore.googleapis.com",Aw=!0;class Iw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PR,this.ssl=Aw}else this.host=e.host,this.ssl=e.ssl??Aw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yk)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AP;switch(i.type){case"firstParty":return new xP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ww.get(t);i&&(oe("ComponentProvider","Removing Datastore"),ww.delete(t),i.terminate())})(this),Promise.resolve()}}function zL(r,e,t,i={}){r=Zn(r,fm);const a=Xa(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},h=`${e}:${t}`;a&&(Ky(`https://${h}`),$y("Firestore",!0)),l.host!==PR&&l.host!==h&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:a,emulatorOptions:i};if(!ka(d,u)&&(r._setSettings(d),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=en.MOCK_USER;else{g=U0(i.mockUserToken,r._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new en(v)}r._authCredentials=new IP(new kA(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class At{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(zc(t,At._jsonSchema))return new At(e,i||null,new fe($e.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Lt("string",At._jsonSchemaVersion),referencePath:Lt("string")};class Ds extends Mr{constructor(e,t,i){super(e,t,tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new fe(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function Cd(r,e,...t){if(r=Et(r),MA("collection","path",e),r instanceof fm){const i=$e.fromString(e,...t);return pS(i),new Ds(r,null,i)}{if(!(r instanceof At||r instanceof Ds))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($e.fromString(e,...t));return pS(i),new Ds(r.firestore,null,i)}}function Qc(r,e,...t){if(r=Et(r),arguments.length===1&&(e=l_.newId()),MA("doc","path",e),r instanceof fm){const i=$e.fromString(e,...t);return gS(i),new At(r,null,new fe(i))}{if(!(r instanceof At||r instanceof Ds))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($e.fromString(e,...t));return gS(i),new At(r.firestore,r instanceof Ds?r.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="AsyncQueue";class Cw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uR(this,"async_queue_retry"),this._c=()=>{const i=td();i&&oe(Rw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=td();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bs(e))throw e;oe(Rw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",xw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=L_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ge(47125,{Pc:xw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qs extends fm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Cw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cw(e),this._firestoreClient=void 0,await e}}}function BL(r,e){const t=typeof r=="object"?r:Xy(),i=typeof r=="string"?r:pd,a=Fd(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=k0("firestore");l&&zL(a,...l)}return a}function B_(r){if(r._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||VR(r),r._firestoreClient}function VR(r){const e=r._freezeSettings(),t=(function(a,l,u,h){return new gV(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,OR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new kL(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}function FL(r,e){za("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return qL(r,Rd.provider,{build:i=>new VL(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function qL(r,e,t){if((r=Zn(r,qs))._firestoreClient||r._terminated)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new le(Z.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},VR(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Mt.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Lt("string",Yn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(zc(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Lt("string",Yi._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,Xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xi(e.vectorValues);throw new le(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:Lt("string",Xi._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^__.*__$/;class GL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class kR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LR(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:r})}}class F_{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new F_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LR(this.Ac)&&HL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||cm(e)}Cc(e,t,i,a=!1){return new F_({Ac:e,methodName:t,Dc:i,path:gt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(r){const e=r._freezeSettings(),t=cm(r._databaseId);return new KL(r._databaseId,!!e.ignoreUndefinedProperties,t)}function MR(r,e,t,i,a,l={}){const u=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);H_("Data must be an object, but it was:",u,i);const h=jR(i,u);let d,g;if(l.merge)d=new bn(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const S=Ny(e,v,t);if(!u.contains(S))throw new le(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);BR(y,S)||y.push(S)}d=new bn(y),g=u.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,g=u.fieldTransforms;return new GL(new an(h),d,g)}class gm extends mm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gm}}class q_ extends mm{_toFieldTransform(e){return new II(e.path,new wl)}isEqual(e){return e instanceof q_}}function $L(r,e,t,i){const a=r.Cc(1,e,t);H_("Data must be an object, but it was:",a,i);const l=[],u=an.empty();Fs(i,((d,g)=>{const y=G_(e,d,t);g=Et(g);const v=a.yc(y);if(g instanceof gm)l.push(y);else{const S=Xc(g,v);S!=null&&(l.push(y),u.set(y,S))}}));const h=new bn(l);return new kR(u,h,a.fieldTransforms)}function QL(r,e,t,i,a,l){const u=r.Cc(1,e,t),h=[Ny(e,i,t)],d=[a];if(l.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(Ny(e,l[S])),d.push(l[S+1]);const g=[],y=an.empty();for(let S=h.length-1;S>=0;--S)if(!BR(g,h[S])){const I=h[S];let R=d[S];R=Et(R);const P=u.yc(I);if(R instanceof gm)g.push(I);else{const V=Xc(R,P);V!=null&&(g.push(I),y.set(I,V))}}const v=new bn(g);return new kR(y,v,u.fieldTransforms)}function UR(r,e,t,i=!1){return Xc(t,r.Cc(i?4:3,e))}function Xc(r,e){if(zR(r=Et(r)))return H_("Unsupported field value:",e,r),jR(r,e);if(r instanceof mm)return(function(i,a){if(!LR(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const h of i){let d=Xc(h,a.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=Et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kV(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ze.fromDate(i);return{timestampValue:Rl(a.serializer,l)}}if(i instanceof Ze){const l=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rl(a.serializer,l)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:PI(a.serializer,i._byteString)};if(i instanceof At){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:w_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xi)return(function(u,h){return{mapValue:{fields:{[g_]:{stringValue:p_},[Tl]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return v_(h.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Kd(i)}`)})(r,e)}function jR(r,e){const t={};return ZA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(r,((i,a)=>{const l=Xc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function zR(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ze||r instanceof Yi||r instanceof Yn||r instanceof At||r instanceof mm||r instanceof Xi)}function H_(r,e,t){if(!zR(t)||!UA(t)){const i=Kd(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Ny(r,e,t){if((e=Et(e))instanceof dm)return e._internalPath;if(typeof e=="string")return G_(r,e);throw xd("Field path arguments must be of type string or ",r,!1,void 0,t)}const YL=new RegExp("[~\\*/\\[\\]]");function G_(r,e,t){if(e.search(YL)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new dm(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xd(r,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${i}`),u&&(d+=` in document ${a}`),d+=")"),new le(Z.INVALID_ARGUMENT,h+r+d)}function BR(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XL extends K_{data(){return super.data()}}function pm(r,e){return typeof e=="string"?G_(r,e):e instanceof dm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $_{}class ym extends $_{}function Dy(r,e,...t){let i=[];e instanceof $_&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((d=>d instanceof Q_)).length,h=l.filter((d=>d instanceof _m)).length;if(u>1||u>0&&h>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class _m extends ym{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _m(e,t,i)}_apply(e){const t=this._parse(e);return FR(e._query,t),new Mr(e.firestore,e.converter,_y(e._query,t))}_parse(e){const t=Yc(e.firestore);return(function(l,u,h,d,g,y,v){let S;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Pw(v,y);const R=[];for(const P of v)R.push(Ow(d,l,P));S={arrayValue:{values:R}}}else S=Ow(d,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Pw(v,y),S=UR(h,u,v,y==="in"||y==="not-in");return ze.create(g,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Oy(r,e,t){const i=e,a=pm("where",r);return _m._create(a,i,t)}class Q_ extends $_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Q_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const d of h)FR(u,d),u=_y(u,d)})(e._query,t),new Mr(e.firestore,e.converter,_y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Y_ extends ym{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Y_(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(l,u)})(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Za(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Nw(r,e="asc"){const t=e,i=pm("orderBy",r);return Y_._create(i,t)}class X_ extends ym{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new X_(e,t,i)}_apply(e){return new Mr(e.firestore,e.converter,vd(e._query,this._limit,this._limitType))}}function Dw(r){return X_._create("limit",r,"F")}class W_ extends ym{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new W_(e,t,i)}_apply(e){const t=ZL(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(function(a,l){return new Za(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function JL(...r){return W_._create("startAfter",r,!1)}function ZL(r,e,t,i){if(t[0]=Et(t[0]),t[0]instanceof K_)return(function(l,u,h,d,g){if(!d)throw new le(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const v of fl(l))if(v.field.isKeyField())y.push(Fa(u,d.key));else{const S=d.data.field(v.field);if(Jd(S))throw new le(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const I=v.field.canonicalString();throw new le(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}y.push(S)}return new ks(y,g)})(r._query,r.firestore._databaseId,e,t[0]._document,i);{const a=Yc(r.firestore);return(function(u,h,d,g,y,v){const S=u.explicitOrderBy;if(y.length>S.length)throw new le(Z.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let R=0;R<y.length;R++){const P=y[R];if(S[R].field.isKeyField()){if(typeof P!="string")throw new le(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof P}`);if(!__(u)&&P.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${P}' contains a slash.`);const V=u.path.child($e.fromString(P));if(!fe.isDocumentKey(V))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const Q=new fe(V);I.push(Fa(h,Q))}else{const V=UR(d,g,P);I.push(V)}}return new ks(I,v)})(r._query,r.firestore._databaseId,a,e,t,i)}}function Ow(r,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&t.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child($e.fromString(t));if(!fe.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Fa(r,new fe(i))}if(t instanceof At)return Fa(r,t._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(t)}.`)}function Pw(r,e){if(!Array.isArray(r)||r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FR(r,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eM{convertValue(e,t="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Fs(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Tl].arrayValue?.values?.map((i=>ft(i.doubleValue)));return new Xi(t)}convertGeoPoint(e){return new Yi(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Zd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=$e.fromString(e);_e(qI(i),9688,{name:e});const a=new Ba(i.get(1),i.get(3)),l=new fe(i.popFirst(5));return a.isEqual(t)||fn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Va extends K_{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Va._jsonSchemaVersion="firestore/documentSnapshot/1.0",Va._jsonSchema={type:Lt("string",Va._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class nd extends Va{data(e={}){return super.data(e)}}class ml{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ic(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new nd(this._firestore,this._userDataWriter,i.key,i,new ic(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const d=new nd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ic(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new nd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ic(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:tM(h.type),doc:d,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=l_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(r){r=Zn(r,At);const e=Zn(r.firestore,qs);return UL(B_(e),r._key).then((t=>aM(e,r,t)))}ml._jsonSchemaVersion="firestore/querySnapshot/1.0",ml._jsonSchema={type:Lt("string",ml._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class GR extends eM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function KR(r){r=Zn(r,Mr);const e=Zn(r.firestore,qs),t=B_(e),i=new GR(e);return WL(r._query),jL(t,r._query).then((a=>new ml(e,i,r,a)))}function nM(r,e,t){r=Zn(r,At);const i=Zn(r.firestore,qs),a=qR(r.converter,e);return vm(i,[MR(Yc(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,on.none())])}function iM(r,e,t,...i){r=Zn(r,At);const a=Zn(r.firestore,qs),l=Yc(a);let u;return u=typeof(e=Et(e))=="string"||e instanceof dm?QL(l,"updateDoc",r._key,e,t,i):$L(l,"updateDoc",r._key,e),vm(a,[u.toMutation(r._key,on.exists(!0))])}function rM(r){return vm(Zn(r.firestore,qs),[new sm(r._key,on.none())])}function sM(r,e){const t=Zn(r.firestore,qs),i=Qc(r),a=qR(r.converter,e);return vm(t,[MR(Yc(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,on.exists(!1))]).then((()=>i))}function vm(r,e){return(function(i,a){const l=new Qi;return i.asyncQueue.enqueueAndForget((async()=>IL(await ML(i),a,l))),l.promise})(B_(r),e)}function aM(r,e,t){const i=t.docs.get(e._key),a=new GR(r);return new Va(r,a,e._key,i,new ic(t.hasPendingWrites,t.fromCache),e.converter)}function Vw(){return new q_("serverTimestamp")}(function(e,t=!0){(function(a){kl=a})(Wa),La(new Os("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),h=new qs(new RP(i.getProvider("auth-internal")),new NP(u,i.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(g.options.projectId,y)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ki(hS,fS,e),Ki(hS,fS,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebasestorage.googleapis.com",oM="storageBucket",lM=120*1e3,uM=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends er{constructor(e,t,i=0){super(Bp(e),`Firebase Storage: ${t} (${Bp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ji;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ji||(Ji={}));function Bp(r){return"storage/"+r}function cM(){const r="An unknown error occurred, please check the error payload for server response.";return new tr(Ji.UNKNOWN,r)}function hM(){return new tr(Ji.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fM(){return new tr(Ji.CANCELED,"User canceled the upload/download.")}function dM(r){return new tr(Ji.INVALID_URL,"Invalid URL '"+r+"'.")}function mM(r){return new tr(Ji.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function kw(r){return new tr(Ji.INVALID_ARGUMENT,r)}function QR(){return new tr(Ji.APP_DELETED,"The Firebase app was deleted.")}function gM(r){return new tr(Ji.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=pi.makeFromUrl(e,t)}catch{return new pi(e,"")}if(i.path==="")return i;throw mM(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),d={bucket:1,path:3};function g(ae){ae.path_=decodeURIComponent(ae.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${y}/b/${a}/o${S}`,"i"),R={bucket:1,path:3},P=t===$R?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",Q=new RegExp(`^https?://${P}/${a}/${V}`,"i"),te=[{regex:h,indices:d,postModify:l},{regex:I,indices:R,postModify:g},{regex:Q,indices:{bucket:1,path:2},postModify:g}];for(let ae=0;ae<te.length;ae++){const j=te[ae],se=j.regex.exec(e);if(se){const x=se[j.indices.bucket];let C=se[j.indices.path];C||(C=""),i=new pi(x,C),j.postModify(i);break}}if(i==null)throw dM(e);return i}}class pM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(r,e,t){let i=1,a=null,l=null,u=!1,h=0;function d(){return h===2}let g=!1;function y(...V){g||(g=!0,e.apply(null,V))}function v(V){a=setTimeout(()=>{a=null,r(I,d())},V)}function S(){l&&clearTimeout(l)}function I(V,...Q){if(g){S();return}if(V){S(),y.call(null,V,...Q);return}if(d()||u){S(),y.call(null,V,...Q);return}i<64&&(i*=2);let te;h===1?(h=2,te=0):te=(i+Math.random())*1e3,v(te)}let R=!1;function P(V){R||(R=!0,S(),!g&&(a!==null?(V||(h=2),clearTimeout(a),v(0)):V||(h=1)))}return v(0),l=setTimeout(()=>{u=!0,P(!0)},t),P}function _M(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(r){return r!==void 0}function Lw(r,e,t,i){if(i<e)throw kw(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw kw(`Invalid value for '${r}'. Expected ${t} or less.`)}function EM(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const a=e(i)+"="+e(r[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Nd;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Nd||(Nd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t,i,a,l,u,h,d,g,y,v,S=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=v,this.retry=S,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Lf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const d=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===Nd.NO_ERROR,d=l.getStatus();if(!h||TM(d,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Nd.ABORT;i(!1,new Lf(!1,null,y));return}const g=this.successCodes_.indexOf(d)!==-1;i(!0,new Lf(g,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());vM(d)?l(d):l()}catch(d){u(d)}else if(h!==null){const d=cM();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(a.canceled){const d=this.appDelete_?QR():fM();u(d)}else{const d=hM();u(d)}};this.canceled_?t(!1,new Lf(!1,null,!0)):this.backoffId_=yM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_M(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function SM(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function wM(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AM(r,e){e&&(r["X-Firebase-GMPID"]=e)}function IM(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function RM(r,e,t,i,a,l,u=!0,h=!1){const d=EM(r.urlParams),g=r.url+d,y=Object.assign({},r.headers);return AM(y,e),SM(y,t),wM(y,l),IM(y,i),new bM(g,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function xM(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this._service=e,t instanceof pi?this._location=t:this._location=pi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dd(e,t)}get root(){const e=new pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xM(this._location.path)}get storage(){return this._service}get parent(){const e=CM(this._location.path);if(e===null)return null;const t=new pi(this._location.bucket,e);return new Dd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw gM(e)}}function Mw(r,e){const t=e?.[oM];return t==null?null:pi.makeFromBucketSpec(t,r)}function NM(r,e,t,i={}){r.host=`${e}:${t}`;const a=Xa(e);a&&(Ky(`https://${r.host}/b`),$y("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:U0(l,r.app.options.projectId))}class DM{constructor(e,t,i,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=$R,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lM,this._maxUploadRetryTime=uM,this._requests=new Set,a!=null?this._bucket=pi.makeFromBucketSpec(a,this._host):this._bucket=Mw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pi.makeFromBucketSpec(this._url,e):this._bucket=Mw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dd(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new pM(QR());{const u=RM(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const Uw="@firebase/storage",jw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="storage";function OM(r=Xy(),e){r=Et(r);const i=Fd(r,YR).getImmediate({identifier:e}),a=k0("storage");return a&&PM(i,...a),i}function PM(r,e,t,i={}){NM(r,e,t,i)}function VM(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new DM(t,i,a,e,Wa)}function kM(){La(new Os(YR,VM,"PUBLIC").setMultipleInstances(!0)),Ki(Uw,jw,""),Ki(Uw,jw,"esm2020")}kM();const LM={apiKey:"AIzaSyBG7L3VEVZFCLUNz2TDoIuAbL20dUc_WIw",authDomain:"language-learning-ai-6a367.firebaseapp.com",projectId:"language-learning-ai-6a367",storageBucket:"language-learning-ai-6a367.appspot.com",messagingSenderId:"838945541559",appId:"1:838945541559:web:344ef0182f02309aba2c32"},J_=G0(LM),ll=TP(J_),Or=BL(J_);OM(J_);const XR=new Tr;XR.setCustomParameters({prompt:"select_account"});o2(ll,_A).catch(r=>{console.error("Errore persistenza auth:",r)});typeof window<"u"&&FL(Or).catch(r=>{r.code==="failed-precondition"?console.warn("Persistenza disponibile solo in una tab"):r.code==="unimplemented"&&console.warn("Browser non supporta persistenza")});const zw=async(r,e)=>{try{const t=Qc(Or,"users",r),i=await HR(t);if(i.exists())return console.log("User already exists, skipping creation"),i.data();const a={email:e.email||"",name:e.displayName||e.name||"",nativeLanguage:e.nativeLanguage||"en",targetLanguage:e.targetLanguage||"it",interfaceLanguage:e.interfaceLanguage||"en",level:e.level||"A1",onboardingCompleted:e.onboardingCompleted||!1,createdAt:Vw(),updatedAt:Vw(),authenticationMethods:e.authenticationMethods||["password"]};return await nM(t,a),console.log(" User profile created:",r),a}catch(t){throw console.error(" Profile creation error:",t),new Error(`Unable to create profile: ${t.message}`)}},Bw=async r=>{try{const e=Qc(Or,"users",r),t=await HR(e);return t.exists()?{uid:r,...t.data()}:null}catch(e){throw console.error(" Profile retrieval error:",e),e}},WR=F.createContext(),Ur=()=>{const r=F.useContext(WR);if(!r)throw new Error("useAuthentication must be used within AuthenticationProvider");return r},MM=({children:r})=>{const[e,t]=F.useState(null),[i,a]=F.useState(null),[l,u]=F.useState(!0),[h,d]=F.useState(null),g=async(R,P,V)=>{try{d(null);const{user:Q}=await i2(ll,R,P);return await a2(Q,{displayName:V}),await zw(Q.uid,{email:R,name:V,displayName:V,onboardingCompleted:!1,authenticationMethods:["password"]}),Q}catch(Q){throw console.error("Registration error:",Q),d(Fp(Q.code)),Q}},y=async()=>{try{d(null);const P=(await N2(ll,XR)).user;return await Bw(P.uid)||await zw(P.uid,{email:P.email,name:P.displayName,displayName:P.displayName,onboardingCompleted:!1,authenticationMethods:["google"]}),P}catch(R){throw console.error("Google login error:",R),d(Fp(R.code)),R}},v=async(R,P)=>{try{d(null);const{user:V}=await r2(ll,R,P);return V}catch(V){throw console.error("Login error:",V),d(Fp(V.code)),V}},S=async()=>{try{await h2(ll),a(null)}catch(R){throw console.error("Logout error:",R),R}};F.useEffect(()=>c2(ll,async P=>{if(t(P),P)try{const V=await Bw(P.uid);a(V)}catch(V){console.error("Profile loading error:",V),a(null)}else a(null);u(!1)}),[]);const I={currentUser:e,userProfile:i,setUserProfile:a,loading:l,error:h,register:g,login:v,loginWithGoogle:y,logout:S};return b.jsx(WR.Provider,{value:I,children:r})};function Fp(r){return{"auth/email-already-in-use":"Email already registered","auth/invalid-email":"Invalid email","auth/weak-password":"Password too weak (minimum 6 characters)","auth/user-not-found":"User not found","auth/wrong-password":"Incorrect password","auth/popup-closed-by-user":"Popup closed by user","auth/cancelled-popup-request":"Popup request cancelled","auth/account-exists-with-different-credential":"Account exists with different method"}[r]||"Unknown error"}const we=r=>typeof r=="string",Xu=()=>{let r,e;const t=new Promise((i,a)=>{r=i,e=a});return t.resolve=r,t.reject=e,t},Fw=r=>r==null?"":""+r,UM=(r,e,t)=>{r.forEach(i=>{e[i]&&(t[i]=e[i])})},jM=/###/g,qw=r=>r&&r.indexOf("###")>-1?r.replace(jM,"."):r,Hw=r=>!r||we(r),dc=(r,e,t)=>{const i=we(e)?e.split("."):e;let a=0;for(;a<i.length-1;){if(Hw(r))return{};const l=qw(i[a]);!r[l]&&t&&(r[l]=new t),Object.prototype.hasOwnProperty.call(r,l)?r=r[l]:r={},++a}return Hw(r)?{}:{obj:r,k:qw(i[a])}},Gw=(r,e,t)=>{const{obj:i,k:a}=dc(r,e,Object);if(i!==void 0||e.length===1){i[a]=t;return}let l=e[e.length-1],u=e.slice(0,e.length-1),h=dc(r,u,Object);for(;h.obj===void 0&&u.length;)l=`${u[u.length-1]}.${l}`,u=u.slice(0,u.length-1),h=dc(r,u,Object),h?.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=t},zM=(r,e,t,i)=>{const{obj:a,k:l}=dc(r,e,Object);a[l]=a[l]||[],a[l].push(t)},Od=(r,e)=>{const{obj:t,k:i}=dc(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},BM=(r,e,t)=>{const i=Od(r,t);return i!==void 0?i:Od(e,t)},JR=(r,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in r?we(r[i])||r[i]instanceof String||we(e[i])||e[i]instanceof String?t&&(r[i]=e[i]):JR(r[i],e[i],t):r[i]=e[i]);return r},Jo=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var FM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const qM=r=>we(r)?r.replace(/[&<>"'\/]/g,e=>FM[e]):r;class HM{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const GM=[" ",",","?","!",";"],KM=new HM(20),$M=(r,e,t)=>{e=e||"",t=t||"";const i=GM.filter(u=>e.indexOf(u)<0&&t.indexOf(u)<0);if(i.length===0)return!0;const a=KM.getRegExp(`(${i.map(u=>u==="?"?"\\?":u).join("|")})`);let l=!a.test(r);if(!l){const u=r.indexOf(t);u>0&&!a.test(r.substring(0,u))&&(l=!0)}return l},Py=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const i=e.split(t);let a=r;for(let l=0;l<i.length;){if(!a||typeof a!="object")return;let u,h="";for(let d=l;d<i.length;++d)if(d!==l&&(h+=t),h+=i[d],u=a[h],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&d<i.length-1)continue;l+=d-l+1;break}a=u}return a},xc=r=>r?.replace("_","-"),QM={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};class Pd{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||QM,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,a){return a&&!this.debug?null:(we(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Pd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Pd(this.logger,e)}}var Gi=new Pd;class Em{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const a=this.observers[i].get(t)||0;this.observers[i].set(t,a+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([a,l])=>{for(let u=0;u<l;u++)a(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,l])=>{for(let u=0;u<l;u++)a.apply(a,[e,...t])})}}class Kw extends Em{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,a={}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,u=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;e.indexOf(".")>-1?h=e.split("."):(h=[e,t],i&&(Array.isArray(i)?h.push(...i):we(i)&&l?h.push(...i.split(l)):h.push(i)));const d=Od(this.data,h);return!d&&!t&&!i&&e.indexOf(".")>-1&&(e=h[0],t=h[1],i=h.slice(2).join(".")),d||!u||!we(i)?d:Py(this.data?.[e]?.[t],i,l)}addResource(e,t,i,a,l={silent:!1}){const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[e,t];i&&(h=h.concat(u?i.split(u):i)),e.indexOf(".")>-1&&(h=e.split("."),a=t,t=h[1]),this.addNamespaces(t),Gw(this.data,h,a),l.silent||this.emit("added",e,t,i,a)}addResources(e,t,i,a={silent:!1}){for(const l in i)(we(i[l])||Array.isArray(i[l]))&&this.addResource(e,t,l,i[l],{silent:!0});a.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,a,l,u={silent:!1,skipCopy:!1}){let h=[e,t];e.indexOf(".")>-1&&(h=e.split("."),a=i,i=t,t=h[1]),this.addNamespaces(t);let d=Od(this.data,h)||{};u.skipCopy||(i=JSON.parse(JSON.stringify(i))),a?JR(d,i,l):d={...d,...i},Gw(this.data,h,d),u.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(a=>t[a]&&Object.keys(t[a]).length>0)}toJSON(){return this.data}}var ZR={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,i,a){return r.forEach(l=>{e=this.processors[l]?.process(e,t,i,a)??e}),e}};const e1=Symbol("i18next/PATH_KEY");function YM(){const r=[],e=Object.create(null);let t;return e.get=(i,a)=>(t?.revoke?.(),a===e1?r:(r.push(a),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Vy(r,e){const{[e1]:t}=r(YM());return t.join(e?.keySeparator??".")}const $w={},qp=r=>!we(r)&&typeof r!="boolean"&&typeof r!="number";class Vd extends Em{constructor(e,t={}){super(),UM(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const a=this.resolve(e,i);if(a?.res===void 0)return!1;const l=qp(a.res);return!(i.returnObjects===!1&&l)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let l=t.ns||this.options.defaultNS||[];const u=i&&e.indexOf(i)>-1,h=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!$M(e,i,a);if(u&&!h){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:we(l)?[l]:l};const g=e.split(i);(i!==a||i===a&&this.options.ns.indexOf(g[0])>-1)&&(l=g.shift()),e=g.join(a)}return{key:e,namespaces:we(l)?[l]:l}}translate(e,t,i){let a=typeof t=="object"?{...t}:t;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),e==null)return"";typeof e=="function"&&(e=Vy(e,{...this.options,...a})),Array.isArray(e)||(e=[String(e)]);const l=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:h,namespaces:d}=this.extractFromKey(e[e.length-1],a),g=d[d.length-1];let y=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const v=a.lng||this.language,S=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return S?l?{res:`${g}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(a)}:`${g}${y}${h}`:l?{res:h,usedKey:h,exactUsedKey:h,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(a)}:h;const I=this.resolve(e,a);let R=I?.res;const P=I?.usedKey||h,V=I?.exactUsedKey||h,Q=["[object Number]","[object Function]","[object RegExp]"],Y=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,te=!this.i18nFormat||this.i18nFormat.handleAsObject,ae=a.count!==void 0&&!we(a.count),j=Vd.hasDefaultValue(a),se=ae?this.pluralResolver.getSuffix(v,a.count,a):"",x=a.ordinal&&ae?this.pluralResolver.getSuffix(v,a.count,{ordinal:!1}):"",C=ae&&!a.ordinal&&a.count===0,N=C&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${se}`]||a[`defaultValue${x}`]||a.defaultValue;let M=R;te&&!R&&j&&(M=N);const L=qp(M),B=Object.prototype.toString.apply(M);if(te&&M&&L&&Q.indexOf(B)<0&&!(we(Y)&&Array.isArray(M))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,M,{...a,ns:d}):`key '${h} (${this.language})' returned an object instead of string.`;return l?(I.res=D,I.usedParams=this.getUsedParamsDetails(a),I):D}if(u){const D=Array.isArray(M),Le=D?[]:{},pt=D?V:P;for(const J in M)if(Object.prototype.hasOwnProperty.call(M,J)){const ue=`${pt}${u}${J}`;j&&!R?Le[J]=this.translate(ue,{...a,defaultValue:qp(N)?N[J]:void 0,joinArrays:!1,ns:d}):Le[J]=this.translate(ue,{...a,joinArrays:!1,ns:d}),Le[J]===ue&&(Le[J]=M[J])}R=Le}}else if(te&&we(Y)&&Array.isArray(R))R=R.join(Y),R&&(R=this.extendTranslation(R,e,a,i));else{let D=!1,Le=!1;!this.isValidLookup(R)&&j&&(D=!0,R=N),this.isValidLookup(R)||(Le=!0,R=h);const J=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Le?void 0:R,ue=j&&N!==R&&this.options.updateMissing;if(Le||D||ue){if(this.logger.log(ue?"updateKey":"missingKey",v,g,h,ue?N:R),u){const k=this.resolve(h,{...a,keySeparator:!1});k&&k.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ye=[];const Pe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Pe&&Pe[0])for(let k=0;k<Pe.length;k++)ye.push(Pe[k]);else this.options.saveMissingTo==="all"?ye=this.languageUtils.toResolveHierarchy(a.lng||this.language):ye.push(a.lng||this.language);const He=(k,ne,he)=>{const de=j&&he!==R?he:J;this.options.missingKeyHandler?this.options.missingKeyHandler(k,g,ne,de,ue,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(k,g,ne,de,ue,a),this.emit("missingKey",k,g,ne,R)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ae?ye.forEach(k=>{const ne=this.pluralResolver.getSuffixes(k,a);C&&a[`defaultValue${this.options.pluralSeparator}zero`]&&ne.indexOf(`${this.options.pluralSeparator}zero`)<0&&ne.push(`${this.options.pluralSeparator}zero`),ne.forEach(he=>{He([k],h+he,a[`defaultValue${he}`]||N)})}):He(ye,h,N))}R=this.extendTranslation(R,e,a,I,i),Le&&R===h&&this.options.appendNamespaceToMissingKey&&(R=`${g}${y}${h}`),(Le||D)&&this.options.parseMissingKeyHandler&&(R=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${y}${h}`:h,D?R:void 0,a))}return l?(I.res=R,I.usedParams=this.getUsedParamsDetails(a),I):R}extendTranslation(e,t,i,a,l){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const d=we(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(d){const v=e.match(this.interpolator.nestingRegexp);g=v&&v.length}let y=i.replace&&!we(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,i.lng||this.language||a.usedLng,i),d){const v=e.match(this.interpolator.nestingRegexp),S=v&&v.length;g<S&&(i.nest=!1)}!i.lng&&a&&a.res&&(i.lng=this.language||a.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>l?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const u=i.postProcess||this.options.postProcess,h=we(u)?[u]:u;return e!=null&&h?.length&&i.applyPostProcessor!==!1&&(e=ZR.handle(h,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,a,l,u,h;return we(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(i))return;const g=this.extractFromKey(d,t),y=g.key;a=y;let v=g.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const S=t.count!==void 0&&!we(t.count),I=S&&!t.ordinal&&t.count===0,R=t.context!==void 0&&(we(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(V=>{this.isValidLookup(i)||(h=V,!$w[`${P[0]}-${V}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&($w[`${P[0]}-${V}`]=!0,this.logger.warn(`key "${a}" for languages "${P.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(Q=>{if(this.isValidLookup(i))return;u=Q;const Y=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Y,y,Q,V,t);else{let ae;S&&(ae=this.pluralResolver.getSuffix(Q,t.count,t));const j=`${this.options.pluralSeparator}zero`,se=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(t.ordinal&&ae.indexOf(se)===0&&Y.push(y+ae.replace(se,this.options.pluralSeparator)),Y.push(y+ae),I&&Y.push(y+j)),R){const x=`${y}${this.options.contextSeparator||"_"}${t.context}`;Y.push(x),S&&(t.ordinal&&ae.indexOf(se)===0&&Y.push(x+ae.replace(se,this.options.pluralSeparator)),Y.push(x+ae),I&&Y.push(x+j))}}let te;for(;te=Y.pop();)this.isValidLookup(i)||(l=te,i=this.getResource(Q,V,te,t))}))})}),{res:i,usedKey:a,exactUsedKey:l,usedLng:u,usedNS:h}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,a):this.resourceStore.getResource(e,t,i,a)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!we(e.replace);let a=i?e.replace:e;if(i&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!i){a={...a};for(const l of t)delete a[l]}return a}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class Qw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gi.create("languageUtils")}getScriptPartFromCode(e){if(e=xc(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=xc(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(we(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const a=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(a))&&(t=a)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const a=this.getScriptPartFromCode(i);if(this.isSupportedCode(a))return t=a;const l=this.getLanguagePartFromCode(i);if(this.isSupportedCode(l))return t=l;t=this.options.supportedLngs.find(u=>{if(u===l)return u;if(!(u.indexOf("-")<0&&l.indexOf("-")<0)&&(u.indexOf("-")>0&&l.indexOf("-")<0&&u.substring(0,u.indexOf("-"))===l||u.indexOf(l)===0&&l.length>1))return u})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),we(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),a=[],l=u=>{u&&(this.isSupportedCode(u)?a.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return we(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(e))):we(e)&&l(this.formatLanguageCode(e)),i.forEach(u=>{a.indexOf(u)<0&&l(this.formatLanguageCode(u))}),a}}const Yw={zero:0,one:1,two:2,few:3,many:4,other:5},Xw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class XM{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Gi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=xc(e==="dev"?"en":e),a=t.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:i,type:a});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let u;try{u=new Intl.PluralRules(i,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Xw;if(!e.match(/-|_/))return Xw;const d=this.languageUtils.getLanguagePartFromCode(e);u=this.getRule(d,t)}return this.pluralRulesCache[l]=u,u}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(a=>`${t}${a}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((a,l)=>Yw[a]-Yw[l]).map(a=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,t,i={}){const a=this.getRule(e,i);return a?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const Ww=(r,e,t,i=".",a=!0)=>{let l=BM(r,e,t);return!l&&a&&we(t)&&(l=Py(r,t,i),l===void 0&&(l=Py(e,t,i))),l},Hp=r=>r.replace(/\$/g,"$$$$");class WM{constructor(e={}){this.logger=Gi.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:a,prefix:l,prefixEscaped:u,suffix:h,suffixEscaped:d,formatSeparator:g,unescapeSuffix:y,unescapePrefix:v,nestingPrefix:S,nestingPrefixEscaped:I,nestingSuffix:R,nestingSuffixEscaped:P,nestingOptionsSeparator:V,maxReplaces:Q,alwaysFormat:Y}=e.interpolation;this.escape=t!==void 0?t:qM,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=l?Jo(l):u||"{{",this.suffix=h?Jo(h):d||"}}",this.formatSeparator=g||",",this.unescapePrefix=y?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=S?Jo(S):I||Jo("$t("),this.nestingSuffix=R?Jo(R):P||Jo(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=Q||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,a){let l,u,h;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=I=>{if(I.indexOf(this.formatSeparator)<0){const Q=Ww(t,d,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,i,{...a,...t,interpolationkey:I}):Q}const R=I.split(this.formatSeparator),P=R.shift().trim(),V=R.join(this.formatSeparator).trim();return this.format(Ww(t,d,P,this.options.keySeparator,this.options.ignoreJSONStructure),V,i,{...a,...t,interpolationkey:P})};this.resetRegExp();const y=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>Hp(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?Hp(this.escape(I)):Hp(I)}].forEach(I=>{for(h=0;l=I.regex.exec(e);){const R=l[1].trim();if(u=g(R),u===void 0)if(typeof y=="function"){const V=y(e,l,a);u=we(V)?V:""}else if(a&&Object.prototype.hasOwnProperty.call(a,R))u="";else if(v){u=l[0];continue}else this.logger.warn(`missed to pass in variable ${R} for interpolating ${e}`),u="";else!we(u)&&!this.useRawValueToEscape&&(u=Fw(u));const P=I.safeValue(u);if(e=e.replace(l[0],P),v?(I.regex.lastIndex+=u.length,I.regex.lastIndex-=l[0].length):I.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),e}nest(e,t,i={}){let a,l,u;const h=(d,g)=>{const y=this.nestingOptionsSeparator;if(d.indexOf(y)<0)return d;const v=d.split(new RegExp(`${y}[ ]*{`));let S=`{${v[1]}`;d=v[0],S=this.interpolate(S,u);const I=S.match(/'/g),R=S.match(/"/g);((I?.length??0)%2===0&&!R||R.length%2!==0)&&(S=S.replace(/'/g,'"'));try{u=JSON.parse(S),g&&(u={...g,...u})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,P),`${d}${y}${S}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,d};for(;a=this.nestingRegexp.exec(e);){let d=[];u={...i},u=u.replace&&!we(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;const g=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(g!==-1&&(d=a[1].slice(g).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),a[1]=a[1].slice(0,g)),l=t(h.call(this,a[1].trim(),u),u),l&&a[0]===e&&!we(l))return l;we(l)||(l=Fw(l)),l||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),l=""),d.length&&(l=d.reduce((y,v)=>this.format(y,v,i.lng,{...i,interpolationkey:a[1].trim()}),l.trim())),e=e.replace(a[0],l),this.regexp.lastIndex=0}return e}}const JM=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const i=r.split("(");e=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);e==="currency"&&a.indexOf(":")<0?t.currency||(t.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?t.range||(t.range=a.trim()):a.split(";").forEach(u=>{if(u){const[h,...d]=u.split(":"),g=d.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();t[y]||(t[y]=g),g==="false"&&(t[y]=!1),g==="true"&&(t[y]=!0),isNaN(g)||(t[y]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},Jw=r=>{const e={};return(t,i,a)=>{let l=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(l={...l,[a.interpolationkey]:void 0});const u=i+JSON.stringify(l);let h=e[u];return h||(h=r(xc(i),a),e[u]=h),h(t)}},ZM=r=>(e,t,i)=>r(xc(t),i)(e);class e4{constructor(e={}){this.logger=Gi.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?Jw:ZM;this.formats={number:i((a,l)=>{const u=new Intl.NumberFormat(a,{...l});return h=>u.format(h)}),currency:i((a,l)=>{const u=new Intl.NumberFormat(a,{...l,style:"currency"});return h=>u.format(h)}),datetime:i((a,l)=>{const u=new Intl.DateTimeFormat(a,{...l});return h=>u.format(h)}),relativetime:i((a,l)=>{const u=new Intl.RelativeTimeFormat(a,{...l});return h=>u.format(h,l.range||"day")}),list:i((a,l)=>{const u=new Intl.ListFormat(a,{...l});return h=>u.format(h)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jw(t)}format(e,t,i,a={}){const l=t.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(h=>h.indexOf(")")>-1)){const h=l.findIndex(d=>d.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,h)].join(this.formatSeparator)}return l.reduce((h,d)=>{const{formatName:g,formatOptions:y}=JM(d);if(this.formats[g]){let v=h;try{const S=a?.formatParams?.[a.interpolationkey]||{},I=S.locale||S.lng||a.locale||a.lng||i;v=this.formats[g](h,I,{...y,...a,...S})}catch(S){this.logger.warn(S)}return v}else this.logger.warn(`there was no format function for ${g}`);return h},e)}}const t4=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class n4 extends Em{constructor(e,t,i,a={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=a,this.logger=Gi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,a.backend,a)}queueLoad(e,t,i,a){const l={},u={},h={},d={};return e.forEach(g=>{let y=!0;t.forEach(v=>{const S=`${g}|${v}`;!i.reload&&this.store.hasResourceBundle(g,v)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?u[S]===void 0&&(u[S]=!0):(this.state[S]=1,y=!1,u[S]===void 0&&(u[S]=!0),l[S]===void 0&&(l[S]=!0),d[v]===void 0&&(d[v]=!0)))}),y||(h[g]=!0)}),(Object.keys(l).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(u),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(d)}}loaded(e,t,i){const a=e.split("|"),l=a[0],u=a[1];t&&this.emit("failedLoading",l,u,t),!t&&i&&this.store.addResourceBundle(l,u,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const h={};this.queue.forEach(d=>{zM(d.loaded,[l],u),t4(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(g=>{h[g]||(h[g]={});const y=d.loaded[g];y.length&&y.forEach(v=>{h[g][v]===void 0&&(h[g][v]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(d=>!d.done)}read(e,t,i,a=0,l=this.retryTimeout,u){if(!e.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:a,wait:l,callback:u});return}this.readingCalls++;const h=(g,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(g&&y&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,a+1,l*2,u)},l);return}u(g,y)},d=this.backend[i].bind(this.backend);if(d.length===2){try{const g=d(e,t);g&&typeof g.then=="function"?g.then(y=>h(null,y)).catch(h):h(null,g)}catch(g){h(g)}return}return d(e,t,h)}prepareLoading(e,t,i={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();we(e)&&(e=this.languageUtils.toResolveHierarchy(e)),we(t)&&(t=[t]);const l=this.queueLoad(e,t,i,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach(u=>{this.loadOne(u)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),a=i[0],l=i[1];this.read(a,l,"read",void 0,void 0,(u,h)=>{u&&this.logger.warn(`${t}loading namespace ${l} for language ${a} failed`,u),!u&&h&&this.logger.log(`${t}loaded namespace ${l} for language ${a}`,h),this.loaded(e,u,h)})}saveMissing(e,t,i,a,l,u={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const d={...u,isUpdate:l},g=this.backend.create.bind(this.backend);if(g.length<6)try{let y;g.length===5?y=g(e,t,i,a,d):y=g(e,t,i,a),y&&typeof y.then=="function"?y.then(v=>h(null,v)).catch(h):h(null,y)}catch(y){h(y)}else g(e,t,i,a,h,d)}!e||!e[0]||this.store.addResource(e[0],t,i,a)}}}const Zw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),we(r[1])&&(e.defaultValue=r[1]),we(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),e0=r=>(we(r.ns)&&(r.ns=[r.ns]),we(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),we(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),Mf=()=>{},i4=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Nc extends Em{constructor(e={},t){if(super(),this.options=e0(e),this.services={},this.logger=Gi,this.modules={external:[]},i4(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(we(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=Zw();this.options={...i,...this.options,...e0(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Gi.init(a(this.modules.logger),this.options):Gi.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=e4;const y=new Qw(this.options);this.store=new Kw(this.options.resources,this.options);const v=this.services;v.logger=Gi,v.resourceStore=this.store,v.languageUtils=y,v.pluralResolver=new XM(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),g&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=a(g),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new WM(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new n4(a(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(I,...R)=>{this.emit(I,...R)}),this.modules.languageDetector&&(v.languageDetector=a(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=a(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Vd(this.services,this.options),this.translator.on("*",(I,...R)=>{this.emit(I,...R)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Mf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(...y)=>this.store[g](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(...y)=>(this.store[g](...y),this)});const h=Xu(),d=()=>{const g=(y,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(v),t(y,v)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),h}loadResources(e,t=Mf){let i=t;const a=we(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const l=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&l.indexOf(g)<0&&l.push(g)})};a?u(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>u(d)),this.options.preload?.forEach?.(h=>u(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(h)})}else i(null)}reloadResources(e,t,i){const a=Xu();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Mf),this.services.backendConnector.reload(e,t,l=>{a.resolve(),i(l)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ZR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=Xu();this.emit("languageChanging",e);const a=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,d)=>{d?this.isLanguageChangingTo===e&&(a(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,i.resolve((...g)=>this.t(...g)),t&&t(h,(...g)=>this.t(...g))},u=h=>{!e&&!h&&this.services.languageDetector&&(h=[]);const d=we(h)?h:h&&h[0],g=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(we(h)?[h]:h);g&&(this.language||a(g),this.translator.language||this.translator.changeLanguage(g),this.services.languageDetector?.cacheUserLanguage?.(g)),this.loadResources(g,y=>{l(y,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),i}getFixedT(e,t,i){const a=(l,u,...h)=>{let d;typeof u!="object"?d=this.options.overloadTranslationOptionHandler([l,u].concat(h)):d={...u},d.lng=d.lng||a.lng,d.lngs=d.lngs||a.lngs,d.ns=d.ns||a.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||i||a.keyPrefix);const g=this.options.keySeparator||".";let y;return d.keyPrefix&&Array.isArray(l)?y=l.map(v=>(typeof v=="function"&&(v=Vy(v,{...this.options,...u})),`${d.keyPrefix}${g}${v}`)):(typeof l=="function"&&(l=Vy(l,{...this.options,...u})),y=d.keyPrefix?`${d.keyPrefix}${g}${l}`:l),this.t(y,d)};return we(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=i,a}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const u=(h,d)=>{const g=this.services.backendConnector.state[`${h}|${d}`];return g===-1||g===0||g===2};if(t.precheck){const h=t.precheck(this,u);if(h!==void 0)return h}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(i,e)&&(!a||u(l,e)))}loadNamespaces(e,t){const i=Xu();return this.options.ns?(we(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{i.resolve(),t&&t(a)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Xu();we(e)&&(e=[e]);const a=this.options.preload||[],l=e.filter(u=>a.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return l.length?(this.options.preload=a.concat(l),this.loadResources(u=>{i.resolve(),t&&t(u)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const l=a.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new Qw(Zw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Nc(e,t)}cloneInstance(e={},t=Mf){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},l=new Nc(a);if((e.debug!==void 0||e.prefix!==void 0)&&(l.logger=l.logger.clone(e)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},i){const h=Object.keys(this.store.data).reduce((d,g)=>(d[g]={...this.store.data[g]},d[g]=Object.keys(d[g]).reduce((y,v)=>(y[v]={...d[g][v]},y),d[g]),d),{});l.store=new Kw(h,a),l.services.resourceStore=l.store}return l.translator=new Vd(l.services,a),l.translator.on("*",(h,...d)=>{l.emit(h,...d)}),l.init(a,t),l.translator.options=a,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ut=Nc.createInstance();Ut.createInstance=Nc.createInstance;Ut.createInstance;Ut.dir;Ut.init;Ut.loadResources;Ut.reloadResources;Ut.use;Ut.changeLanguage;Ut.getFixedT;Ut.t;Ut.exists;Ut.setDefaultNamespace;Ut.hasLoadedNamespace;Ut.loadNamespaces;Ut.loadLanguages;const r4=(r,e,t,i)=>{const a=[t,{code:e,...i||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(a,"warn","react-i18next::",!0);Qa(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...a):console?.warn&&console.warn(...a)},t0={},t1=(r,e,t,i)=>{Qa(t)&&t0[t]||(Qa(t)&&(t0[t]=new Date),r4(r,e,t,i))},n1=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},ky=(r,e,t)=>{r.loadNamespaces(e,n1(r,t))},n0=(r,e,t,i)=>{if(Qa(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return ky(r,t,i);t.forEach(a=>{r.options.ns.indexOf(a)<0&&r.options.ns.push(a)}),r.loadLanguages(e,n1(r,i))},s4=(r,e,t={})=>!e.languages||!e.languages.length?(t1(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(i,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!a(i.isLanguageChangingTo,r))return!1}}),Qa=r=>typeof r=="string",a4=r=>typeof r=="object"&&r!==null,o4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,l4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},u4=r=>l4[r],c4=r=>r.replace(o4,u4);let Ly={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:c4};const h4=(r={})=>{Ly={...Ly,...r}},f4=()=>Ly;let i1;const d4=r=>{i1=r},m4=()=>i1,g4={type:"3rdParty",init(r){h4(r.options.react),d4(r)}},p4=F.createContext();class y4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Gp={exports:{}},Kp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function _4(){if(i0)return Kp;i0=1;var r=Md();function e(v,S){return v===S&&(v!==0||1/v===1/S)||v!==v&&S!==S}var t=typeof Object.is=="function"?Object.is:e,i=r.useState,a=r.useEffect,l=r.useLayoutEffect,u=r.useDebugValue;function h(v,S){var I=S(),R=i({inst:{value:I,getSnapshot:S}}),P=R[0].inst,V=R[1];return l(function(){P.value=I,P.getSnapshot=S,d(P)&&V({inst:P})},[v,I,S]),a(function(){return d(P)&&V({inst:P}),v(function(){d(P)&&V({inst:P})})},[v]),u(I),I}function d(v){var S=v.getSnapshot;v=v.value;try{var I=S();return!t(v,I)}catch{return!0}}function g(v,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return Kp.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:y,Kp}var r0;function v4(){return r0||(r0=1,Gp.exports=_4()),Gp.exports}var E4=v4();const T4=(r,e)=>Qa(e)?e:a4(e)&&Qa(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,b4={t:T4,ready:!1},S4=()=>()=>{},r1=(r,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:a}=F.useContext(p4)||{},l=t||i||m4();l&&!l.reportNamespaces&&(l.reportNamespaces=new y4),l||t1(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=F.useMemo(()=>({...f4(),...l?.options?.react,...e}),[l,e]),{useSuspense:h,keyPrefix:d}=u,g=F.useMemo(()=>{const ae=a||l?.options?.defaultNS;return Qa(ae)?[ae]:ae||["translation"]},[r,a,l]);l?.reportNamespaces?.addUsedNamespaces?.(g);const y=F.useRef(0),v=F.useCallback(ae=>{if(!l)return S4;const{bindI18n:j,bindI18nStore:se}=u,x=()=>{y.current+=1,ae()};return j&&l.on(j,x),se&&l.store.on(se,x),()=>{j&&j.split(" ").forEach(C=>l.off(C,x)),se&&se.split(" ").forEach(C=>l.store.off(C,x))}},[l,u]),S=F.useRef(),I=F.useCallback(()=>{if(!l)return b4;const ae=!!(l.isInitialized||l.initializedStoreOnce)&&g.every(M=>s4(M,l,u)),j=e.lng||l.language,se=y.current,x=S.current;if(x&&x.ready===ae&&x.lng===j&&x.keyPrefix===d&&x.revision===se)return x;const N={t:l.getFixedT(j,u.nsMode==="fallback"?g:g[0],d),ready:ae,lng:j,keyPrefix:d,revision:se};return S.current=N,N},[l,g,d,u,e.lng]),[R,P]=F.useState(0),{t:V,ready:Q}=E4.useSyncExternalStore(v,I,I);F.useEffect(()=>{if(l&&!Q&&!h){const ae=()=>P(j=>j+1);e.lng?n0(l,e.lng,g,ae):ky(l,g,ae)}},[l,e.lng,g,Q,h,R]);const Y=l||{},te=F.useMemo(()=>{const ae=[V,Y,Q];return ae.t=V,ae.i18n=Y,ae.ready=Q,ae},[V,Y,Q]);if(l&&h&&!Q)throw new Promise(ae=>{const j=()=>ae();e.lng?n0(l,e.lng,g,j):ky(l,g,j)});return te};function w4(){const{t:r,i18n:e}=r1(),t=ei(),[i,a]=F.useState(!1),[l,u]=F.useState(!1),h=[{code:"ar",name:"",flag:""},{code:"bn",name:"",flag:""},{code:"cs",name:"etina",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"el",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"es",name:"Espaol",flag:""},{code:"fr",name:"Franais",flag:""},{code:"hi",name:"",flag:""},{code:"id",name:"Bahasa Indonesia",flag:""},{code:"it",name:"Italiano",flag:""},{code:"ja",name:"",flag:""},{code:"ko",name:"",flag:""},{code:"hu",name:"Magyar",flag:""},{code:"nl",name:"Nederlands",flag:""},{code:"pl",name:"Polski",flag:""},{code:"pt",name:"Portugus",flag:""},{code:"ro",name:"Romn",flag:""},{code:"ru",name:"",flag:""},{code:"sv",name:"svenska",flag:""},{code:"ta",name:"",flag:""},{code:"te",name:"",flag:""},{code:"th",name:"",flag:""},{code:"tl",name:"Tagalog",flag:""},{code:"tr",name:"Trke",flag:""},{code:"uk",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""},{code:"zh",name:"",flag:""}];F.useEffect(()=>{localStorage.getItem("cookieConsent")||u(!0)},[]);const d=S=>{e.changeLanguage(S),a(!1)},g=()=>{localStorage.setItem("cookieConsent","accepted"),u(!1)},y=()=>{localStorage.setItem("cookieConsent","rejected"),u(!1)},v=()=>h.find(I=>I.code===e.language)||h.find(I=>I.code==="en");return b.jsxs("div",{className:"landing-container",children:[b.jsxs("header",{className:"landing-header",children:[b.jsxs("div",{className:"header-content",children:[b.jsxs("div",{className:"logo",children:[b.jsx("img",{src:"/logo.svg",alt:"Logo"}),b.jsx("span",{className:"logo-text",children:"duolingo"})]}),b.jsxs("button",{className:"language-selector-btn",onClick:()=>a(!i),children:["LINGUA SITO: ",v().name.toUpperCase(),b.jsx("span",{className:"dropdown-icon",children:i?"":""})]})]}),i&&b.jsx("div",{className:"language-dropdown",children:b.jsx("div",{className:"language-grid",children:h.map(S=>b.jsxs("button",{className:`language-item ${e.language===S.code?"active":""}`,onClick:()=>d(S.code),children:[b.jsx("span",{className:"language-flag",children:S.flag}),b.jsx("span",{className:"language-name",children:S.name})]},S.code))})})]}),b.jsx("main",{className:"landing-main",children:b.jsxs("div",{className:"content-wrapper",children:[b.jsx("div",{className:"illustration",children:b.jsxs("div",{className:"characters",children:[b.jsx("div",{className:"character character-1",children:b.jsxs("div",{className:"character-body",children:[b.jsx("div",{className:"character-head",children:""}),b.jsx("div",{className:"character-torso"})]})}),b.jsx("div",{className:"character character-2",children:b.jsxs("div",{className:"character-body",children:[b.jsx("div",{className:"character-head",children:""}),b.jsx("div",{className:"character-torso"})]})}),b.jsx("div",{className:"character character-mascot",children:b.jsx("div",{className:"duo-mascot",children:b.jsxs("div",{className:"duo-body",children:[b.jsx("div",{className:"duo-eye duo-eye-left"}),b.jsx("div",{className:"duo-eye duo-eye-right"}),b.jsx("div",{className:"duo-beak"})]})})}),b.jsx("div",{className:"character character-3",children:b.jsxs("div",{className:"character-body",children:[b.jsx("div",{className:"character-head",children:""}),b.jsx("div",{className:"character-torso"})]})}),b.jsx("div",{className:"character character-4",children:b.jsxs("div",{className:"character-body",children:[b.jsx("div",{className:"character-head",children:""}),b.jsx("div",{className:"character-torso"})]})})]})}),b.jsxs("div",{className:"cta-section",children:[b.jsx("h1",{className:"main-title",children:r("landing.title","Il modo pi divertente e famoso al mondo per imparare l'italiano online")}),b.jsxs("div",{className:"cta-buttons",children:[b.jsx("button",{className:"btn-get-started",onClick:()=>t("/onboarding"),children:r("landing.getStarted","INIZIA ORA")}),b.jsx("button",{className:"btn-login",onClick:()=>t("/login"),children:r("landing.login","HO GI UN ACCOUNT")})]})]})]})}),l&&b.jsx("div",{className:"cookie-consent",children:b.jsxs("div",{className:"cookie-content",children:[b.jsx("h3",{children:r("cookies.title","Duo adora i cookie")}),b.jsx("p",{children:r("cookies.description",`Sia Duolingo che terze parti, come i nostri partner pubblicitari e fornitori di servizi, utilizzano cookie e tecnologie simili per fornire i nostri servizi, aiutare a personalizzare i contenuti e analizzare gli annunci. Cliccando su "Accetta Cookie", acconsenti alla nostra Informativa sull'uso dei Cookie.`)}),b.jsxs("div",{className:"cookie-actions",children:[b.jsx("button",{className:"btn-accept-cookies",onClick:g,children:r("cookies.accept","ACCETTA COOKIE")}),b.jsx("button",{className:"btn-reject-cookies",onClick:y,children:r("cookies.reject","RIFIUTA TUTTO")})]}),b.jsx("a",{href:"#",className:"cookie-policy-link",children:r("cookies.readMore","Leggi la nostra Informativa sull'uso dei Cookie")})]})})]})}function A4(){const[r,e]=F.useState(""),[t,i]=F.useState(""),[a,l]=F.useState(!1),{login:u,loginWithGoogle:h,error:d,currentUser:g,userProfile:y}=Ur(),v=ei();F.useEffect(()=>{g&&y&&(y.onboardingCompleted?v("/home",{replace:!0}):v("/onboarding",{replace:!0}))},[g,y,v]);const S=async R=>{R.preventDefault(),l(!0);try{await u(r,t)}catch(P){console.error("Login error:",P)}finally{l(!1)}},I=async()=>{l(!0);try{await h()}catch(R){console.error("Google login error:",R)}finally{l(!1)}};return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-card",children:[b.jsxs("div",{className:"auth-header",children:[b.jsx("h1",{children:" Welcome Back"}),b.jsx("p",{children:"Log in to continue your language learning journey"})]}),d&&b.jsxs("div",{className:"error-message",children:[" ",d]}),b.jsxs("form",{onSubmit:S,className:"auth-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"Email"}),b.jsx("input",{id:"email",type:"email",value:r,onChange:R=>e(R.target.value),placeholder:"your@email.com",required:!0,disabled:a})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:"Password"}),b.jsx("input",{id:"password",type:"password",value:t,onChange:R=>i(R.target.value),placeholder:"",required:!0,disabled:a})]}),b.jsx("button",{type:"submit",className:"btn-primary",disabled:a,children:a?" Logging in...":" Log In"})]}),b.jsx("div",{className:"divider",children:b.jsx("span",{children:"OR"})}),b.jsxs("button",{onClick:I,className:"btn-google",disabled:a,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Continue with Google"]}),b.jsx("div",{className:"auth-footer",children:b.jsxs("p",{children:["Don't have an account?"," ",b.jsx(zd,{to:"/registration",children:"Sign up"})]})})]})})}function I4(){const[r,e]=F.useState(""),[t,i]=F.useState(""),[a,l]=F.useState(""),[u,h]=F.useState(""),[d,g]=F.useState(!1),[y,v]=F.useState(""),{register:S,loginWithGoogle:I,error:R,currentUser:P,userProfile:V}=Ur(),Q=ei();F.useEffect(()=>{P&&V&&(V.onboardingCompleted?Q("/home",{replace:!0}):Q("/onboarding",{replace:!0}))},[P,V,Q]);const Y=async j=>{if(j.preventDefault(),v(""),a!==u){v("Passwords do not match");return}if(a.length<6){v("Password must be at least 6 characters");return}if(r.trim().length<2){v("Name must be at least 2 characters");return}g(!0);try{await S(t,a,r)}catch(se){console.error("Registration error:",se)}finally{g(!1)}},te=async()=>{g(!0);try{await I()}catch(j){console.error("Google signup error:",j)}finally{g(!1)}},ae=y||R;return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-card",children:[b.jsxs("div",{className:"auth-header",children:[b.jsx("h1",{children:" Create Account"}),b.jsx("p",{children:"Start your language learning adventure"})]}),ae&&b.jsxs("div",{className:"error-message",children:[" ",ae]}),b.jsxs("form",{onSubmit:Y,className:"auth-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"name",children:"Full Name"}),b.jsx("input",{id:"name",type:"text",value:r,onChange:j=>e(j.target.value),placeholder:"John Doe",required:!0,disabled:d})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"Email"}),b.jsx("input",{id:"email",type:"email",value:t,onChange:j=>i(j.target.value),placeholder:"your@email.com",required:!0,disabled:d})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:"Password"}),b.jsx("input",{id:"password",type:"password",value:a,onChange:j=>l(j.target.value),placeholder:"",required:!0,disabled:d,minLength:6}),b.jsx("small",{children:"Minimum 6 characters"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),b.jsx("input",{id:"confirmPassword",type:"password",value:u,onChange:j=>h(j.target.value),placeholder:"",required:!0,disabled:d})]}),b.jsx("button",{type:"submit",className:"btn-primary",disabled:d,children:d?" Creating account...":" Sign Up"})]}),b.jsx("div",{className:"divider",children:b.jsx("span",{children:"OR"})}),b.jsxs("button",{onClick:te,className:"btn-google",disabled:d,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Sign up with Google"]}),b.jsx("div",{className:"auth-footer",children:b.jsxs("p",{children:["Already have an account?"," ",b.jsx(zd,{to:"/login",children:"Log in"})]})})]})})}const di={LANGUAGE:0,GOALS:1,LEVEL:2},R4=[{code:"fr",name:"French",native:"Franais",flag:""},{code:"it",name:"Italian",native:"Italiano",flag:""},{code:"en",name:"English",native:"English",flag:""},{code:"uk",name:"Ukrainian",native:"",flag:""}],C4=[{id:"travel",icon:"",key:"goals.travel"},{id:"work",icon:"",key:"goals.work"},{id:"study",icon:"",key:"goals.study"},{id:"culture",icon:"",key:"goals.culture"},{id:"conversation",icon:"",key:"goals.conversation"},{id:"other",icon:"",key:"goals.other"}],x4=[{code:"beginner",icon:"",key:"levels.beginner"},{code:"elementary",icon:"",key:"levels.elementary"},{code:"intermediate",icon:"",key:"levels.intermediate"},{code:"advanced",icon:"",key:"levels.advanced"},{code:"native",icon:"",key:"levels.native"}];function N4(){const{t:r}=r1(),e=ei(),[t,i]=F.useState(di.LANGUAGE),[a,l]=F.useState({targetLanguage:"",goals:[],level:""}),u=Object.keys(di).length,h=(t+1)/u*100,d=R=>{l(P=>({...P,targetLanguage:R}))},g=R=>{l(P=>({...P,goals:P.goals.includes(R)?P.goals.filter(V=>V!==R):[...P.goals,R]}))},y=R=>{l(P=>({...P,level:R}))},v=()=>{if(t===di.LANGUAGE&&!a.targetLanguage){alert(r("publicOnboarding.errors.selectLanguage","Please select a language"));return}if(t===di.GOALS&&a.goals.length===0){alert(r("publicOnboarding.errors.selectGoal","Please select at least one goal"));return}if(t===di.LEVEL&&!a.level){alert(r("publicOnboarding.errors.selectLevel","Please select your level"));return}t<u-1?i(t+1):(sessionStorage.setItem("onboardingPreferences",JSON.stringify(a)),e("/registration"))},S=()=>{t>0?i(t-1):e("/")},I=()=>t===di.LANGUAGE?a.targetLanguage!=="":t===di.GOALS?a.goals.length>0:t===di.LEVEL?a.level!=="":!1;return b.jsx("div",{className:"public-onboarding-container",children:b.jsxs("div",{className:"public-onboarding-card",children:[b.jsxs("div",{className:"onboarding-header",children:[b.jsx("img",{src:"/logo.svg",alt:"Logo",className:"header-logo"}),b.jsx("span",{className:"header-title",children:"duolingo"})]}),b.jsxs("div",{className:"progress-container",children:[b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress-fill",style:{width:`${h}%`}})}),b.jsxs("span",{className:"progress-text",children:[t+1," / ",u]})]}),b.jsxs("div",{className:"step-content",children:[t===di.LANGUAGE&&b.jsxs("div",{className:"step",children:[b.jsx("h1",{children:r("publicOnboarding.language.title","Which language do you want to learn?")}),b.jsx("p",{className:"subtitle",children:r("publicOnboarding.language.subtitle","Choose the language you want to study")}),b.jsx("div",{className:"language-selection-grid",children:R4.map(R=>b.jsxs("button",{className:`language-card ${a.targetLanguage===R.code?"selected":""}`,onClick:()=>d(R.code),children:[b.jsx("span",{className:"language-flag-big",children:R.flag}),b.jsx("span",{className:"language-name-big",children:R.name}),b.jsx("span",{className:"language-native-big",children:R.native})]},R.code))})]}),t===di.GOALS&&b.jsxs("div",{className:"step",children:[b.jsx("h1",{children:r("publicOnboarding.goals.title","Why do you want to learn?")}),b.jsx("p",{className:"subtitle",children:r("publicOnboarding.goals.subtitle","Select one or more goals")}),b.jsx("div",{className:"goals-grid",children:C4.map(R=>b.jsxs("button",{className:`goal-card ${a.goals.includes(R.id)?"selected":""}`,onClick:()=>g(R.id),children:[b.jsx("span",{className:"goal-icon",children:R.icon}),b.jsx("span",{className:"goal-title",children:r(`publicOnboarding.${R.key}`,R.id)}),b.jsx("span",{className:"goal-desc",children:r(`publicOnboarding.${R.key}_desc`,"")}),a.goals.includes(R.id)&&b.jsx("span",{className:"checkmark",children:""})]},R.id))})]}),t===di.LEVEL&&b.jsxs("div",{className:"step",children:[b.jsx("h1",{children:r("publicOnboarding.level.title","What's your level?")}),b.jsx("p",{className:"subtitle",children:r("publicOnboarding.level.subtitle","In the language you want to learn")}),b.jsx("div",{className:"levels-grid",children:x4.map(R=>b.jsxs("button",{className:`level-card ${a.level===R.code?"selected":""}`,onClick:()=>y(R.code),children:[b.jsx("span",{className:"level-icon",children:R.icon}),b.jsx("span",{className:"level-title",children:r(`publicOnboarding.${R.key}`,R.code)}),b.jsx("span",{className:"level-desc",children:r(`publicOnboarding.${R.key}_desc`,"")})]},R.code))})]})]}),b.jsxs("div",{className:"onboarding-actions",children:[b.jsx("button",{onClick:S,className:"btn-back",children:t===0?" Back to Home":" Back"}),b.jsx("button",{onClick:v,className:`btn-continue ${I()?"":"disabled"}`,disabled:!I(),children:t===u-1?r("publicOnboarding.continue","Continue "):r("common.next","Next ")})]})]})})}const xl="flashcards",$p=20;async function s1(r,e){try{const t=await sM(Cd(Or,xl),{userId:r,originalWord:e.originalWord.trim(),translation:e.translation.trim(),originalLanguage:e.originalLanguage||"en-US",translationLanguage:e.translationLanguage||"it-IT",notes:e.notes||"",category:e.category||"general",createdAt:new Date().toISOString(),knowledgeLevel:1,lastReview:null,nextReview:new Date().toISOString(),reviewCount:0,easiness:2.5,interval:1});return console.log(" Flashcard created with ID:",t.id),{success:!0,id:t.id,data:{id:t.id,...e}}}catch(t){return console.error(" Flashcard creation error:",t),{success:!1,error:t.message}}}async function a1(r,e=null){try{let t=Dy(Cd(Or,xl),Oy("userId","==",r),Nw("createdAt","desc"),Dw($p));e&&(t=Dy(Cd(Or,xl),Oy("userId","==",r),Nw("createdAt","desc"),JL(e),Dw($p)));const i=await KR(t),a=i.docs.map(h=>({id:h.id,...h.data()})),l=i.docs[i.docs.length-1],u=a.length===$p;return console.log(` Retrieved ${a.length} flashcards`),{success:!0,data:a,lastDocument:l,hasMore:u}}catch(t){return console.error(" Flashcard retrieval error:",t),{success:!1,error:t.message}}}async function o1(r,e){try{const t=Qc(Or,xl,r);return await iM(t,{...e,updatedAt:new Date().toISOString()}),console.log(" Flashcard updated:",r),{success:!0}}catch(t){return console.error(" Flashcard update error:",t),{success:!1,error:t.message}}}async function l1(r){try{return await rM(Qc(Or,xl,r)),console.log(" Flashcard deleted:",r),{success:!0}}catch(e){return console.error(" Flashcard deletion error:",e),{success:!1,error:e.message}}}async function D4(r){try{console.log(" Calculating statistics for:",r);const e=Dy(Cd(Or,xl),Oy("userId","==",r)),i=(await KR(e)).docs.map(u=>u.data()),a=new Date().toISOString(),l={total:i.length,dueForReview:i.filter(u=>u.nextReview<=a).length,new:i.filter(u=>u.reviewCount===0).length,mastered:i.filter(u=>u.knowledgeLevel>=4).length,averageReviews:i.length>0?Math.round(i.reduce((u,h)=>u+(h.reviewCount||0),0)/i.length):0,byLevel:{level1:i.filter(u=>u.knowledgeLevel===1).length,level2:i.filter(u=>u.knowledgeLevel===2).length,level3:i.filter(u=>u.knowledgeLevel===3).length,level4:i.filter(u=>u.knowledgeLevel===4).length,level5:i.filter(u=>u.knowledgeLevel===5).length}};return console.log(" Statistics calculated:",l),{success:!0,data:l}}catch(e){return console.error(" Statistics calculation error:",e),{success:!1,error:e.message}}}function O4(){const{currentUser:r,userProfile:e,logout:t}=Ur(),[i,a]=F.useState(null),[l,u]=F.useState(!0),h=ei();F.useEffect(()=>{d()},[r]);const d=async()=>{if(r)try{const y=await D4(r.uid);y.success&&a(y.data)}catch(y){console.error("Error loading statistics:",y)}finally{u(!1)}},g=async()=>{try{await t(),h("/login")}catch(y){console.error("Logout error:",y)}};return b.jsxs("div",{className:"home-container",children:[b.jsxs("header",{className:"home-header",children:[b.jsxs("div",{className:"header-content",children:[b.jsxs("h1",{children:[" Welcome back, ",e?.name||"Student","!"]}),b.jsxs("p",{children:["Learning ",e?.targetLanguage?.toUpperCase()||"NEW LANGUAGE","  Level ",e?.level||"A1"]})]}),b.jsx("button",{onClick:g,className:"btn-logout",children:" Logout"})]}),b.jsxs("div",{className:"dashboard-grid",children:[b.jsxs("div",{className:"stats-section",children:[b.jsx("h2",{children:" Your Progress"}),l?b.jsx("div",{className:"loading-stats",children:"Loading statistics..."}):i?b.jsxs("div",{className:"stats-cards",children:[b.jsxs("div",{className:"stat-card",children:[b.jsx("div",{className:"stat-icon",children:""}),b.jsxs("div",{className:"stat-content",children:[b.jsx("h3",{children:i.total}),b.jsx("p",{children:"Total Flashcards"})]})]}),b.jsxs("div",{className:"stat-card highlight",children:[b.jsx("div",{className:"stat-icon",children:""}),b.jsxs("div",{className:"stat-content",children:[b.jsx("h3",{children:i.dueForReview}),b.jsx("p",{children:"Due for Review"})]})]}),b.jsxs("div",{className:"stat-card",children:[b.jsx("div",{className:"stat-icon",children:""}),b.jsxs("div",{className:"stat-content",children:[b.jsx("h3",{children:i.new}),b.jsx("p",{children:"New Cards"})]})]}),b.jsxs("div",{className:"stat-card success",children:[b.jsx("div",{className:"stat-icon",children:""}),b.jsxs("div",{className:"stat-content",children:[b.jsx("h3",{children:i.mastered}),b.jsx("p",{children:"Mastered"})]})]})]}):b.jsx("div",{className:"no-stats",children:"No statistics available yet"})]}),b.jsxs("div",{className:"actions-section",children:[b.jsx("h2",{children:" Quick Actions"}),b.jsxs("div",{className:"action-cards",children:[b.jsxs("button",{className:"action-card primary",onClick:()=>h("/study"),disabled:!i||i.dueForReview===0,children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("h3",{children:"Study Session"}),b.jsx("p",{children:i?.dueForReview>0?`${i.dueForReview} cards waiting`:"No cards due today"})]}),b.jsxs("button",{className:"action-card",onClick:()=>h("/flashcards"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("h3",{children:"Create Flashcard"}),b.jsx("p",{children:"Add new words to learn"})]}),b.jsxs("button",{className:"action-card",onClick:()=>h("/review"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("h3",{children:"Review All"}),b.jsx("p",{children:"Browse all flashcards"})]}),b.jsxs("button",{className:"action-card",onClick:()=>h("/statistics"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("h3",{children:"Statistics"}),b.jsx("p",{children:"View detailed progress"})]})]})]}),i&&b.jsxs("div",{className:"level-section",children:[b.jsx("h2",{children:" Knowledge Levels"}),b.jsx("div",{className:"level-bars",children:[1,2,3,4,5].map(y=>{const v=i.byLevel[`level${y}`]||0,S=i.total>0?v/i.total*100:0;return b.jsxs("div",{className:"level-bar",children:[b.jsxs("div",{className:"level-info",children:[b.jsxs("span",{children:["Level ",y]}),b.jsxs("span",{children:[v," cards"]})]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:`progress-fill level-${y}`,style:{width:`${S}%`}})})]},y)})})]})]}),b.jsxs("nav",{className:"home-nav",children:[b.jsxs("button",{onClick:()=>h("/home"),className:"nav-item active",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Home"})]}),b.jsxs("button",{onClick:()=>h("/flashcards"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Cards"})]}),b.jsxs("button",{onClick:()=>h("/study"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Study"})]}),b.jsxs("button",{onClick:()=>h("/statistics"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Stats"})]}),b.jsxs("button",{onClick:()=>h("/settings"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Settings"})]})]})]})}const P4="https://api.mymemory.translated.net/get",Zo=new Map;async function u1(r,e="en",t="it"){try{if(!r||r.trim().length===0)throw new Error("Empty text");if(r.length>500)throw new Error("Text too long (max 500 characters)");const i=`${r}-${e}-${t}`;if(Zo.has(i))return console.log(" Translation from cache"),Zo.get(i);const a=new URLSearchParams({q:r,langpair:`${e}|${t}`}),l=`${P4}?${a.toString()}`,u=await fetch(l);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const h=await u.json();if(h.responseStatus!==200)throw new Error(h.responseDetails||"API error");const d={success:!0,originalText:r,translation:h.responseData.translatedText,confidence:parseFloat(h.responseData.match||0),fromLang:e,toLang:t,alternatives:[],metadata:{timestamp:new Date().toISOString(),source:"MyMemory"}};if(h.matches&&Array.isArray(h.matches)&&(d.alternatives=h.matches.filter(g=>g.translation!==d.translation).slice(0,3).map(g=>({text:g.translation,confidence:parseFloat(g.match||0),source:g.reference||"Community"}))),Zo.set(i,d),Zo.size>100){const g=Zo.keys().next().value;Zo.delete(g)}return console.log(" Translation completed:",d.translation),d}catch(i){return console.error(" Translation error:",i),{success:!1,error:i.message,originalText:r,translation:null,alternatives:[]}}}function kd({initialData:r=null,onSubmit:e,onCancel:t,onTranslate:i,isEditing:a=!1}){const[l,u]=F.useState(r?.originalWord||""),[h,d]=F.useState(r?.translation||""),[g,y]=F.useState(r?.notes||""),[v,S]=F.useState(r?.category||""),[I,R]=F.useState(!1),[P,V]=F.useState(!1),[Q,Y]=F.useState(""),te=async()=>{if(!l.trim()){Y("Enter text to translate");return}if(!i){Y("Translation service not available");return}V(!0),Y("");try{const j=await i(l);j?(d(j),console.log(" Auto-translation successful")):Y("Translation failed. Please enter manually.")}catch(j){console.error(" Translation error:",j),Y("Translation error. Please try again.")}finally{V(!1)}},ae=async j=>{if(j.preventDefault(),Y(""),!l.trim()){Y("Original word is required");return}if(!h.trim()){Y("Translation is required");return}R(!0);try{const se={originalWord:l.trim(),translation:h.trim(),notes:g.trim(),category:v.trim()||"general"};await e(se),a||(u(""),d(""),y(""),S(""))}catch(se){console.error(" Form submission error:",se),Y("Failed to save flashcard. Please try again.")}finally{R(!1)}};return b.jsxs("div",{className:"flashcard-form-container",children:[b.jsx("div",{className:"form-header",children:b.jsx("h2",{children:a?" Edit Flashcard":" New Flashcard"})}),Q&&b.jsxs("div",{className:"error-message",children:[" ",Q]}),b.jsxs("form",{onSubmit:ae,className:"flashcard-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"originalWord",children:"Original Word / Phrase *"}),b.jsx("textarea",{id:"originalWord",value:l,onChange:j=>u(j.target.value),placeholder:"Enter word or phrase to learn",rows:2,disabled:I,required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"translation",children:"Translation *"}),b.jsxs("div",{className:"translation-group",children:[b.jsx("textarea",{id:"translation",value:h,onChange:j=>d(j.target.value),placeholder:"Enter translation",rows:2,disabled:I,required:!0}),i&&b.jsx("button",{type:"button",onClick:te,disabled:I||P||!l.trim(),className:"btn-translate",children:P?" Translating...":" Auto-translate"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"category",children:"Category (optional)"}),b.jsx("input",{type:"text",id:"category",value:v,onChange:j=>S(j.target.value),placeholder:"e.g., travel, work, daily",disabled:I})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"notes",children:"Notes (optional)"}),b.jsx("textarea",{id:"notes",value:g,onChange:j=>y(j.target.value),placeholder:"Add context, examples, or usage notes",rows:3,disabled:I})]}),b.jsxs("div",{className:"form-actions",children:[t&&b.jsx("button",{type:"button",onClick:t,disabled:I,className:"btn-cancel",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:I,className:"btn-submit",children:I?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"spinner-small"}),a?"Updating...":"Saving..."]}):b.jsx(b.Fragment,{children:a?" Update":" Save"})})]})]})]})}function c1({flashcard:r,onEdit:e,onDelete:t}){const[i,a]=F.useState(!1),l=()=>{a(!i)},u=v=>{v.stopPropagation(),e&&e()},h=v=>{v.stopPropagation(),t&&t()},d=r.knowledgeLevel||1,g=r.reviewCount||0,y=v=>{if(!v)return"Never";const S=new Date(v),R=Math.abs(new Date-S),P=Math.floor(R/(1e3*60*60*24));return P===0?"Today":P===1?"Yesterday":P<7?`${P} days ago`:P<30?`${Math.floor(P/7)} weeks ago`:`${Math.floor(P/30)} months ago`};return b.jsxs("div",{className:`flashcard ${i?"flipped":""}`,onClick:l,children:[b.jsxs("div",{className:"flashcard-header",children:[b.jsx("div",{className:"flashcard-level",children:[1,2,3,4,5].map(v=>b.jsx("div",{className:`level-dot ${v<=d?"filled":""}`},v))}),b.jsxs("div",{className:"flashcard-actions",children:[e&&b.jsx("button",{onClick:u,className:"icon-btn",title:"Edit flashcard",children:""}),t&&b.jsx("button",{onClick:h,className:"icon-btn",title:"Delete flashcard",children:""})]})]}),b.jsxs("div",{className:"flashcard-content",children:[b.jsx("div",{className:"flashcard-word",children:r.originalWord}),!i&&b.jsx("div",{className:"flip-hint",children:" Click to reveal"}),i&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flashcard-translation",children:r.translation}),r.notes&&b.jsx("div",{className:"flashcard-context",children:r.notes})]})]}),b.jsxs("div",{className:"flashcard-footer",children:[b.jsxs("div",{className:"review-count",children:[" ",g," ",g===1?"review":"reviews"]}),b.jsx("div",{className:"last-reviewed",children:y(r.lastReview)})]})]})}function V4(){const[r,e]=F.useState([]),[t,i]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState(null),[d,g]=F.useState("all"),[y,v]=F.useState(""),{currentUser:S,userProfile:I}=Ur(),R=ei();F.useEffect(()=>{P()},[S]);const P=async()=>{if(S)try{i(!0);const j=await a1(S.uid);j.success&&e(j.data)}catch(j){console.error("Error loading flashcards:",j)}finally{i(!1)}},V=async j=>{try{const se=await s1(S.uid,{...j,originalLanguage:I?.targetLanguage||"en",translationLanguage:I?.nativeLanguage||"it"});se.success&&(e([se.data,...r]),l(!1),console.log(" Flashcard created successfully"))}catch(se){console.error("Error creating flashcard:",se)}},Q=async(j,se)=>{try{(await o1(j,se)).success&&(e(r.map(C=>C.id===j?{...C,...se}:C)),h(null),console.log(" Flashcard updated successfully"))}catch(x){console.error("Error updating flashcard:",x)}},Y=async j=>{if(confirm("Are you sure you want to delete this flashcard?"))try{(await l1(j)).success&&(e(r.filter(x=>x.id!==j)),console.log(" Flashcard deleted successfully"))}catch(se){console.error("Error deleting flashcard:",se)}},te=async j=>{try{const se=await u1(j,I?.targetLanguage||"en",I?.nativeLanguage||"it");if(se.success)return se.translation}catch(se){console.error("Translation error:",se)}return""},ae=r.filter(j=>{if(!(y===""||j.originalWord.toLowerCase().includes(y.toLowerCase())||j.translation.toLowerCase().includes(y.toLowerCase())))return!1;switch(d){case"new":return j.reviewCount===0;case"review":return j.reviewCount>0&&j.knowledgeLevel<4;case"mastered":return j.knowledgeLevel>=4;default:return!0}});return b.jsxs("div",{className:"flashcards-container",children:[b.jsxs("header",{className:"flashcards-header",children:[b.jsxs("div",{className:"header-content",children:[b.jsx("h1",{children:" My Flashcards"}),b.jsxs("p",{children:[r.length," total cards"]})]}),b.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:" New Card"})]}),b.jsxs("div",{className:"flashcards-filters",children:[b.jsxs("div",{className:"search-bar",children:[b.jsx("span",{className:"search-icon",children:""}),b.jsx("input",{type:"text",placeholder:"Search flashcards...",value:y,onChange:j=>v(j.target.value),className:"search-input"})]}),b.jsxs("div",{className:"filter-buttons",children:[b.jsxs("button",{className:`filter-btn ${d==="all"?"active":""}`,onClick:()=>g("all"),children:[" All (",r.length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="new"?"active":""}`,onClick:()=>g("new"),children:[" New (",r.filter(j=>j.reviewCount===0).length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="review"?"active":""}`,onClick:()=>g("review"),children:[" Review (",r.filter(j=>j.reviewCount>0&&j.knowledgeLevel<4).length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="mastered"?"active":""}`,onClick:()=>g("mastered"),children:[" Mastered (",r.filter(j=>j.knowledgeLevel>=4).length,")"]})]})]}),a&&b.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:b.jsx("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:b.jsx(kd,{onSubmit:V,onCancel:()=>l(!1),onTranslate:te})})}),u&&b.jsx("div",{className:"modal-overlay",onClick:()=>h(null),children:b.jsx("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:b.jsx(kd,{initialData:u,onSubmit:j=>Q(u.id,j),onCancel:()=>h(null),onTranslate:te,isEditing:!0})})}),b.jsx("div",{className:"flashcards-content",children:t?b.jsxs("div",{className:"loading-state",children:[b.jsx("div",{className:"spinner"}),b.jsx("p",{children:"Loading flashcards..."})]}):ae.length===0?b.jsxs("div",{className:"empty-state",children:[b.jsx("div",{className:"empty-icon",children:""}),b.jsx("h2",{children:y||d!=="all"?"No flashcards match your filters":"No flashcards yet"}),b.jsx("p",{children:y||d!=="all"?"Try adjusting your search or filters":"Create your first flashcard to start learning!"}),!y&&d==="all"&&b.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:" Create First Card"})]}):b.jsx("div",{className:"flashcard-grid",children:ae.map(j=>b.jsx(c1,{flashcard:j,onEdit:()=>h(j),onDelete:()=>Y(j.id)},j.id))})}),b.jsxs("nav",{className:"bottom-nav",children:[b.jsxs("button",{onClick:()=>R("/home"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Home"})]}),b.jsxs("button",{onClick:()=>R("/flashcards"),className:"nav-item active",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Cards"})]}),b.jsxs("button",{onClick:()=>R("/study"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Study"})]}),b.jsxs("button",{onClick:()=>R("/statistics"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Stats"})]}),b.jsxs("button",{onClick:()=>R("/settings"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Settings"})]})]})]})}function k4(){const[r,e]=F.useState([]),[t,i]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState(null),[d,g]=F.useState("all"),[y,v]=F.useState(""),{currentUser:S,userProfile:I}=Ur(),R=ei();F.useEffect(()=>{P()},[S]);const P=async()=>{if(S)try{i(!0);const j=await a1(S.uid);j.success&&e(j.data)}catch(j){console.error("Error loading flashcards:",j)}finally{i(!1)}},V=async j=>{try{const se=await s1(S.uid,{...j,originalLanguage:I?.targetLanguage||"en",translationLanguage:I?.nativeLanguage||"it"});se.success&&(e([se.data,...r]),l(!1),console.log(" Flashcard created successfully"))}catch(se){console.error("Error creating flashcard:",se)}},Q=async(j,se)=>{try{(await o1(j,se)).success&&(e(r.map(C=>C.id===j?{...C,...se}:C)),h(null),console.log(" Flashcard updated successfully"))}catch(x){console.error("Error updating flashcard:",x)}},Y=async j=>{if(confirm("Are you sure you want to delete this flashcard?"))try{(await l1(j)).success&&(e(r.filter(x=>x.id!==j)),console.log(" Flashcard deleted successfully"))}catch(se){console.error("Error deleting flashcard:",se)}},te=async j=>{try{const se=await u1(j,I?.targetLanguage||"en",I?.nativeLanguage||"it");if(se.success)return se.translation}catch(se){console.error("Translation error:",se)}return""},ae=r.filter(j=>{if(!(y===""||j.originalWord.toLowerCase().includes(y.toLowerCase())||j.translation.toLowerCase().includes(y.toLowerCase())))return!1;switch(d){case"new":return j.reviewCount===0;case"review":return j.reviewCount>0&&j.knowledgeLevel<4;case"mastered":return j.knowledgeLevel>=4;default:return!0}});return b.jsxs("div",{className:"flashcards-container",children:[b.jsxs("header",{className:"flashcards-header",children:[b.jsxs("div",{className:"header-content",children:[b.jsx("h1",{children:" My Flashcards"}),b.jsxs("p",{children:[r.length," total cards"]})]}),b.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:" New Card"})]}),b.jsxs("div",{className:"flashcards-filters",children:[b.jsxs("div",{className:"search-bar",children:[b.jsx("span",{className:"search-icon",children:""}),b.jsx("input",{type:"text",placeholder:"Search flashcards...",value:y,onChange:j=>v(j.target.value),className:"search-input"})]}),b.jsxs("div",{className:"filter-buttons",children:[b.jsxs("button",{className:`filter-btn ${d==="all"?"active":""}`,onClick:()=>g("all"),children:[" All (",r.length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="new"?"active":""}`,onClick:()=>g("new"),children:[" New (",r.filter(j=>j.reviewCount===0).length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="review"?"active":""}`,onClick:()=>g("review"),children:[" Review (",r.filter(j=>j.reviewCount>0&&j.knowledgeLevel<4).length,")"]}),b.jsxs("button",{className:`filter-btn ${d==="mastered"?"active":""}`,onClick:()=>g("mastered"),children:[" Mastered (",r.filter(j=>j.knowledgeLevel>=4).length,")"]})]})]}),a&&b.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:b.jsx("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:b.jsx(kd,{onSubmit:V,onCancel:()=>l(!1),onTranslate:te})})}),u&&b.jsx("div",{className:"modal-overlay",onClick:()=>h(null),children:b.jsx("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:b.jsx(kd,{initialData:u,onSubmit:j=>Q(u.id,j),onCancel:()=>h(null),onTranslate:te,isEditing:!0})})}),b.jsx("div",{className:"flashcards-content",children:t?b.jsxs("div",{className:"loading-state",children:[b.jsx("div",{className:"spinner"}),b.jsx("p",{children:"Loading flashcards..."})]}):ae.length===0?b.jsxs("div",{className:"empty-state",children:[b.jsx("div",{className:"empty-icon",children:""}),b.jsx("h2",{children:y||d!=="all"?"No flashcards match your filters":"No flashcards yet"}),b.jsx("p",{children:y||d!=="all"?"Try adjusting your search or filters":"Create your first flashcard to start learning!"}),!y&&d==="all"&&b.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:" Create First Card"})]}):b.jsx("div",{className:"flashcard-grid",children:ae.map(j=>b.jsx(c1,{flashcard:j,onEdit:()=>h(j),onDelete:()=>Y(j.id)},j.id))})}),b.jsxs("nav",{className:"bottom-nav",children:[b.jsxs("button",{onClick:()=>R("/home"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Home"})]}),b.jsxs("button",{onClick:()=>R("/flashcards"),className:"nav-item active",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Cards"})]}),b.jsxs("button",{onClick:()=>R("/study"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Study"})]}),b.jsxs("button",{onClick:()=>R("/statistics"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Stats"})]}),b.jsxs("button",{onClick:()=>R("/settings"),className:"nav-item",children:[b.jsx("span",{children:""}),b.jsx("span",{children:"Settings"})]})]})]})}function L4(){const{logout:r}=Ur(),e=ei();async function t(){await r(),e("/login")}return b.jsxs("div",{className:"dashboard-contenitore",children:[b.jsxs("header",{className:"dashboard-header",children:[b.jsx("h1",{children:" Statistiche e Progressi"}),b.jsx("button",{onClick:t,className:"btn-logout",children:"Logout"})]}),b.jsx("main",{className:"dashboard-main",children:b.jsxs("div",{className:"sezione-lista",children:[b.jsx("h2",{children:" Pagina in Costruzione"}),b.jsx("p",{style:{textAlign:"center",color:"#666",padding:"2rem"},children:"Le statistiche dettagliate saranno disponibili presto!"}),b.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:b.jsx("button",{onClick:()=>e("/home"),style:{background:"#667eea",color:"white",border:"none",padding:"1rem 2rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Torna alla Dashboard"})})]})})]})}function M4(){const{logout:r,userProfile:e}=Ur(),t=ei();async function i(){await r(),t("/login")}return b.jsxs("div",{className:"dashboard-contenitore",children:[b.jsxs("header",{className:"dashboard-header",children:[b.jsx("h1",{children:" Impostazioni"}),b.jsx("button",{onClick:i,className:"btn-logout",children:"Logout"})]}),b.jsx("main",{className:"dashboard-main",children:b.jsxs("div",{className:"sezione-lista",children:[b.jsx("h2",{children:" Pagina in Costruzione"}),e&&b.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"12px",marginTop:"1rem"},children:[b.jsx("h3",{children:"Il Tuo Profilo"}),b.jsxs("p",{children:[b.jsx("strong",{children:"Lingua Madre:"})," ",e.nativeLanguage]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Lingua Obiettivo:"})," ",e.targetLanguage]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Livello:"})," ",e.level]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Obiettivi:"})," ",e.goals?.join(", ")]})]}),b.jsx("p",{style:{textAlign:"center",color:"#666",padding:"2rem"},children:"La possibilit di modificare le impostazioni sar disponibile presto!"}),b.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:b.jsx("button",{onClick:()=>t("/home"),style:{background:"#667eea",color:"white",border:"none",padding:"1rem 2rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Torna alla Dashboard"})})]})})]})}function U4(){const{logout:r}=Ur(),e=ei();async function t(){await r(),e("/login")}return b.jsxs("div",{className:"dashboard-contenitore",children:[b.jsxs("header",{className:"dashboard-header",children:[b.jsx("h1",{children:" AI Chat"}),b.jsx("button",{onClick:t,className:"btn-logout",children:"Logout"})]}),b.jsx("main",{className:"dashboard-main",children:b.jsxs("div",{className:"sezione-lista",children:[b.jsx("h2",{children:" Under Construction"}),b.jsx("p",{style:{textAlign:"center",color:"#666",padding:"2rem"},children:"AI chat feature coming soon!"}),b.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:b.jsx("button",{onClick:()=>e("/home"),style:{background:"#667eea",color:"white",border:"none",padding:"1rem 2rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Back to Dashboard"})})]})})]})}function el({children:r,requireOnboarding:e=!0}){const{currentUser:t,userProfile:i,loading:a}=Ur(),l=Pr();return a?b.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"1.2rem",color:"#667eea"},children:b.jsxs("div",{style:{textAlign:"center"},children:[b.jsx("div",{style:{marginBottom:"1rem"},children:""}),"Loading..."]})}):t?e?i?.onboardingCompleted?r:(console.log(" Redirecting to onboarding"),b.jsx(Uf,{to:"/onboarding",replace:!0})):i?.onboardingCompleted?(console.log(" Onboarding already completed, redirecting to home"),b.jsx(Uf,{to:"/home",replace:!0})):r:b.jsx(Uf,{to:"/login",state:{from:l},replace:!0})}function j4(){return b.jsx(MM,{children:b.jsx(_N,{children:b.jsxs(Yx,{children:[b.jsx(Qn,{path:"/",element:b.jsx(w4,{})}),b.jsx(Qn,{path:"/login",element:b.jsx(A4,{})}),b.jsx(Qn,{path:"/registration",element:b.jsx(I4,{})}),b.jsx(Qn,{path:"/onboarding",element:b.jsx(N4,{})}),b.jsx(Qn,{path:"/home",element:b.jsx(el,{children:b.jsx(O4,{})})}),b.jsx(Qn,{path:"/study",element:b.jsx(el,{children:b.jsx(V4,{})})}),b.jsx(Qn,{path:"/flashcards",element:b.jsx(el,{children:b.jsx(k4,{})})}),b.jsx(Qn,{path:"/statistics",element:b.jsx(el,{children:b.jsx(L4,{})})}),b.jsx(Qn,{path:"/settings",element:b.jsx(el,{children:b.jsx(M4,{})})}),b.jsx(Qn,{path:"/chat",element:b.jsx(el,{children:b.jsx(U4,{})})}),b.jsx(Qn,{path:"*",element:b.jsx(Uf,{to:"/",replace:!0})})]})})})}const{slice:z4,forEach:B4}=[];function F4(r){return B4.call(z4.call(arguments,1),e=>{if(e)for(const t in e)r[t]===void 0&&(r[t]=e[t])}),r}function q4(r){return typeof r!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(r))}const s0=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,H4=function(r,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(e);let l=`${r}=${a}`;if(i.maxAge>0){const u=i.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(u)}`}if(i.domain){if(!s0.test(i.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${i.domain}`}if(i.path){if(!s0.test(i.path))throw new TypeError("option path is invalid");l+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(l+="; Partitioned"),l},a0={create(r,e,t,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+t*60*1e3)),i&&(a.domain=i),document.cookie=H4(r,e,a)},read(r){const e=`${r}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let a=t[i];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null},remove(r,e){this.create(r,"",-1,e)}};var G4={name:"cookie",lookup(r){let{lookupCookie:e}=r;if(e&&typeof document<"u")return a0.read(e)||void 0},cacheUserLanguage(r,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:a,cookieOptions:l}=e;t&&typeof document<"u"&&a0.create(t,r,i,a,l)}},K4={name:"querystring",lookup(r){let{lookupQuerystring:e}=r,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const l=i.substring(1).split("&");for(let u=0;u<l.length;u++){const h=l[u].indexOf("=");h>0&&l[u].substring(0,h)===e&&(t=l[u].substring(h+1))}}return t}},$4={name:"hash",lookup(r){let{lookupHash:e,lookupFromHashIndex:t}=r,i;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const l=a.substring(1);if(e){const u=l.split("&");for(let h=0;h<u.length;h++){const d=u[h].indexOf("=");d>0&&u[h].substring(0,d)===e&&(i=u[h].substring(d+1))}}if(i)return i;if(!i&&t>-1){const u=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(u)?u[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let tl=null;const o0=()=>{if(tl!==null)return tl;try{if(tl=typeof window<"u"&&window.localStorage!==null,!tl)return!1;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{tl=!1}return tl};var Q4={name:"localStorage",lookup(r){let{lookupLocalStorage:e}=r;if(e&&o0())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupLocalStorage:t}=e;t&&o0()&&window.localStorage.setItem(t,r)}};let nl=null;const l0=()=>{if(nl!==null)return nl;try{if(nl=typeof window<"u"&&window.sessionStorage!==null,!nl)return!1;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{nl=!1}return nl};var Y4={name:"sessionStorage",lookup(r){let{lookupSessionStorage:e}=r;if(e&&l0())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupSessionStorage:t}=e;t&&l0()&&window.sessionStorage.setItem(t,r)}},X4={name:"navigator",lookup(r){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:a}=navigator;if(t)for(let l=0;l<t.length;l++)e.push(t[l]);i&&e.push(i),a&&e.push(a)}return e.length>0?e:void 0}},W4={name:"htmlTag",lookup(r){let{htmlTag:e}=r,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},J4={name:"path",lookup(r){let{lookupFromPathIndex:e}=r;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},Z4={name:"subdomain",lookup(r){let{lookupFromSubdomainIndex:e}=r;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let h1=!1;try{document.cookie,h1=!0}catch{}const f1=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];h1||f1.splice(1,1);const eU=()=>({order:f1,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class d1{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=F4(t,this.options||{},eU()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(G4),this.addDetector(K4),this.addDetector(Q4),this.addDetector(Y4),this.addDetector(X4),this.addDetector(W4),this.addDetector(J4),this.addDetector(Z4),this.addDetector($4)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let a=this.detectors[i].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(t=t.concat(a))}}),t=t.filter(i=>i!=null&&!q4(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}d1.type="languageDetector";function My(r){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(r)}function m1(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":My(XMLHttpRequest))==="object"}function tU(r){return!!r&&typeof r.then=="function"}function nU(r){return tU(r)?r:Promise.resolve(r)}const iU="modulepreload",rU=function(r){return"/"+r},u0={},sU=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let d=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=d(t.map(g=>{if(g=rU(g),g in u0)return;u0[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":iU,y||(S.as="script"),S.crossOrigin="",S.href=g,h&&S.setAttribute("nonce",h),document.head.appendChild(S),y)return new Promise((I,R)=>{S.addEventListener("load",I),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};function c0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function h0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c0(Object(t),!0).forEach(function(i){aU(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):c0(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function aU(r,e,t){return(e=oU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function oU(r){var e=lU(r,"string");return Ya(e)=="symbol"?e:e+""}function lU(r,e){if(Ya(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Ya(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ya(r){"@babel/helpers - typeof";return Ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(r)}var Us=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Us=global.fetch:typeof window<"u"&&window.fetch&&(Us=window.fetch);var Dc;m1()&&(typeof global<"u"&&global.XMLHttpRequest?Dc=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Dc=window.XMLHttpRequest));var Ld;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Ld=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Ld=window.ActiveXObject));typeof Us!="function"&&(Us=void 0);if(!Us&&!Dc&&!Ld)try{sU(()=>import("./browser-ponyfill-D3xisAXc.js").then(r=>r.b),[]).then(function(r){Us=r.default}).catch(function(){})}catch{}var Uy=function(e,t){if(t&&Ya(t)==="object"){var i="";for(var a in t)i+="&"+encodeURIComponent(a)+"="+encodeURIComponent(t[a]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},f0=function(e,t,i,a){var l=function(d){if(!d.ok)return i(d.statusText||"Error",{status:d.status});d.text().then(function(g){i(null,{status:d.status,data:g})}).catch(i)};if(a){var u=a(e,t);if(u instanceof Promise){u.then(l).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(l).catch(i):Us(e,t).then(l).catch(i)},d0=!1,uU=function(e,t,i,a){e.queryStringParams&&(t=Uy(t,e.queryStringParams));var l=h0({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(l["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(l["Content-Type"]="application/json");var u=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,h=h0({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:l},d0?{}:u),d=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{f0(t,h,a,d)}catch(g){if(!u||Object.keys(u).length===0||!g.message||g.message.indexOf("not implemented")<0)return a(g);try{Object.keys(u).forEach(function(y){delete h[y]}),f0(t,h,a,d),d0=!0}catch(y){a(y)}}},cU=function(e,t,i,a){i&&Ya(i)==="object"&&(i=Uy("",i).slice(1)),e.queryStringParams&&(t=Uy(t,e.queryStringParams));try{var l=Dc?new Dc:new Ld("MSXML2.XMLHTTP.3.0");l.open(i?"POST":"GET",t,1),e.crossDomain||l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.withCredentials=!!e.withCredentials,i&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.overrideMimeType&&l.overrideMimeType("application/json");var u=e.customHeaders;if(u=typeof u=="function"?u():u,u)for(var h in u)l.setRequestHeader(h,u[h]);l.onreadystatechange=function(){l.readyState>3&&a(l.status>=400?l.statusText:null,{status:l.status,data:l.responseText})},l.send(i)}catch(d){console&&console.log(d)}},hU=function(e,t,i,a){if(typeof i=="function"&&(a=i,i=void 0),a=a||function(){},Us&&t.indexOf("file:")!==0)return uU(e,t,i,a);if(m1()||typeof ActiveXObject=="function")return cU(e,t,i,a);a(new Error("No fetch and no xhr implementation found!"))};function Nl(r){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(r)}function m0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function Qp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m0(Object(t),!0).forEach(function(i){g1(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):m0(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function fU(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function dU(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,p1(i.key),i)}}function mU(r,e,t){return e&&dU(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function g1(r,e,t){return(e=p1(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function p1(r){var e=gU(r,"string");return Nl(e)=="symbol"?e:e+""}function gU(r,e){if(Nl(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Nl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var pU=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,a){return g1({},i,a||"")},parseLoadPayload:function(t,i){},request:hU,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},y1=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fU(this,r),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return mU(r,[{key:"init",value:function(t){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=Qp(Qp(Qp({},pU()),this.options||{}),a),this.allOptions=l,this.services&&this.options.reloadInterval){var u=setInterval(function(){return i.reload()},this.options.reloadInterval);Nl(u)==="object"&&typeof u.unref=="function"&&u.unref()}}},{key:"readMulti",value:function(t,i,a){this._readAny(t,t,i,i,a)}},{key:"read",value:function(t,i,a){this._readAny([t],t,[i],i,a)}},{key:"_readAny",value:function(t,i,a,l,u){var h=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(t,a)),d=nU(d),d.then(function(g){if(!g)return u(null,{});var y=h.services.interpolator.interpolate(g,{lng:t.join("+"),ns:a.join("+")});h.loadUrl(y,u,i,l)})}},{key:"loadUrl",value:function(t,i,a,l){var u=this,h=typeof a=="string"?[a]:a,d=typeof l=="string"?[l]:l,g=this.options.parseLoadPayload(h,d);this.options.request(this.options,t,g,function(y,v){if(v&&(v.status>=500&&v.status<600||!v.status))return i("failed loading "+t+"; status code: "+v.status,!0);if(v&&v.status>=400&&v.status<500)return i("failed loading "+t+"; status code: "+v.status,!1);if(!v&&y&&y.message){var S=y.message.toLowerCase(),I=["failed","fetch","network","load"].find(function(V){return S.indexOf(V)>-1});if(I)return i("failed loading "+t+": "+y.message,!0)}if(y)return i(y,!1);var R,P;try{typeof v.data=="string"?R=u.options.parse(v.data,a,l):R=v.data}catch{P="failed parsing "+t+" to json"}if(P)return i(P,!1);i(null,R)})}},{key:"create",value:function(t,i,a,l,u){var h=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var d=this.options.parsePayload(i,a,l),g=0,y=[],v=[];t.forEach(function(S){var I=h.options.addPath;typeof h.options.addPath=="function"&&(I=h.options.addPath(S,i));var R=h.services.interpolator.interpolate(I,{lng:S,ns:i});h.options.request(h.options,R,d,function(P,V){g+=1,y.push(P),v.push(V),g===t.length&&typeof u=="function"&&u(y,v)})})}}},{key:"reload",value:function(){var t=this,i=this.services,a=i.backendConnector,l=i.languageUtils,u=i.logger,h=a.language;if(!(h&&h.toLowerCase()==="cimode")){var d=[],g=function(v){var S=l.toResolveHierarchy(v);S.forEach(function(I){d.indexOf(I)<0&&d.push(I)})};g(h),this.allOptions.preload&&this.allOptions.preload.forEach(function(y){return g(y)}),d.forEach(function(y){t.allOptions.ns.forEach(function(v){a.read(y,v,"read",null,null,function(S,I){S&&u.warn("loading namespace ".concat(v," for language ").concat(y," failed"),S),!S&&I&&u.log("loaded namespace ".concat(v," for language ").concat(y),I),a.loaded("".concat(y,"|").concat(v),S,I)})})})}}}])})();y1.type="backend";Ut.use(y1).use(d1).use(g4).init({fallbackLng:"en",supportedLngs:["it","en","uk","fr"],defaultNS:"translation",debug:!1,interpolation:{escapeValue:!1,formatSeparator:","},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json",requestOptions:{cache:"default",credentials:"same-origin"}},detection:{order:["localStorage","querystring","cookie","sessionStorage","navigator","htmlTag"],caches:["localStorage","cookie"],lookupLocalStorage:"i18nextLng",lookupQuerystring:"lng",lookupCookie:"i18next",convertDetectedLanguage:r=>({"en-GB":"en","en-US":"en","it-IT":"it","fr-FR":"fr","uk-UA":"uk"})[r]||r.split("-")[0]},react:{useSuspense:!0,bindI18n:"languageChanged loaded",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"]}});Ut.on("initialized",r=>{console.log(" i18next initialized"),console.log(" Detected language:",Ut.language),console.log(" Supported languages:",r.supportedLngs)});Ut.on("languageChanged",r=>{console.log(" Language changed:",r),document.documentElement.lang=r});Ut.on("failedLoading",(r,e,t)=>{console.error(` Translation loading error [${r}/${e}]:`,t)});function yU(){return b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",flexDirection:"column",gap:"1rem"},children:[b.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),b.jsx("p",{style:{fontSize:"1.1rem",fontWeight:"600"},children:" Loading translations..."}),b.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}sx.createRoot(document.getElementById("root")).render(b.jsx(WC.StrictMode,{children:b.jsx(F.Suspense,{fallback:b.jsx(yU,{}),children:b.jsx(j4,{})})}));export{_U as c,g0 as g};
